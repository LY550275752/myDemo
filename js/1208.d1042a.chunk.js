"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[1208,9675,1025],{39675:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var a=t(89810),o=t(1725),s=t(48402);const c={class:"item-header"},l=(i=()=>(0,a.createElementVNode)("div",{class:"item-header-left"},[(0,a.createElementVNode)("span",{class:"item-header-left-icon"},[(0,a.createElementVNode)("i",{class:"iconfont icon-announcement-empty"})]),(0,a.createElementVNode)("span",{class:"item-header-left-name"},"公告")],-1),(0,a.pushScopeId)("data-v-01a977fa"),i=i(),(0,a.popScopeId)(),i);var i;const r={class:"item-header-right"},d={class:"item-header-right-time"},m={class:"item-content"},u={class:"item-content-title single-line"},p={key:0,class:"item-content-title-unread"},g={class:"item-content-sub single-line"},v=(0,a.defineComponent)({__name:"announcementItem",props:{announcement:{type:Object,require:!0,default:()=>{}}},setup(e){const n=e,t=s.nC.get(o.pX);function i(){t.openMessageDetail({data:n.announcement,source:o.Vh.MESSAGE_CENTER})}return(n,o)=>{return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"item",onClick:i},[(0,a.createElementVNode)("div",c,[l,(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",d,(0,a.toDisplayString)((s=e.announcement.validTime,t.formatTime(s))),1)])]),(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",u,[(0,a.createTextVNode)((0,a.toDisplayString)(e.announcement.title)+" ",1),0===e.announcement.haveRead?((0,a.openBlock)(),(0,a.createElementBlock)("span",p)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",g,(0,a.toDisplayString)(e.announcement.content),1)])]);var s}}});const f=(0,t(57775).Z)(v,[["__scopeId","data-v-01a977fa"]])},29188:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var a=t(89810),o=t(2525),s=t(1725),c=t(48402),l=t(19816),i=t(46310),r=t(39675),d=function(e,n,t,a){return new(t||(t=Promise))((function(o,s){function c(e){try{i(a.next(e))}catch(e){s(e)}}function l(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,l)}i((a=a.apply(e,n||[])).next())}))};const m=e=>((0,a.pushScopeId)("data-v-55235076"),e=e(),(0,a.popScopeId)(),e),u={class:"new-message"},p={class:"new-message-header"},g=m((()=>(0,a.createElementVNode)("div",{class:"new-message-header-left"},[(0,a.createElementVNode)("p",{class:"new-message-header-left-icon"},[(0,a.createElementVNode)("i",{class:"iconfont icon-liaotian"})]),(0,a.createElementVNode)("p",{class:"new-message-header-left-text"},"新消息")],-1))),v={class:"new-message-header-right"},f=[m((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-shezhi"},null,-1)))],h={key:0,class:"new-message-container"},k={key:1,class:"new-message-empty"},E=m((()=>(0,a.createElementVNode)("img",{src:o,draggable:"false"},null,-1))),N=(0,a.defineComponent)({__name:"newMessage",setup(e){const n=c.nC.get(s.pX),t=(0,a.inject)("$dialog");var o=(0,a.ref)([]),m=!1,N=(0,a.ref)([]);function w(){return d(this,void 0,void 0,(function*(){m||(m=!0,o.value=yield n.initDataInNewMessage(),o.value.forEach((e=>{3===e.source&&e.messageList&&1===e.messageList.length&&(N.value=N.value.filter((n=>n!==e.app.appId)))}))),m=!1}))}function V(){t.exsited("messageCenter")?t.focus("messageCenter"):t.open("messageCenter"),setTimeout((()=>{t.close("newMessage")}),400)}function C(e){N.value.includes(e)?N.value=N.value.filter((n=>n!==e)):N.value.push(e)}function B(){t.close("newMessage")}function y(){t.open("messageSetting")}return(0,a.onMounted)((()=>d(this,void 0,void 0,(function*(){l.k.info("[message-center]:打开newMessage"),(0,a.nextTick)((()=>{var e=t.getCurrentDialogId();t.config(e,{width:320,showHeader:!1,isRightBottom:!0})})),o.value=yield n.initDataInNewMessage(),1===o.value.length&&3===o.value[0].source&&o.value[0].messageList.length>1&&(N.value=[o.value[0].app.appId]),n.onReloadDataInFrame.on(w)})))),(e,n)=>{const t=(0,a.resolveComponent)("Close"),s=(0,a.resolveComponent)("el-icon");return(0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createElementVNode)("div",p,[g,(0,a.createElementVNode)("div",v,[(0,a.createElementVNode)("button",{class:"new-message-header-right-btn win-btn",onClick:y},f),(0,a.createElementVNode)("button",{class:"new-message-header-right-btn win-btn close-btn",onClick:B},[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(t)])),_:1})])])]),(0,a.unref)(o).length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",h,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(o),((e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"new-message-container-item",key:n},[1===e.source?((0,a.openBlock)(),(0,a.createBlock)(r.default,{key:0,source:e},null,8,["source"])):(0,a.createCommentVNode)("",!0),3===e.source?((0,a.openBlock)(),(0,a.createBlock)(i.default,{key:1,param:e,"is-expand":(0,a.unref)(N).includes(e.app.appId),onOnExpandChange:C},null,8,["param","is-expand"])):(0,a.createCommentVNode)("",!0)])))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)("div",k,[E,(0,a.createTextVNode)(" 暂无消息 ")])),(0,a.createElementVNode)("div",{class:"new-message-bottom"},[(0,a.createElementVNode)("div",{class:"new-message-bottom-right",onClick:V},"进入消息中心")])])}}});const w=(0,t(57775).Z)(N,[["__scopeId","data-v-55235076"]])},2525:(e,n,t)=>{e.exports=t.p+"imgs/message.d1042a.svg"}}]);