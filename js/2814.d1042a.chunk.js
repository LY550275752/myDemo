(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[2814],{64566:(e,t,l)=>{"use strict";l.d(t,{F:()=>D});var a=l(89810),o=l(75566),n=l(43500),i=l(28125),r=l(40712),u=l(41638),c=l(52429),s=l(50729),d=l(24577),v=0;var f=l(48331),p=l(47383),m=l(16934),h=(0,s.do)("toast"),g=(0,c.Z)(h,2),y=g[0],w=g[1],b=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],C={icon:String,show:Boolean,type:(0,d.SQ)("text"),overlay:Boolean,message:d.Or,iconSize:d.Or,duration:(0,d.qM)(2e3),position:(0,d.SQ)("middle"),teleport:[String,Object],className:d.Vg,iconPrefix:String,transition:(0,d.SQ)("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:d.Vg,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},k=(0,a.defineComponent)({name:y,props:C,emits:["update:show"],setup:function(e,t){var l,i=t.emit,r=!1,c=function(){var t=e.show&&e.forbidClick;r!==t&&((r=t)?(v||document.body.classList.add("van-toast--unclickable"),v++):v&&(--v||document.body.classList.remove("van-toast--unclickable")))},s=function(e){return i("update:show",e)},d=function(){e.closeOnClick&&s(!1)},h=function(){return clearTimeout(l)},g=function(){var t=e.type,l=e.message;if((0,n.Xq)(l)&&""!==l)return"html"===t?(0,a.createVNode)("div",{key:0,class:w("text"),innerHTML:String(l)},null):(0,a.createVNode)("div",{class:w("text")},[l])};return(0,a.watch)((function(){return[e.show,e.forbidClick]}),c),(0,a.watch)((function(){return[e.show,e.type,e.message,e.duration]}),(function(){h(),e.show&&e.duration>0&&(l=setTimeout((function(){s(!1)}),e.duration))})),(0,a.onMounted)(c),(0,a.onUnmounted)(c),function(){return(0,a.createVNode)(p.G,(0,a.mergeProps)({class:[w([e.position,(0,u.Z)({},e.type,!e.icon)]),e.className],lockScroll:!1,onClick:d,onClosed:h,"onUpdate:show":s},(0,o.ei)(e,b)),{default:function(){return[(t=e.icon,l=e.type,o=e.iconSize,n=e.iconPrefix,i=e.loadingType,t||"success"===l||"fail"===l?(0,a.createVNode)(f.J,{name:t||l,size:o,class:w("icon"),classPrefix:n},null):"loading"===l?(0,a.createVNode)(m.g,{class:w("loading"),size:o,type:i},null):void 0),g()];var t,l,o,n,i}})}}}),V={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},B=[],S=!1,N=(0,o.l7)({},V),E=new Map;function x(e){return(0,n.Kn)(e)?e:{message:e}}function _(){if(!B.length||S){var e=function(){var e=(0,r.H)({setup:function(){var e=(0,a.ref)(""),o=(0,r.o)(),n=o.open,i=o.state,u=o.close,c=o.toggle,s=function(){S&&(B=B.filter((function(e){return e!==t})),l())};return(0,a.watch)(e,(function(e){i.message=e})),(0,a.getCurrentInstance)().render=function(){var e={onClosed:s,"onUpdate:show":c};return(0,a.createVNode)(k,(0,a.mergeProps)(i,e),null)},{open:n,clear:u,message:e}}}),t=e.instance,l=e.unmount;return t}();B.push(e)}return B[B.length-1]}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o._f)return{};var t=_(),l=x(e);return t.open((0,o.l7)({},N,E.get(l.type||N.type),l)),t}var P=function(e){return function(t){return D((0,o.l7)({type:e},x(t)))}};D.loading=P("loading"),D.success=P("success"),D.fail=P("fail"),D.clear=function(e){var t;B.length&&(e?(B.forEach((function(e){e.clear()})),B=[]):S?null==(t=B.shift())||t.clear():B[0].clear())},D.setDefaultOptions=function(e,t){"string"==typeof e?E.set(e,t):(0,o.l7)(N,e)},D.resetDefaultOptions=function(e){"string"==typeof e?E.delete(e):(N=(0,o.l7)({},V),E.clear())},D.allowMultiple=function(){S=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},D.install=function(e){e.use((0,i.n)(k)),e.config.globalProperties.$toast=D}},98205:(e,t,l)=>{"use strict";l.r(t)},15807:(e,t,l)=>{l(89170),l(73864),l(85223),l(59772),l(98506),l(67426),l(98205)},72900:(e,t,l)=>{"use strict";function a(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function o(e){let t;if("object"!=typeof e)t=e;else if("null"===a(e)||"undefined"===a(e))t=e;else if("array"===a(e)){let l;t=[];const a=e.length;for(l=0;l<a;l++)t.push(e[l])}else if("object"===a(e)){t={};for(let l in e)if(e.hasOwnProperty(l)){const n=e[l];if(n===e)continue;"array"===a(n)||"object"===a(n)?t[l]=o(n):t[l]=n}}else t=e;return t}l.d(t,{Dy:()=>n,Jh:()=>i,Oh:()=>c,d9:()=>o,ds:()=>u,p:()=>r,p6:()=>s});function n(e){let t=0,l="当前密码只包含",a={flag:!1,message:""};return/\s/.test(e)?(a.message="密码不支持空格",a):/[\u4e00-\u9fa5]+/.test(e)?(a.message="密码不支持中文",a):e.length<8||e.length>20?(a.message="密码长度需要在 8-20 位之间",a):(/([a-z])+/.test(e)&&(l+="小写字母 ",t++),/([A-Z])+/.test(e)&&(l+="大写字母 ",t++),/(\d)+/.test(e)&&(l+="数字 ",t++),/[!"#\$%&'\(\)\*\+,-\.\/:;<=>\?@\[\\\]\^_`\{\|\}~]/.test(e)&&(l+="特殊字符 ",t++),t<3?a.message=l:(a.flag=!0,a.message=""),a)}function i(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim())}function r(e){return/1\d{10}/g.test(e.trim())}function u(e){return/^((25[0-5]|2[0-4]\d|[1]{1}\d{1}\d{1}|[1-9]{1}\d{1}|\d{1})($|(?!\.$)\.)){4}$/.test(e)}function c(e){let t=e.split(":"),l=0,a="";if(t.length>2)l=Number(t.pop()),a=t.join(":");else{if(2!==t.length)throw new Error("无法解析服务器地址");a=t[0],l=Number(t[1])}return{host:a,port:l}}function s(e,t="yyyy-MM-dd",l="--"){if(!e)return l;let a=new Date(e);if(e=e+60*a.getTimezoneOffset()*1e3- -288e5,a.setTime(e),"Invalid Date"===a.toString())return l;let o={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in o)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?o[e]:("00"+o[e]).substr((""+o[e]).length)));return t}},17008:(e,t,l)=>{"use strict";l.d(t,{A:()=>m});var a=l(6522),o=l(88538),n=l(6298),i=l(55304),r=l(48402);Symbol("Device");var u,c,s,d,v=function(e,t,l,a){var o,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,l):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,l,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(i=(n<3?o(i):n>3?o(t,l,i):o(t,l))||i);return n>3&&i&&Object.defineProperty(t,l,i),i},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(e,t,l,a){return new(l||(l=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(e){n(e)}}function r(e){try{u(a.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}u((a=a.apply(e,t||[])).next())}))};let m=class{constructor(e,t,l,a){this.Env=e,this.Auth=t,this.Desktop=l,this.Request=a,this.windowName="device",this.registerListeners()}registerListeners(){}bind(e){return p(this,void 0,void 0,(function*(){let t={verificationCode:e,deviceName:this.Env.getDeviceName(),deviceCode:this.Env.getDeviceCode(),deviceModel:this.Env.getDeviceModel(),sysVersion:this.Env.getOSVersion(),appVersion:this.Env.getAppVersion(),hostName:this.Env.getHostName(),deviceInfo:window.navigator.platform||"WebBrowser"},l=yield this.Request.api({method:"POST",url:"api/cdserv/client/device/binding",params:t,headers:{NEED_SIGN:!0,"Content-Type":"application/x-www-form-urlencoded"}});return this.Auth.updateAuthProfile({bondedDevice:!0}),this.Auth.saveAccountData(),l.data}))}unbind(){return p(this,void 0,void 0,(function*(){return!1}))}getBindCaptchaCode(e){return p(this,void 0,void 0,(function*(){if(!this.Auth.getAuthProfile())throw new Error("帐号未登录");return yield this.Request.api({method:"GET",url:"api/auth/client/validateCode/captcha",params:Object.assign(Object.assign({},e),{_t:Date.now()}),responseType:"blob"})}))}sendBindSMSCode(e){return p(this,void 0,void 0,(function*(){if(!this.Auth.getAuthProfile())throw new Error("帐号未登陆");return(yield this.Request.api({url:"api/cdserv/client/device/getSmsCode",method:"GET",params:e,headers:{NEED_SIGN:!0}})).data}))}};m=v([(0,r.Xn)(),f("design:paramtypes",["function"==typeof(u=void 0!==a.Xb&&a.Xb)?u:Object,"function"==typeof(c=void 0!==n.g&&n.g)?c:Object,"function"==typeof(s=void 0!==i.hD&&i.hD)?s:Object,"function"==typeof(d=void 0!==o.cf&&o.cf)?d:Object])],m)},93109:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>s});var a=l(89810),o=l(45958);const n={class:"drawer-select"},i={key:0},r={class:"drawer-select-content"},u=["onClick"],c=(0,a.defineComponent)({__name:"index",props:{title:null,data:null,modelValue:null,labelProps:{default:"label"},objectValue:{type:Boolean},valueKey:{default:"id"},mutiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){const l=e,c=(0,a.computed)((()=>l.modelValue?l.modelValue.id?l.modelValue.id:l.modelValue:null)),s=(0,a.computed)((()=>{if(l.mutiple&&l.modelValue instanceof Array&&0!==l.modelValue.length)return l.data.filter((e=>-1!==l.modelValue.indexOf(e[l.valueKey]))).map((e=>e[l.labelProps]||e[l.valueKey])).join(",");if(!l.mutiple&&l.modelValue){if(l.modelValue[l.labelProps])return l.modelValue[l.labelProps];let e=l.modelValue[l.valueKey]||l.modelValue,t=l.data.find((t=>t[l.valueKey]===e||t===e))||{};return t[l.labelProps]||t||""}return l.title||""})),d=(0,a.ref)(!1),v=(0,a.ref)();return(f,p)=>{const m=(0,a.resolveComponent)("el-icon"),h=(0,a.resolveComponent)("el-drawer");return(0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["drawer-select-input",{"input-value":(0,a.unref)(c),placeholder:!(0,a.unref)(c)}]),onClick:p[0]||(p[0]=e=>d.value=!0)},[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)((0,a.unref)(s)),1),(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(o.Z))])),_:1})],2),(0,a.createVNode)(h,{modelValue:d.value,"onUpdate:modelValue":p[1]||(p[1]=e=>d.value=e),direction:"btt",size:"180","show-close":!1,"with-header":!1,ref_key:"elDrawerRef",ref:v},{default:(0,a.withCtx)((()=>[e.title?((0,a.openBlock)(),(0,a.createElementBlock)("h5",i,(0,a.toDisplayString)(e.title)+":",1)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("ul",r,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.data,((e,o)=>{return(0,a.openBlock)(),(0,a.createElementBlock)("li",{class:(0,a.normalizeClass)(["drawer-select-item",{active:(n=e,l.mutiple&&l.modelValue instanceof Array?-1!==l.modelValue.indexOf(n[l.valueKey]):l.objectValue&&l.modelValue?l.modelValue[l.valueKey]===n[l.valueKey]:l.modelValue===n)}]),key:o,onClick:o=>function(e){let o;if(l.mutiple&&l.modelValue instanceof Array){o=l.modelValue;const t=o.indexOf(e[l.valueKey]);-1===t?o.push(e[l.valueKey]):o.splice(t,1)}else o=l.objectValue?e:e[l.valueKey];t("update:modelValue",o),t("change",o),(0,a.unref)(v).handleClose()}(e)},(0,a.toDisplayString)(l.labelProps&&e[l.labelProps]?e[l.labelProps]:e[l.valueKey]),11,u);var n})),128))])])),_:1},8,["modelValue"])])}}});const s=(0,l(57775).Z)(c,[["__scopeId","data-v-35064116"]])},42814:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>J});var a=l(89810),o=l(52134),n=l(63102),i=l(2562),r=l(65076),u=l(40680),c=l(66527),s=l(93109),d=l(17999),v=l(48402),f=l(55304),p=l(6298),m=l(6522),h=l(44876),g=l(65431),y=l(91308),w=l(57524),b=l(99143),C=l(65050),k=l(78125),V=l(92720),B=l(64566),S=(l(15807),l(54478)),N=l(17008),E=l(72900),x=function(e,t,l,a){return new(l||(l=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(e){n(e)}}function r(e){try{u(a.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const _=(0,g.Q_)("auth",(()=>{const e=v.nC.get(p.g),t=v.nC.get(N.A),l=(0,d.yj)(),o=(0,d.tv)(),n=(0,a.ref)(null),i=(0,a.ref)(null),r=(0,a.ref)(""),u=(0,a.ref)(""),s=(0,a.ref)(""),f=(0,a.ref)(""),m=(0,a.ref)(""),h=(0,a.ref)(""),g=(0,a.ref)(!1),y=(0,a.ref)(""),w=(0,a.ref)(!1),b=(0,a.ref)(!1),C=(0,a.ref)(!1),k=((0,a.ref)(""),(0,a.ref)("")),_=(0,a.ref)(""),D=(0,a.ref)(!1),P=(0,a.ref)(!1),F=(0,a.ref)(!1),I=(0,a.ref)(!1),A=(0,a.ref)(""),j=(0,a.ref)(""),O=(0,a.ref)(0),M=(0,a.ref)(0),R=(0,a.ref)(!1),T=(0,a.ref)(!1),U=((0,a.ref)(0),(0,a.ref)(!1)),L=(0,a.ref)(!1),q=(0,a.ref)(""),z=(0,a.ref)(""),Z=(0,a.ref)(""),$=(0,a.ref)(""),K=(0,a.ref)(""),H=(0,a.ref)(!1),Q=(0,a.ref)(""),G=(0,a.ref)(!1),J=(0,a.ref)(!0),W=(0,a.ref)(""),Y=(0,a.ref)(""),X=(0,a.ref)(!1),ee=(0,a.computed)((()=>!(!n.value||!n.value.userId)));(0,a.computed)((()=>"phone_device_verify"===l.name)),(0,a.computed)((()=>"phone_verification"===l.name));function te(){return x(this,void 0,void 0,(function*(){try{le(yield e.getAuthProfile())}catch(e){}}))}function le(e){e&&e.mobilephone&&(s.value=e.mobilephone),n.value=(0,V.cloneDeep)(e)}function ae(){return x(this,void 0,void 0,(function*(){b.value=!0;let t={width:100,height:40,userInfo:r.value};C.value&&(t.preUrl=y.value);try{y.value=yield e.getCaptchaUrl(t),b.value=!1,C.value=!1}catch(e){B.F.fail(e.message),C.value=!0,b.value=!1}}))}function oe(){return x(this,void 0,void 0,(function*(){D.value=!0;let t={width:100,height:40,userInfo:s.value};F.value&&(t.preUrl=A.value),F.value=!1;try{A.value=yield e.getCaptchaUrl(t),D.value=!1}catch(e){B.F.fail(e.message),F.value=!0,D.value=!1}}))}function ne(){return x(this,void 0,void 0,(function*(){P.value=!0,F.value=!1;const e={width:100,height:40};try{const l=yield t.getBindCaptchaCode(e);j.value=URL.createObjectURL(new Blob([l.data],{type:"image/jpeg"})),P.value=!1}catch(e){B.F.fail(e.message),I.value=!0,P.value=!1}}))}function ie(){if(M.value=Math.ceil((O.value-Date.now())/1e3),M.value>0){const e=setInterval((()=>{M.value<0&&clearInterval(e),M.value=Math.ceil((O.value-Date.now())/1e3)}),1e3)}}return{username:r,password:u,needCaptcha:w,captcha:f,logging:g,captchaUrl:y,validating:U,phoneCaptcha:k,bindCaptcha:_,phone:s,phoneCaptchaUrl:A,bindCaptchaUrl:j,sms:m,bindSms:h,countdownSecond:M,loginData:i,authData:n,logged:ee,binding:L,initAuth:te,updateAuthData:le,updateLoginData:function(e){i.value=(0,V.cloneDeep)(e)},getCaptcha:ae,submitLogin:function(){return x(this,void 0,void 0,(function*(){g.value=!0;let t={username:r.value,password:(0,S.FB)(u.value).toString(),sha256Password:(0,S.JQ)(u.value).toString(),remember:!1};w.value&&(t.captchaCode=f.value.trim());try{const l=yield e.login(t);s.value=l.mobilephone,g.value=!1,te()}catch(e){g.value=!1,[c.or.NEED_CAPTCHA,c.or.INVALID_CAPTCHA,c.or.EXPIRE_CAPTCHA].includes(e.code)&&(w.value=!0),B.F.fail(e.message),f.value="",yield ae()}}))},getPhoneCaptcha:oe,getSms:function(){return x(this,void 0,void 0,(function*(){if(!s.value.trim())return void o.replace({name:"phone_login"});if(!k.value.trim())return void(0,B.F)("请输入图形码");if(R.value||M.value>0)return;R.value=!0,T.value=!1;const t={mobilePhone:s.value,captchaCode:k.value};try{yield e.sendLoginSmsCode(t),R.value=!1,O.value=Date.now()+6e4,B.F.success("发送成功"),ie()}catch(e){R.value=!1,T.value=!0,B.F.fail(e.message),oe()}}))},phoneVerification:function(){return x(this,void 0,void 0,(function*(){if(!s.value.trim())return;if(!k.value.trim())return void(0,B.F)("请输入图形验证码");if(!m.value.trim())return void(0,B.F)("请输入短信验证码");if(!i.value)return(0,B.F)("请重新登录"),void o.replace({name:"phone_login"});U.value=!0;let t=(0,V.cloneDeep)(i.value);t.smsCode=m.value.trim();try{yield e.login(t),U.value=!1}catch(e){m.value="",k.value="",B.F.fail(e.message),oe(),U.value=!1}}))},getBindCaptcha:ne,bindDevice:function(){return x(this,void 0,void 0,(function*(){if(s.value.trim())if(_.value.trim())if(h.value.trim()){L.value=!0;try{yield t.bind(h.value.trim()),L.value=!1,B.F.success("验证成功"),o.push({name:"phone_home"})}catch(e){B.F.fail(e.message),L.value=!1,_.value="",h.value="",ne()}}else(0,B.F)("请输入短信验证码");else(0,B.F)("请输入图形验证码");else o.replace({name:"phone_login"})}))},getBindSms:function(){return x(this,void 0,void 0,(function*(){if(!s.value.trim())return void o.replace({name:"phone_login"});if(!_.value.trim())return void(0,B.F)("请输入图形码");if(R.value||M.value>0)return;R.value=!0,T.value=!1;let e={mobilePhone:s.value,captchaCode:_.value};try{yield t.sendBindSMSCode(e),R.value=!1,O.value=Date.now()+6e4,B.F.success("发送成功"),ie()}catch(e){R.value=!1,T.value=!0,B.F.fail(e.message),ne()}}))},logout:function(){return x(this,void 0,void 0,(function*(){yield e.logout(),te(),window.location.reload()}))},loadingForgot:H,forgotPhone:q,forgotCode:z,newPassword:$,confirmPassword:K,getForgotSms:function(){return x(this,void 0,void 0,(function*(){if(R.value||M.value>0)return;if(!(0,E.p)(q.value))return void(0,B.F)("请填写正确的手机号");const t={mobilePhone:Number(q.value)};R.value=!0,T.value=!1;try{yield e.sendSMSCode(t),R.value=!1,O.value=Date.now()+6e4,B.F.success("发送成功"),ie()}catch(e){R.value=!1,T.value=!0,B.F.fail(e.message)}}))},checkForgotUser:function(){return x(this,void 0,void 0,(function*(){H.value=!0;const t={mobilePhone:Number(q.value),validateCode:String(z.value)};try{yield e.checkAndGetUserInfo(t),Z.value=yield e.validateSMSCode(t),z.value="",H.value=!1,o.push({name:"phone_new_password"})}catch(e){H.value=!1,B.F.fail(e.message)}}))},submitForgot:function(){return x(this,void 0,void 0,(function*(){if(!q.value)return(0,B.F)("手机号无效"),void o.replace({name:"phone_forgot"});if(!$.value||!K.value)return void(0,B.F)("请输入密码");if($.value!==K.value)return void(0,B.F)("两次输入密码不一致");const t=(0,E.Dy)(K.value);if(!t.flag)return void(0,B.F)(t.message);H.value=!0;const l={mobilePhone:Number(q.value),password:K.value,sign:Z.value,encPwd1:(0,S.FB)(String($.value)),encPwd2:(0,S.JQ)(String(K.value))};try{yield e.forgetPassword(l),H.value=!1,o.push({name:"phone_home",query:{module:"me"}}),B.F.success("重置成功")}catch(e){H.value=!1,B.F.fail(e.message)}}))},updateNewPassword:function(e){$.value=e},updateConfirmPassword:function(e){K.value=e},validateCode:Q,accountValidating:G,getValidateSms:function(){return x(this,void 0,void 0,(function*(){if(R.value||M.value>0)return;const t={mobilePhone:n.value&&Number(n.value.mobilephone)};R.value=!0,T.value=!1;try{yield e.sendSMSCode(t),R.value=!1,O.value=Date.now()+6e4,B.F.success("验证码已发送，请查收"),ie()}catch(e){R.value=!1,T.value=!0,B.F.fail(e.message)}}))},validateAccount:function(){return x(this,void 0,void 0,(function*(){const t={mobilePhone:n.value&&Number(n.value.mobilephone),validateCode:Q.value};try{yield e.checkAndGetUserInfo(t),yield e.validateSMSCode(t),J.value=!0,Q.value="",o.push({name:"phone_new_phone"})}catch(e){B.F.fail(e.message)}}))},isValidate:J,newPhone:W,newEmail:Y,setNewPhone:function(){return x(this,void 0,void 0,(function*(){X.value=!0,B.F.loading("正在提交");const t={newPhoneNum:W.value,validateCode:Q.value};try{yield e.changeMobilePhone(t),X.value=!1,B.F.clear(),o.push({name:"phone_account"})}catch(e){B.F.fail(e.message)}}))},resetAuth:function(){n.value=null},resetLoginData:function(){r.value="",u.value="",f.value="",w.value=!1},loginByToken:function(){return x(this,void 0,void 0,(function*(){const{token:t}=l.query;if(t)try{yield e.loginByToken(t),te()}catch(e){}}))}}}));var D=function(e,t,l,a){return new(l||(l=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(e){n(e)}}function r(e){try{u(a.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const P=(0,g.Q_)("base",(()=>{const e=v.nC.get(p.g),t=(0,d.yj)(),l=(0,d.tv)(),n=(0,a.ref)("phone"),i=_(),{logged:r}=(0,g.Jk)(i),u=(0,a.ref)([{name:"云手机",id:"phone",icon:y.Z},{name:"我",id:"me",icon:w.Z}]),c=(0,a.computed)((()=>[{name:"账号与安全",id:"account",icon:w.Z,color:"#3296FF",visible:r.value},{name:"报障",id:"report",icon:b.Z,color:"#FFB43C",visible:!0},{name:"帮助手册",id:"help",icon:C.Z,color:"#3296FF",visible:!0},{name:"关于",id:"about",icon:k.Z,color:"#3296FF",visible:!0}])),s=(0,a.ref)(!1);return{currentModule:n,modules:u,features:c,showPanel:s,changeModule:function(e){n.value=e,l.replace({query:{module:e}})},initCurrentModule:function(){t.query.module&&(n.value=t.query.module.toString())},handleBack:function(e,t){window.history.state?window.history.go(-1):t?l.replace(e):l.push(e)},updateShowPanel:function(e){s.value=!!e},getAppInfo:function(){return D(this,void 0,void 0,(function*(){const t=Date.now();let l={appId:o.kJ,operStaff:o.eW,orgId:o.TY,sign:"",tenantId:-2,timeStamp:t};const a=yield e.getAuthProfile();return a&&(l.tenantId=a.tenantId),l.sign=(0,o.gw)(t,o.eW,l.tenantId),l}))}}}));var F=l(5341),I=l(14334),A=function(e,t,l,a){return new(l||(l=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(e){n(e)}}function r(e){try{u(a.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const j=e=>((0,a.pushScopeId)("data-v-aa86e8fe"),e=e(),(0,a.popScopeId)(),e),O={class:"reporting"},M=j((()=>(0,a.createElementVNode)("div",{class:"description-box"},[(0,a.createElementVNode)("span",{class:"description-text"},"在使用云电脑的过程中出现任何故障问题，请在如下页面反馈您的问题，我们将尽快为您处理修复")],-1))),R={class:"d-flex justify-space-between align-center",style:{"margin-right":"-16px"}},T=j((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-folder"},null,-1))),U=j((()=>(0,a.createElementVNode)("span",{class:"uploadTips grey--text text--light-1"},"(最多可上传3张jpg/png文件，每张大小不超过5M)",-1))),L={class:"uploadResult"},q={key:0,class:"progress"},z=["src","alt"],Z={key:3,class:"divide-height-10"},$={class:"d-flex justify-space-between align-center",style:{"margin-right":"-16px"}},K={class:"d-flex justify-space-between align-center",style:{"margin-right":"-16px"}},H={class:"d-flex justify-space-between align-center",style:{"margin-right":"-16px"}},Q={class:"submit-btn-box"},G=(0,a.defineComponent)({__name:"reporting",emits:["close"],setup(e,{emit:t}){const l=(0,F.mL)(),g=v.nC.get(m.Xb),y=v.nC.get(p.g),w=v.nC.get(I.WY),b=v.nC.get(h.yG),C=v.nC.get(f.hD),k=P(),V=(0,a.inject)("$message"),B=(0,a.inject)("$alert"),S=(0,a.ref)(null),N=(0,a.ref)({account:"",device:"",desc:"",type:null,files:[],contact:"",phone:"",email:""}),E=((0,d.yj)(),(0,a.ref)(!1)),x=(0,a.ref)([]),_=(0,a.ref)("image/jpg,image/png,image/jpeg"),D=(0,a.ref)({account:[{validator:function(e,t,l){G.value||t?l():l(new Error("请输入或选择账号"))}}],type:[{required:!0,message:"请选择故障类型"}],contact:[{required:!0,message:"请填写联系人"}],desc:[{required:!0,message:"请填写故障描述"}],phone:[{validator:function(e,t,l){t||l(new Error("请输入电话"));(0,n.p)(t)||l(new Error("电话格式不对"));l()}}],email:[{validator:function(e,t,l){t||l(new Error("请输入邮箱"));(0,n.Jh)(t)||l(new Error("邮箱格式不对"));l()}}],files:[{validator:function(e,t,l){if(N.value.files.length>0){N.value.files.filter((e=>e.response&&e.response.data.attachIdStrings.length>0)).length<N.value.files.length&&l("文件未上传完")}else l()}}]}),j=(0,a.ref)(null),G=(0,a.ref)(null),J=((0,a.ref)([]),(0,a.ref)([])),W=(0,a.ref)([]),Y=(0,a.ref)([]),X=(0,a.ref)([]),ee=(0,a.ref)(""),te=(0,a.ref)(null),le=(0,a.ref)({}),ae=(0,a.computed)((()=>C.activeConnection&&C.activeConnection.id)),oe=(0,a.computed)((()=>{let e=[];return Object.keys(o.Y5).forEach((t=>{o.Mx[t]&&e.push({id:o.Y5[t],label:o.Mx[t],value:t})})),e})),ne=((0,a.ref)(!1),(0,a.ref)(null));(0,a.ref)(!1);(0,a.watch)(G,(e=>{N.value.contact=e.userName,N.value.phone=e.mobilephone,N.value.email=e.email,N.value.account=e.userAccount}));(0,a.ref)(!0);function ie(e){var t;const l=e.size/1024/1024<5,a="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type;return null===(t=S.value)||void 0===t||t.validateField("files",(()=>a?l?void 0:(V({type:"error",message:"上传图片大小不能超过 5MB!"}),!1):(V({type:"error",message:"只能上传 jpg/png 格式的图片"}),!1))),l}function re(e,t){var l;let a="";if(e.name){if(!e.url){let t=N.value.files.length;a=window.URL.createObjectURL(e.raw),N.value.files[t-1]&&!N.value.files[t-1].url&&(N.value.files[t-1].url=a)}!function(){const e=Date.now();le.value[c.zu.TIMESTAMP]=e.toString(),le.value[c.zu.REQUESTID]=e.toString(),te.value&&(te.value.sign=(0,o.gw)(e,o.eW,te.value.tenantId),te.value.timeStamp=e)}(),null===(l=ne.value)||void 0===l||l.submit()}}function ue(e,t,l){N.value.files=l}function ce(e,t,l){V({type:"error",message:e.message})}function se(e,t,l){0!==e.code&&(V({type:"error",message:e.msg}),N.value.files.splice(N.value.files.length-1,1))}function de(e){N.value.account=e}function ve(e){N.value.contact=e}function fe(e){N.value.phone=e}function pe(e){N.value.email=e}function me(e){const t=J.value.filter((t=>t.username===e))[0];N.value.contact=t.contact||"",N.value.phone=t.phone||"",N.value.email=t.email||""}function he(e){N.value.contact=e}function ge(e){N.value.phone=e}function ye(e){N.value.email=e}function we(e){112===e.id?N.value.desc="测试单，请忽略":N.value.desc=""}function be(){var e;return A(this,void 0,void 0,(function*(){const l={username:N.value.account,contact:N.value.contact,phone:N.value.phone,email:N.value.email};b.saveReportUser(l),G.value||Ce(),ke(),null===(e=S.value)||void 0===e||e.validate(((e,l)=>{var o;if(!e){if((0,F.mL)())try{V({type:"error",message:null===(o=Object.values(l)[0][0])||void 0===o?void 0:o.message})}catch(e){}return(0,a.nextTick)((()=>{document.getElementsByClassName("is-error")[0].scrollIntoView({block:"center",behavior:"smooth"})})),!1}!function(){var e,l,a;A(this,void 0,void 0,(function*(){const{files:o,contact:n,account:i,email:r,phone:u,type:c,device:s,desc:d}=N.value;let v={appInfo:j.value,wheetInfo:{clientVersion:g.getAppVersionCode()+"",contactName:n,emails:r,fileInfo:[],isLogin:(null===(e=G.value)||void 0===e?void 0:e.userId)?1:0,mobilePhone:u,userAcount:i,wsheetDesc:d,wsheetIp:"",wsheetLevel:1,wsheetObj:(null===(l=G.value)||void 0===l?void 0:l.userId)?N.value.device:i,wsheetObjType:(null===(a=G.value)||void 0===a?void 0:a.userId)?2:0,wsheetSource:String(g.getDeviceType()),wsheetSubtypeId:Number(null==c?void 0:c.id),wsheetTitle:`${n} ${null==c?void 0:c.label}`,wsheetTypeId:1e3}};o.map((e=>{v.wheetInfo.fileInfo.push({attachId:e.response.data.attachIdStrings[0],createdTime:0})}));try{const e=yield b.submitReport(v);e.wsheetIdString&&(b.uploadLog(i,e.wsheetIdString),w.sendAgentMessage(I.je.NOTIFY_WORKSHEET,{wsheetSubtypeId:e.wsheetIdString,wsheetDesc:d}),b.saveReportUser({username:i,contact:n,email:r,phone:u}),b.saveReportContact(n),b.saveReportEmail(r),b.saveReportPhone(u),B("我们的技术人员正在处理您的故障，处理结果将第一时间通过电话反馈给您，请密切关注并确保电话畅通","提示",{confirmButtonText:"确定",callback:()=>{t("close")}})),E.value=!1}catch(e){E.value=!1,V({type:"error",message:e.message})}}))}()}))}))}function Ce(){return A(this,void 0,void 0,(function*(){const e=yield b.getAllReportUsers();J.value=[],e&&Object.keys(e).forEach((t=>{J.value.push(e[t])}))}))}function ke(){return A(this,void 0,void 0,(function*(){const e=yield b.getAllReportPhones();e&&(W.value=e);const t=yield b.getAllReportEmails();t&&(Y.value=t);const l=yield b.getAllReportContacts();l&&(X.value=l)}))}return(0,a.onMounted)((()=>A(this,void 0,void 0,(function*(){j.value=yield k.getAppInfo(),G.value=yield y.getAuthProfile(),G.value||Ce(),ke(),function(){A(this,void 0,void 0,(function*(){ee.value=`${g.getAPIHost()}/api/v2/client/uploadWsheetFile`,te.value=yield k.getAppInfo();const e={version:g.getAppVersionCode(),deviceCode:g.getDeviceCode(),deviceType:g.getDeviceType(),appModel:g.getAppModel()};let{deviceType:t,deviceCode:l,version:a,appModel:o}=e;le.value[c.zu.DEVICECODE]=l,le.value[c.zu.DEVICETYPE]=t.toString(),le.value[c.zu.REQUESTID]=Date.now().toString(),le.value[c.zu.TIMESTAMP]=Date.now().toString(),le.value[c.zu.VERSION]=a.toString(),le.value[c.zu.APPMODEL]=o.toString()}))}();let e=C.activeConnection;e&&(N.value.device=e.id);const t=sessionStorage.getItem("desktops");t&&(x.value=JSON.parse(t))})))),(e,t)=>{const o=(0,a.resolveComponent)("el-option"),n=(0,a.resolveComponent)("el-select"),c=(0,a.resolveComponent)("el-form-item"),d=(0,a.resolveComponent)("el-icon"),v=(0,a.resolveComponent)("el-input"),f=(0,a.resolveComponent)("el-button"),p=(0,a.resolveComponent)("el-upload"),m=(0,a.resolveComponent)("el-progress"),h=(0,a.resolveComponent)("el-divider"),g=(0,a.resolveComponent)("el-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",O,[M,(0,a.createVNode)(g,{model:N.value,"label-position":"left","label-width":"84px",ref_key:"formRef",ref:S,rules:D.value,class:"mobile-adapt-form","hide-required-asterisk":""},{default:(0,a.withCtx)((()=>[G.value?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,label:"选择云电脑",prop:"device"},{default:(0,a.withCtx)((()=>[(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(s.default,{key:0,data:x.value,title:"请选择故障的云电脑",modelValue:N.value.device,"onUpdate:modelValue":t[0]||(t[0]=e=>N.value.device=e),"label-props":"objName"},null,8,["data","modelValue"])):((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,modelValue:N.value.device,"onUpdate:modelValue":t[1]||(t[1]=e=>N.value.device=e),placeholder:"请选择故障的云电脑",style:{width:"100%"},disabled:(0,a.unref)(ae)},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(x.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e.id,label:e.objName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]))])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,label:"账号",prop:"account",required:""},{default:(0,a.withCtx)((()=>[J.value.length>0?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,modelValue:N.value.account,"onUpdate:modelValue":t[2]||(t[2]=e=>N.value.account=e),clearable:"",filterable:"",class:"userSelectDropdown",placeholder:"请选择或输入账号",style:{width:"100%"},"default-first-option":"","filter-method":de,onChange:me,disabled:E.value},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(J.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e.username,label:e.username,value:e.username},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",R,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.username),1),(0,a.createVNode)(d,{onClick:(0,a.withModifiers)((()=>function(e){return A(this,void 0,void 0,(function*(){yield b.removeReportUser(e.username),yield Ce()}))}(e)),["stop"]),class:"removeUser"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(i.Z))])),_:2},1032,["onClick"])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])):((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,modelValue:N.value.account,"onUpdate:modelValue":t[3]||(t[3]=e=>N.value.account=e),placeholder:"请输入账号"},null,8,["modelValue"]))])),_:1})),(0,a.createVNode)(c,{label:"故障类型",prop:"type",required:""},{default:(0,a.withCtx)((()=>[(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(s.default,{key:0,data:(0,a.unref)(oe),title:"请选择故障类型",modelValue:N.value.type,"onUpdate:modelValue":t[4]||(t[4]=e=>N.value.type=e),onChange:we,"object-value":""},null,8,["data","modelValue"])):((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,modelValue:N.value.type,"onUpdate:modelValue":t[5]||(t[5]=e=>N.value.type=e),placeholder:"请选择故障类型",style:{width:"100%"},onChange:we,clearable:"","value-key":"label",disabled:E.value},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(oe),(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e.id,label:e.label,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]))])),_:1}),(0,a.createVNode)(c,{label:"故障描述",prop:"desc",required:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v,{modelValue:N.value.desc,"onUpdate:modelValue":t[6]||(t[6]=e=>N.value.desc=e),type:"textarea",rows:"4",placeholder:"请输入描述","show-word-limit":"",maxlength:"300",disabled:E.value},null,8,["modelValue","disabled"])])),_:1}),(0,a.createVNode)(c,{label:"上传图片",class:"uploadContent"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{ref_key:"uploadRef",ref:ne,"auto-upload":!1,action:ee.value,headers:le.value,data:te.value,"on-change":re,"on-progress":ue,"on-error":ce,"on-success":se,"before-upload":ie,"show-file-list":(0,a.unref)(l),"list-type":(0,a.unref)(l)?"picture-card":"text",limit:3,accept:_.value,disabled:N.value.files.length>2,"file-list":N.value.files,name:"files"},(0,a.createSlots)({default:(0,a.withCtx)((()=>[(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(r.Z))])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.unref)(l)?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(f,{key:1,class:"upload-btn",type:"primary",plain:"",disabled:N.value.files.length>2||E.value},{default:(0,a.withCtx)((()=>[T,(0,a.createTextVNode)("上传图片 ")])),_:1},8,["disabled"]))])),_:2},[(0,a.unref)(l)?void 0:{name:"tip",fn:(0,a.withCtx)((()=>[U])),key:"0"}]),1032,["action","headers","data","show-file-list","list-type","accept","disabled","file-list"])])),_:1}),N.value.files.length>0&&!(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(c,{key:2},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",L,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(N.value.files,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"uploadImage",key:t},[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["mask",e.percentage<100&&"show"])},[e.percentage<100?((0,a.openBlock)(),(0,a.createElementBlock)("div",q,[(0,a.createVNode)(m,{percentage:e.percentage,color:"#f05050","show-text":!1,"stroke-width":8},null,8,["percentage"])])):(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,onClick:()=>function(e){N.value.files.splice(e,1)}(t)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(u.Z))])),_:2},1032,["onClick"])),[[a.vShow,!E.value]])],2),(0,a.withDirectives)((0,a.createElementVNode)("img",{src:e.url,alt:e.name},null,8,z),[[a.vShow,e.url]])])))),128))]),(0,a.createVNode)(h,{class:"mt-4 mb-0"})])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createElementBlock)("div",Z)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{label:"联系人",prop:"contact",required:""},{default:(0,a.withCtx)((()=>[X.value.length>0?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,modelValue:N.value.contact,"onUpdate:modelValue":t[7]||(t[7]=e=>N.value.contact=e),clearable:"",filterable:"",class:"userSelectDropdown",placeholder:"请输入或选择联系人姓名",style:{width:"100%"},"filter-method":ve,onChange:he,disabled:E.value},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(X.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e,label:e,value:e},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",$,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e),1),(0,a.createVNode)(d,{onClick:(0,a.withModifiers)((()=>function(e){return A(this,void 0,void 0,(function*(){yield b.removeReportContact(e),yield ke()}))}(e)),["stop"]),class:"removeContact"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(i.Z))])),_:2},1032,["onClick"])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])):((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,modelValue:N.value.contact,"onUpdate:modelValue":t[8]||(t[8]=e=>N.value.contact=e),placeholder:"请输入联系人姓名",clearable:""},null,8,["modelValue"]))])),_:1}),(0,a.createVNode)(c,{label:"电话",prop:"phone",required:""},{default:(0,a.withCtx)((()=>[W.value.length>0?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,modelValue:N.value.phone,"onUpdate:modelValue":t[9]||(t[9]=e=>N.value.phone=e),clearable:"",filterable:"",class:"userSelectDropdown",placeholder:"请输入或选择联系人电话",style:{width:"100%"},"filter-method":fe,onChange:ge,disabled:E.value},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(W.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e,label:e,value:e},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",K,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e),1),(0,a.createVNode)(d,{onClick:(0,a.withModifiers)((()=>function(e){return A(this,void 0,void 0,(function*(){yield b.removeReportPhone(e),yield ke()}))}(e)),["stop"]),class:"removePhone"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(i.Z))])),_:2},1032,["onClick"])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])):((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,modelValue:N.value.phone,"onUpdate:modelValue":t[10]||(t[10]=e=>N.value.phone=e),type:"tel",placeholder:"请输入联系人电话",clearable:"",disabled:E.value,maxlength:"11"},null,8,["modelValue","disabled"]))])),_:1}),(0,a.createVNode)(c,{label:"邮箱",prop:"email",required:""},{default:(0,a.withCtx)((()=>[Y.value.length>0?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,modelValue:N.value.email,"onUpdate:modelValue":t[11]||(t[11]=e=>N.value.email=e),clearable:"",filterable:"",class:"userSelectDropdown",placeholder:"请输入或选择联系人邮箱",style:{width:"100%"},"filter-method":pe,onChange:ye,disabled:E.value},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Y.value,(e=>((0,a.openBlock)(),(0,a.createBlock)(o,{key:e,label:e,value:e},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",H,[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e),1),(0,a.createVNode)(d,{onClick:(0,a.withModifiers)((()=>function(e){return A(this,void 0,void 0,(function*(){yield b.removeReportEmail(e),yield ke()}))}(e)),["stop"]),class:"removeEmail"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)((0,a.unref)(i.Z))])),_:2},1032,["onClick"])])])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])):((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,modelValue:N.value.email,"onUpdate:modelValue":t[12]||(t[12]=e=>N.value.email=e),type:"email",placeholder:"请输入邮箱",clearable:"",disabled:E.value},null,8,["modelValue","disabled"]))])),_:1}),(0,a.createVNode)(c,{style:{"margin-bottom":"0"},class:"form-item-submit"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{type:"primary",style:{width:"100%"},onClick:be,loading:E.value},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(E.value?"正在提交":"确认提交"),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"]),(0,a.createElementVNode)("div",Q,[(0,a.createVNode)(f,{class:"submit-btn",type:"primary",onClick:be,loading:E.value},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(E.value?"正在提交":"确认提交"),1)])),_:1},8,["loading"])])])}}});const J=(0,l(57775).Z)(G,[["__scopeId","data-v-aa86e8fe"]])}}]);