"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[3073],{65483:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ke});var n=o(89810),a=o(48402),l=o(6298),c=o(6522),r=o(19816);const i=e=>((0,n.pushScopeId)("data-v-dea8a21a"),e=e(),(0,n.popScopeId)(),e),s={class:"function-list"},d=[i((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-reporting-obstacles"})],-1))),i((()=>(0,n.createElementVNode)("span",null,"报障",-1)))],u=[i((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-helpmanual"})],-1))),i((()=>(0,n.createElementVNode)("span",null,"帮助手册",-1)))],v=[i((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-key"})],-1))),i((()=>(0,n.createElementVNode)("span",null,"忘记密码",-1)))],p=(0,n.defineComponent)({__name:"FunctionBar",setup(e){const t=(0,n.inject)("$dialog"),o=(a.nC.get(l.g),a.nC.get(c.Xb));function i(){let e=`https://desk.ctyun.cn/doc/help.html?${`appmodel=1&deviceType=${o.getDeviceType()}&clientVersion=${o.getAppVersionCode()}&orign=true&actionbar=original&region=public`}`;r.k.info("help book:",e),window.open(e)}function p(){t.open("report")}function m(){t.open("retrievePassword")}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("ul",s,[(0,n.createElementVNode)("li",{class:"function-item",onClick:p},d),(0,n.createElementVNode)("li",{class:"function-item",onClick:i},u),(0,n.createElementVNode)("li",{class:"function-item",onClick:m},v)]))}});var m=o(57775);const f=(0,m.Z)(p,[["__scopeId","data-v-dea8a21a"]]);var h=o(88538),g=o(73827),y=o(99227),w=o.n(y),k=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function c(e){try{i(n.next(e))}catch(e){l(e)}}function r(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}i((n=n.apply(e,t||[])).next())}))};const V=e=>((0,n.pushScopeId)("data-v-659353d3"),e=e(),(0,n.popScopeId)(),e),N={class:"container"},C={class:"qr-wrap"},E={class:"text-wrap"},x=[V((()=>(0,n.createElementVNode)("div",{class:"e-title"},"天翼账号扫码登录",-1))),V((()=>(0,n.createElementVNode)("div",{class:"e-title-dec"},"可使用微信扫码登录",-1)))],_={class:"text-wrap"},b=V((()=>(0,n.createElementVNode)("div",{class:"e-title"},"天翼云终端扫码登录",-1))),B={class:"e-title-dec"},A=V((()=>(0,n.createElementVNode)("div",null,"扫码下载天翼云电脑 APP",-1))),T=V((()=>(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("span",{class:"link"},"天翼云电脑APP")],-1))),I=V((()=>(0,n.createElementVNode)("span",null,"或",-1))),L={class:"logo-wrap"},S=["src"],P=V((()=>(0,n.createElementVNode)("div",null,"扫码下载翼连APP",-1))),q=V((()=>(0,n.createElementVNode)("div",null,[(0,n.createElementVNode)("span",{class:"link"},"翼连APP")],-1))),D={class:"cn-code"},z=["src"],M={class:"qr-expire"},Q=V((()=>(0,n.createElementVNode)("p",{class:"qr-expire__text"},"二维码已失效",-1))),$={key:0,class:"qr-fail"},K={class:"self-code"},U={class:"qr-expire"},j=V((()=>(0,n.createElementVNode)("p",{class:"qr-expire__text"},"二维码已失效",-1))),F={key:0,class:"qr-fail"},H={class:"qr-scaned"},Z=V((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-success"},null,-1))),R=V((()=>(0,n.createElementVNode)("p",null,"扫描成功",-1))),O=V((()=>(0,n.createElementVNode)("div",{class:"qr-tips"},"请按手机端提示操作",-1))),X={key:0,class:"qr-logining"},J=(0,n.defineComponent)({__name:"QrLogin",setup(e){const t=a.nC.get(c.Xb),i=(a.nC.get(h.cf),a.nC.get(l.g));let s="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";const d=(0,n.ref)(!0),u=(0,n.ref)(!0),v=(0,n.ref)(!1),p=(0,n.ref)(!1),m=(0,n.ref)(!1),f=(0,n.ref)(s),y=(0,n.ref)(""),V=(0,n.ref)(!1),J=(0,n.ref)(!1),G=(0,n.ref)(!1),W=(0,n.ref)(!1),Y=(0,n.ref)(!1);let ee=null,te=null,oe=0,ne="",ae="",le="";(0,n.ref)(t.getRegion);const ce=(0,n.ref)(""),re=(0,n.ref)(""),ie=(0,n.ref)(""),se=o(18626);let de="";function ue(e){return k(this,void 0,void 0,(function*(){he(),fe(),oe=0,p.value=!1,m.value=!1,v.value=!1,W.value=!1,Y.value=!1,G.value=!1,y.value="",f.value=s,1===e?(V.value=!0,J.value=!1):(V.value=!1,J.value=!0),function(){J.value&&ve();V.value&&function(){k(this,void 0,void 0,(function*(){try{const e=yield i.getQrCodeUuid();ae=e.uuid,le=e.encryuuid;const t={uuid:ae,size:130};f.value=yield i.getQrCodeImage(t),"false"==="false"?J.value=!1:(J.value=!0,ve()),function(){k(this,void 0,void 0,(function*(){fe();let e=()=>k(this,void 0,void 0,(function*(){try{const e={uuid:ae,encryuuid:le},t=yield i.getQrCodePollingRes(e);switch(t.result){case-11002:G.value=!0,J.value=!1,V.value=!1,oe=1;break;case-11001:fe(),Y.value=!0,1===oe&&(G.value=!1,J.value=!0,V.value=!0);break;case 0:fe(),he(),v.value=!0,G.value=!1,function(e){k(this,void 0,void 0,(function*(){try{yield i.loginByOauthToken(e)}catch(e){g.z8.error(e.message),ue(1)}}))}(t.data)}}catch(e){r.k.error("轮询21cn二维码状态出错：",e),m.value=!0,fe(),f.value=s,1===oe&&(G.value=!1,V.value=!0)}}));e(),te=setInterval(e,2e3)}))}()}catch(e){me()}finally{u.value=!1}}))}()}()}))}function ve(){return k(this,void 0,void 0,(function*(){try{d.value=!0,ie.value&&(ie.value.innerHTML=""),de=new(w())(ie.value,{text:y.value,width:133,height:133,colorDark:"#000000",colorLight:"#ffffff",correctLevel:w().CorrectLevel.H}),document.getElementsByClassName("self-qr")[0].childNodes[1].alt="";const e=yield i.genCodeId();ne=e.qrCodeId;let t="https://desk.ctyun.cn:8810";t=t.replace(/\/+$/,"");let o=t;o=`${"https://desk.ctyun.cn"}:443`;y.value=`${o}/selforder/#/login-confirm?qrCodeId=${ne}`,de.makeCode(y.value),r.k.info("自研二维码地址：",y.value),function(){k(this,void 0,void 0,(function*(){he();let e=()=>k(this,void 0,void 0,(function*(){try{const e=yield i.getQRCodeStatus(ne);switch(e.codeStatus){case"scaned":G.value=!0,J.value=!1,V.value=!1,oe=2;break;case"expire":he(),W.value=!0,2===oe&&(G.value=!1,J.value=!0,V.value=!1);break;case"authorize":he(),fe(),v.value=!0,G.value=!1,J.value=!1,V.value=!1,oe=2,function(e){k(this,void 0,void 0,(function*(){try{yield i.loginByToken(e)}catch(e){r.k.error(`[login]扫自研二维码登录失败：${e.message}`),g.z8.error(e.message),ue(2)}}))}(e.loginToken)}}catch(e){r.k.error("轮询自研二维码状态出错：",e),pe()}}));e(),ee=setInterval(e,2e3)}))}()}catch(e){r.k.error("自研二维码获取失败：",e),pe()}finally{d.value=!1}}))}function pe(){he(),p.value=!0,y.value="",document.getElementsByClassName("self-qr")[0].childNodes[1].src="",2===oe&&(G.value=!1,J.value=!0)}function me(){f.value=s,m.value=!0,u.value=!1,fe(),V.value=!1,J.value=!0,ve()}function fe(){te&&(clearInterval(te),te=null)}function he(){ee&&(clearInterval(ee),ee=null)}return(0,n.onUnmounted)((()=>{fe(),he()})),(0,n.onMounted)((()=>k(this,void 0,void 0,(function*(){new(w())(ce.value,{text:"https://desk.ctyun.cn/html/download/index.html",width:118,height:118,colorDark:"#000000",colorLight:"#ffffff",correctLevel:w().CorrectLevel.H}),new(w())(re.value,{text:"https://www.bgzs.site:1443/portal/#/download",width:118,height:118,colorDark:"#000000",colorLight:"#ffffff",correctLevel:w().CorrectLevel.H}),ue(2)})))),(e,t)=>{const o=(0,n.resolveComponent)("el-popover"),a=(0,n.resolveComponent)("el-button"),l=(0,n.resolveComponent)("Loading"),c=(0,n.resolveComponent)("el-icon"),r=(0,n.resolveDirective)("loading");return(0,n.openBlock)(),(0,n.createElementBlock)("div",N,[(0,n.createElementVNode)("div",C,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)([V.value&&J.value?"title-wrap":"justify-center"])},[(0,n.withDirectives)((0,n.createElementVNode)("div",E,x,512),[[n.vShow,V.value]]),(0,n.withDirectives)((0,n.createElementVNode)("div",_,[b,(0,n.createElementVNode)("div",B,[(0,n.createTextVNode)(" 请使用"),(0,n.createVNode)(o,{placement:"bottom",width:"118","popper-class":"app-popover",trigger:"hover","visible-arrow":!1},{reference:(0,n.withCtx)((()=>[T])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",{class:"e-qr",ref_key:"eQr",ref:ce},[(0,n.createElementVNode)("div",{class:"logo-wrap"},[(0,n.createElementVNode)("img",{class:"logo",src:"static/icon_32x32@2x.png"})])],512),A])),_:1}),I,(0,n.createVNode)(o,{placement:"bottom",width:"118","popper-class":"app-popover",trigger:"hover","visible-arrow":!1},{reference:(0,n.withCtx)((()=>[q])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",{class:"e-qr",ref_key:"bgzsQr",ref:re},[(0,n.createElementVNode)("div",L,[(0,n.createElementVNode)("img",{class:"logo",src:(0,n.unref)(se)},null,8,S)])],512),P])),_:1}),(0,n.createTextVNode)("扫码登录 ")])],512),[[n.vShow,J.value]])],2),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)([V.value&&J.value?"qr-outer":"justify-center"])},[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",D,[(0,n.createElementVNode)("img",{src:f.value,onError:me,class:"cnQrcode",style:(0,n.normalizeStyle)(Y.value?"opacity:0.2":"opacity:1"),ref:"cnQrcode",alt:""},null,44,z),(0,n.withDirectives)((0,n.createElementVNode)("div",M,[Q,(0,n.createVNode)(a,{onClick:t[0]||(t[0]=e=>ue(1)),type:"primary",size:"small"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("请点击刷新")])),_:1})],512),[[n.vShow,Y.value]]),m.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",$,[(0,n.createVNode)(a,{onClick:t[1]||(t[1]=e=>ue(1)),type:"text"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("加载失败，点击重试")])),_:1})])):(0,n.createCommentVNode)("",!0)])),[[r,u.value],[n.vShow,V.value]]),(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",K,[(0,n.createElementVNode)("div",{class:"self-qr",ref_key:"selfQr",ref:ie,style:(0,n.normalizeStyle)(W.value?"opacity:0.2":"opacity:1")},null,4),(0,n.withDirectives)((0,n.createElementVNode)("div",U,[j,(0,n.createVNode)(a,{onClick:t[2]||(t[2]=e=>ue(2)),type:"primary",size:"small"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("请点击刷新")])),_:1})],512),[[n.vShow,W.value]]),p.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",F,[(0,n.createVNode)(a,{onClick:t[3]||(t[3]=e=>ue(2)),type:"text"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("加载失败，点击重试")])),_:1})])):(0,n.createCommentVNode)("",!0)])),[[r,d.value],[n.vShow,J.value]])],2)]),(0,n.withDirectives)((0,n.createElementVNode)("div",H,[Z,R,O,(0,n.createVNode)(a,{type:"primary",plain:"",size:"small",onClick:t[4]||(t[4]=e=>ue(2))},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("返回扫码登录")])),_:1})],512),[[n.vShow,G.value]]),v.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",X,[(0,n.createVNode)(c,{class:"is-loading"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1}),(0,n.createTextVNode)(" 正在登录 ")])):(0,n.createCommentVNode)("",!0)])}}}),G=(0,m.Z)(J,[["__scopeId","data-v-659353d3"]]);var W=o(17999),Y=o(66527),ee=o(54478),te=o(86756),oe=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function c(e){try{i(n.next(e))}catch(e){l(e)}}function r(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}i((n=n.apply(e,t||[])).next())}))};const ne=e=>((0,n.pushScopeId)("data-v-b74723c4"),e=e(),(0,n.popScopeId)(),e),ae={class:"form"},le={class:"form-item right-body__input"},ce=ne((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-account-number"},null,-1))),re=["onKeydown","disabled"],ie={class:"form-item right-body__input"},se=ne((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-password"},null,-1))),de=["type","onKeydown","disabled"],ue={key:0,class:"line-input__capsLock"},ve=ne((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-capsLock"},null,-1))),pe={key:0,class:"form-item right-body__input form-item-zero-bottom"},me=ne((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-verification-ode"},null,-1))),fe=["disabled","onKeydown"],he=["src"],ge={class:"form-item right-body__submit"},ye={key:0,class:"iconfont icon-verification-ode"},we=(0,n.defineComponent)({__name:"FormLogin",props:{disabledLogin:{type:Boolean,default:!1}},setup(e){const t=e,o=a.nC.get(l.g),r=(a.nC.get(c.Xb),(0,W.tv)(),(0,W.yj)(),(0,n.inject)("$dialog")),i=(0,n.inject)("$capslock"),s=(0,n.reactive)({username:"",password:"",captchaCode:""}),d=(0,n.ref)(!1),u=(0,n.ref)(!1),v=(0,n.ref)(!1),p=(0,n.ref)(!1),m=(0,n.ref)(!1),f=(0,n.ref)(""),h=((0,n.ref)(!1),(0,n.ref)(""),(0,n.ref)(null));var y=(0,n.ref)(!1);function w(){d.value=!d.value}function k(){return oe(this,void 0,void 0,(function*(){if(!u.value&&!(s.username.trim()?s.password?/\s/.test(s.password)&&(g.z8.error("密码不支持空格"),1):(g.z8.error("请输入密码"),1):(g.z8.error("请输入账号"),1))){u.value=!0;try{let e={username:s.username.split("#admin")[0].trim(),password:s.password,sha256Password:"",remember:!1,originalPassword:s.password};"**********"===s.password||(e.password=(0,ee.JQ)(s.password).toString(),e.sha256Password=(0,ee.JQ)(s.password).toString()),v.value&&(e.captchaCode=s.captchaCode.trim());yield o.login(e)}catch(e){g.z8.error(e.message),[Y.or.NEED_CAPTCHA,Y.or.INVALID_CAPTCHA,Y.or.EXPIRE_CAPTCHA].includes(e.code)&&(v.value=!0),s.captchaCode="",yield V()}finally{u.value=!1}}}))}function V(){return oe(this,void 0,void 0,(function*(){m.value=!0;try{const e={width:85,height:36,userInfo:s.username};p.value&&(e.preUrl=f.value),f.value=yield o.getCaptchaUrl(e)}catch(e){g.z8.error(e.message)}finally{m.value=!1,p.value=!1}}))}function N(){p.value=!0,V()}function C(){r.open("retrievePassword")}return(0,n.onMounted)((()=>{!function(){let e=o.onForceModifyPassword.on((()=>{te.T.confirm("您的登录密码已过期，请重新修改密码！","提示",{confirmButtonText:"重置密码",type:"warning"}).then((()=>{r.open("modifyPassword",{options:{isForceModify:!0},onClose:()=>{s.password="",s.captchaCode=""}})}))})),t=o.onPasswordLowQuality.on((()=>{(0,te.T)({title:"提示",message:"您当前使用的密码存在较高的安全风险，我们强烈建议您尽快进行修改，感谢您对天翼云的支持和理解",confirmButtonText:"重置密码",cancelButtonText:"关闭",customClass:"pwd-qua-check",type:"warning",showCancelButton:!0,showClose:!1,closeOnClickModal:!1,beforeClose:(e,t,o)=>{"confirm"===e&&r.open("modifyPassword",{options:{isForceModify:!0},onClose:()=>{s.password="",s.captchaCode=""}}),o()}})}));(0,n.onUnmounted)((()=>{e.dispose(),t.dispose()}))}(),(0,n.nextTick)((()=>{i.watch(h.value,(e=>{y.value=e})),(0,n.onUnmounted)((()=>{i.unwatch(h.value)}))}))})),(e,o)=>{const a=(0,n.resolveComponent)("el-tooltip"),l=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",ae,[(0,n.createElementVNode)("div",le,[ce,(0,n.withDirectives)((0,n.createElementVNode)("input",{class:"account",type:"text",placeholder:"请输入账号",onKeydown:(0,n.withKeys)(k,["enter"]),"onUpdate:modelValue":o[0]||(o[0]=e=>s.username=e),disabled:t.disabledLogin},null,40,re),[[n.vModelText,s.username]])]),(0,n.createElementVNode)("div",ie,[se,(0,n.withDirectives)((0,n.createElementVNode)("input",{ref_key:"passwordInput",ref:h,class:"password",type:d.value?"text":"password",placeholder:"请输入密码","onUpdate:modelValue":o[1]||(o[1]=e=>s.password=e),onKeydown:(0,n.withKeys)(k,["enter"]),disabled:t.disabledLogin},null,40,de),[[n.vModelDynamic,s.password]]),(0,n.unref)(y)?((0,n.openBlock)(),(0,n.createElementBlock)("span",ue,[(0,n.createVNode)(a,{content:"大写已开启"},{default:(0,n.withCtx)((()=>[ve])),_:1})])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("i",{onClick:w,class:(0,n.normalizeClass)(["iconfont icon-password-type",[d.value?"icon-password-visible":"icon-password-not-visible"]])},null,2)]),v.value?((0,n.openBlock)(),(0,n.createElementBlock)("div",pe,[me,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text",disabled:u.value||t.disabledLogin,"onUpdate:modelValue":o[2]||(o[2]=e=>s.captchaCode=e),placeholder:"请输入验证码",onKeydown:(0,n.withKeys)(k,["enter"]),class:"code"},null,40,fe),[[n.vModelText,s.captchaCode]]),(0,n.createElementVNode)("img",{src:f.value,onClick:V,onError:N,class:"code-img",alt:""},null,40,he),p.value?((0,n.openBlock)(),(0,n.createElementBlock)("span",{key:0,onClick:V,class:"captcha-tips"},"重新加载")):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"mobile-forget-password",onClick:C},"忘记密码"),(0,n.createElementVNode)("div",ge,[(0,n.createVNode)(l,{disabled:t.disabledLogin,loading:u.value,onClick:k,type:"primary",class:"btn-submit"},{default:(0,n.withCtx)((()=>[u.value?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("i",ye)),(0,n.createTextVNode)(" 安全登录")])),_:1},8,["disabled","loading"])])])}}}),ke=(0,m.Z)(we,[["__scopeId","data-v-b74723c4"]]);var Ve=o(58894),Ne=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function c(e){try{i(n.next(e))}catch(e){l(e)}}function r(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,r)}i((n=n.apply(e,t||[])).next())}))};const Ce=e=>((0,n.pushScopeId)("data-v-490a85f9"),e=e(),(0,n.popScopeId)(),e),Ee={class:"token-container"},xe={key:0,class:"token-container-loading"},_e={class:"token-container-loading-icon"},be=Ce((()=>(0,n.createElementVNode)("p",{class:"token-container-loading-text"},"正在登录",-1))),Be={key:1,class:"token-container-error"},Ae={class:"token-container-error-icon"},Te=Ce((()=>(0,n.createElementVNode)("p",{class:"token-container-error-text"},"登录失败",-1))),Ie=(0,n.defineComponent)({__name:"TokenLogin",emits:["tokenLoginFail"],setup(e,{emit:t}){const o=a.nC.get(l.g),c=(0,W.yj)();var r=(0,n.ref)(!1),i=(0,n.ref)(!1);return(0,n.onMounted)((()=>{!function(){Ne(this,void 0,void 0,(function*(){const e=c.query.authToken?c.query.authToken:"";if(e)try{r.value=!0,yield o.loginByToken(e)}catch(e){r.value=!1,i.value=!0,setTimeout((()=>{i.value=!1,t("tokenLoginFail")}),3e3)}finally{r.value=!1}}))}()})),(e,t)=>{const o=(0,n.resolveComponent)("Loading"),a=(0,n.resolveComponent)("el-icon"),l=(0,n.resolveComponent)("Warning");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Ee,[(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)("div",xe,[(0,n.createElementVNode)("p",_e,[(0,n.createVNode)(a,{class:"is-loading"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o)])),_:1})]),be])):(0,n.createCommentVNode)("",!0),(0,n.unref)(i)?((0,n.openBlock)(),(0,n.createElementBlock)("div",Be,[(0,n.createElementVNode)("p",Ae,[(0,n.createVNode)(a,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1})]),Te])):(0,n.createCommentVNode)("",!0)])}}}),Le=(0,m.Z)(Ie,[["__scopeId","data-v-490a85f9"]]),Se=(0,n.createStaticVNode)('<div class="left banner" data-v-67ed5227><h1 class="title" data-v-67ed5227><span class="icon" data-v-67ed5227></span><span class="welcome" data-v-67ed5227>欢迎使用</span><span class="product-name" data-v-67ed5227>天翼云电脑</span></h1><div class="version" data-v-67ed5227>天翼云提供安全加密服务</div></div>',1),Pe={class:"qr-code"},qe={class:"right"},De=(ze=()=>(0,n.createElementVNode)("div",{class:"login-title"},"账号登录",-1),(0,n.pushScopeId)("data-v-67ed5227"),ze=ze(),(0,n.popScopeId)(),ze);var ze;const Me={class:"right-body"},Qe={class:"term"},$e=(0,n.defineComponent)({__name:"index",setup(e){const t=a.nC.get(l.g),o=(0,n.inject)("$dialog"),c=(0,W.yj)(),r=(0,W.tv)(),i=(0,n.ref)(null),s=(0,n.ref)(null),d=(0,n.ref)(null);var u=(0,n.ref)(!1);const v=(0,n.ref)(!1);(0,n.ref)(!1);function p(){u.value=!1,r.replace({name:"login",query:{}})}function m(e){window.open("https://desk.ctyun.cn"+{userAgreement:"/html/agreement/",privacy:"/html/privacy/",helpBook:"/doc/help.html"}[e])}return(0,n.onMounted)((()=>{!function(){let e=t.logoutMsg;if(null!==e){const{message:o,title:n,type:a}=e;te.T.alert(o,n,{type:a||"warning"}),t.clearLogoutMsg()}}(),function(){let e=t.onSmsValidate.on((e=>{v.value=!0,o.open("phoneValidate",{options:{loginData:e},onClose:e=>{v.value=!1,e?t.validateAuthState(!0):t.logout()}})})),a=t.onInvalidDevice.on((()=>{o.open("deviceBind",{onClose:e=>{e?t.validateAuthState(!0):t.logout()}})}));(0,n.onUnmounted)((()=>{a.dispose(),e.dispose()}))}(),c.query.authToken&&(u.value=!0)})),(e,t)=>{const o=(0,n.resolveComponent)("el-divider"),a=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"login-page",ref_key:"loginPageDom",ref:i},[(0,n.createVNode)(Ve.Z),(0,n.createElementVNode)("main",{class:"body",ref_key:"mainDom",ref:s},[Se,(0,n.createElementVNode)("div",Pe,[(0,n.createVNode)(G)]),(0,n.createVNode)(o,{direction:"vertical"}),(0,n.createElementVNode)("div",qe,[(0,n.unref)(u)?((0,n.openBlock)(),(0,n.createBlock)(Le,{key:1,onTokenLoginFail:p})):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[De,(0,n.createElementVNode)("div",Me,[(0,n.createVNode)(ke,{"disabled-login":v.value},null,8,["disabled-login"])])],64))]),(0,n.createElementVNode)("div",Qe,[(0,n.createVNode)(a,{onClick:t[0]||(t[0]=e=>m("userAgreement")),type:"text"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("用户协议")])),_:1}),(0,n.createVNode)(o,{class:"term-divider",direction:"vertical"}),(0,n.createVNode)(a,{onClick:t[1]||(t[1]=e=>m("privacy")),type:"text"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("隐私政策")])),_:1})])],512),(0,n.createElementVNode)("footer",{class:"footer",ref_key:"footerDom",ref:d},[(0,n.createVNode)(f)],512)],512)}}}),Ke=(0,m.Z)($e,[["__scopeId","data-v-67ed5227"]])},18626:(e,t,o)=>{e.exports=o.p+"imgs/bgzs.184594.png"}}]);