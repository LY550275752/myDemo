"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[3272],{93272:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(89810),s=n(1725),a=n(48402);const c={key:0,class:"item-content-box"},i={class:"item-content-box-time"};var l;const m=[(l=()=>(0,o.createElementVNode)("i",{class:"iconfont icon-guanbi5"},null,-1),(0,o.pushScopeId)("data-v-45a21327"),l=l(),(0,o.popScopeId)(),l)],r={key:1,class:"item-content-title"},d={class:"item-content-title-content single-line"},g={key:0,class:"item-content-title-count"},p={key:2,class:"item-content-sub single-line"},u={key:0,class:"item-btns"},k=(0,o.defineComponent)({__name:"messageItem",props:{message:{type:Object,default:()=>{},require:!0},isExpand:{type:Boolean,require:!0,default:()=>!1},index:{type:Number,require:!0,default:()=>0}},setup(e){const t=a.nC.get(s.pX);var n=(0,o.reactive)([]),l=(0,o.reactive)([]);function k(e){if(e.actionList&&e.actionList.length>0){return e.actionList.filter((e=>e.activeType===s.g0.BUTTON))}return[]}function f(e){if(e.agentMsgId)t.handleAgentMessageAction(e);else{const o=function(e){const t={location:0,activeType:s.g0.CARD,command:s.tM["OPEN-DESKTOP-DIALOG"]};if(e.actionList&&e.actionList.length>0){const n=e.actionList.filter((e=>e.activeType===s.g0.CARD));return n.length>0?n[0]:t}return t}(e);if(o.command===s.tM["SEND-ACTION-TO-AGENT"]){if(n.includes(e.msgId))return;n.push(e.msgId),t.handleMessageAction(o,e,(()=>{n=n.filter((t=>t!==e.msgId))}))}else t.handleMessageAction(o,e)}}return(a,C)=>{const N=(0,o.resolveComponent)("Loading"),v=(0,o.resolveComponent)("el-icon"),B=(0,o.resolveComponent)("el-button");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(["item",{"item-noborder":0===e.index}])},[(0,o.createElementVNode)("div",{class:"item-content",onClick:C[1]||(C[1]=t=>f(e.message))},[e.isExpand?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createElementVNode)("span",i,(0,o.toDisplayString)((h=e.message.validTime,t.formatTime(h))),1),(0,o.createElementVNode)("span",{class:"item-content-box-delete",onClick:C[0]||(C[0]=(0,o.withModifiers)((n=>{return o=e.message,void t.handleMessageDelete(o);var o}),["stop"]))},m)])):(0,o.createCommentVNode)("",!0),e.message.title?((0,o.openBlock)(),(0,o.createElementBlock)("p",r,[(0,o.createElementVNode)("span",d,(0,o.toDisplayString)(e.message.title),1),e.message.agentMsgId&&e.message.agentCount>1?((0,o.openBlock)(),(0,o.createElementBlock)("span",g," ("+(0,o.toDisplayString)(e.message.agentCount>9?"9+":e.message.agentCount)+") ",1)):(0,o.createCommentVNode)("",!0),(0,o.unref)(n).includes(e.message.msgId)?((0,o.openBlock)(),(0,o.createBlock)(v,{key:1,class:"is-loading item-content-title-icon"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N)])),_:1})):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0),e.message.content?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,(0,o.toDisplayString)(e.message.content),1)):(0,o.createCommentVNode)("",!0)]),k(e.message).length>0?((0,o.openBlock)(),(0,o.createElementBlock)("div",u,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(k(e.message),((n,a)=>((0,o.openBlock)(),(0,o.createBlock)(B,{size:"small",type:"text",key:a,onClick:(0,o.withModifiers)((o=>function(e,n,o){if(n.command===s.tM["SEND-ACTION-TO-AGENT"]){if(l.includes(`${e.msgId}-${o}`))return;l.push(`${e.msgId}-${o}`),t.handleMessageAction(n,e,(()=>{l=l.filter((t=>t!==`${e.msgId}-${o}`))}))}else t.handleMessageAction(n,e)}(e.message,n,a)),["stop"])},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(n.buttonName)+" ",1),(0,o.unref)(l).includes(`${e.message.msgId}-${a}`)?((0,o.openBlock)(),(0,o.createBlock)(v,{key:0,class:"is-loading"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N)])),_:1})):(0,o.createCommentVNode)("",!0)])),_:2},1032,["onClick"])))),128))])):(0,o.createCommentVNode)("",!0)],2);var h}}});const f=(0,n(57775).Z)(k,[["__scopeId","data-v-45a21327"]])}}]);