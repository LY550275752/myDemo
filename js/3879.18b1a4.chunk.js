"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[3879,216],{13879:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(89810);const c=e=>((0,n.pushScopeId)("data-v-3fb80f4c"),e=e(),(0,n.popScopeId)(),e),s={class:"spec-content"},r=c((()=>(0,n.createElementVNode)("p",{class:"spec-content-intro"},"请输入专线/VPN地址",-1))),l={key:0,class:"spec-content-error"},a=c((()=>(0,n.createElementVNode)("p",{class:"spec-content-exam"},"例如: https://test.desktop.cn:8810 或 https://10.1.1.1:8810",-1))),i={class:"spec-footer"};var d=o(50216);const p=(0,n.defineComponent)({name:"SpecLine",components:{SpecList:d.default},setup(){const e=(0,n.ref)(!1),t=(0,n.ref)(""),o=(0,n.ref)(!1),c=(0,n.ref)(!1),s=(0,n.ref)(""),r=(0,n.ref)({host:""});return{isDropdownActive:e,onDropdownChange:()=>{e.value=!e.value},errMsg:t,isEmpty:o,isLoading:c,rawHost:s,form:r,onClosePopover:()=>{e.value=!1},onInputchange:()=>{},onSave:()=>{},onSelect:()=>{}}}});const u=(0,o(57775).Z)(p,[["render",function(e,t,o,c,d,p){const u=(0,n.resolveComponent)("arrow-down"),m=(0,n.resolveComponent)("el-icon"),h=(0,n.resolveComponent)("arrow-up"),v=(0,n.resolveComponent)("el-input"),f=(0,n.resolveComponent)("spec-list"),k=(0,n.resolveComponent)("el-popover"),C=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"spec",onClick:t[3]||(t[3]=(...t)=>e.onClosePopover&&e.onClosePopover(...t))},[(0,n.createElementVNode)("div",s,[r,(0,n.createVNode)(k,{width:310,visible:e.isDropdownActive,"onUpdate:visible":t[2]||(t[2]=t=>e.isDropdownActive=t),effect:"light",trigger:"click"},{reference:(0,n.withCtx)((()=>[(0,n.createVNode)(v,{class:"spec-content-input",ref:"specInput",modelValue:e.form.host,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.host=t),onInput:e.onInputchange,clearable:""},{suffix:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",{class:"spec-content-input-icon",onClick:t[0]||(t[0]=(0,n.withModifiers)(((...t)=>e.onDropdownChange&&e.onDropdownChange(...t)),["stop"]))},[e.isDropdownActive?((0,n.openBlock)(),(0,n.createBlock)(m,{key:1},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(h)])),_:1})):((0,n.openBlock)(),(0,n.createBlock)(m,{key:0},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(u)])),_:1}))])])),_:1},8,["modelValue","onInput"])])),default:(0,n.withCtx)((()=>[(0,n.createVNode)(f,{onOnSelect:e.onSelect,host:e.rawHost},null,8,["onOnSelect","host"])])),_:1},8,["visible"]),e.error?((0,n.openBlock)(),(0,n.createElementBlock)("p",l,(0,n.toDisplayString)(e.errMsg),1)):(0,n.createCommentVNode)("",!0),a]),(0,n.createElementVNode)("div",i,[(0,n.createVNode)(C,{class:"spec-footer-btn",type:"primary",onClick:e.onSave,loading:e.isLoading,disabled:e.isEmpty},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("启用")])),_:1},8,["onClick","loading","disabled"])])])}],["__scopeId","data-v-3fb80f4c"]])},50216:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var n=o(89810);const c={class:"box"},s=["onClick"],r={class:"box-item-host"},l={key:0,class:"box-item-host-check"},a={class:"box-item-host-content"},i=["onClick"],d={key:1,class:"box-empty"};var p=function(e,t,o,n){return new(o||(o=Promise))((function(c,s){function r(e){try{a(n.next(e))}catch(e){s(e)}}function l(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}a((n=n.apply(e,t||[])).next())}))};const u=(0,n.defineComponent)({name:"SpecList",setup(){const e=(0,n.ref)(""),t=(0,n.ref)([{host:"https://clientconn.bgzs.site:1443",updateTime:1644890205716},{host:"https://clientconn.bgzs.site:1444",updateTime:1644890205717},{host:"https://clientconn.bgzs.site:1445",updateTime:1644890205718},{host:"https://clientconn.bgzs.site:1446",updateTime:1644890205719}]),o=(0,n.computed)((()=>{var o;if(0===(null===(o=e.value)||void 0===o?void 0:o.length))return!1;let n=t.value.findIndex((t=>{var o;return t.host===(null===(o=e.value)||void 0===o?void 0:o.trim())}));return n>-1})),c=()=>{t.value=t.value.filter((e=>e.host&&e.host.length>0)),t.value=t.value.sort(((e,t)=>t.updateTime-e.updateTime))},s=e=>{var t=new URL(e);const{protocol:o,hostname:n,port:c}=t;var s=n.replace(/[^\/[.:]+/g,(function(e){const{length:t}=e;return e.charAt(0)+"*".repeat(t-1)})),r=c.replace(/\d+/g,(function(e){const{length:t}=e;return"*".repeat(t)}));return e.endsWith("/")?`${o}://${s}:${r}/`:`${o}://${s}:${r}`},r=e=>{var t=e.lastIndexOf(".");return e.replace(/[^\/.:]\d+/g,(function(e,o){const{length:n}=e;return t+1===o?e:3===n?e.charAt(0)+"*".repeat(n-1):2===n||n>3?"*".repeat(n):"*"}))};return(0,n.onMounted)((()=>{c()})),{host:e,list:t,isSHowCheck:o,initList:c,onSelect:t=>{e.value=t.host},onRemove:e=>p(this,void 0,void 0,(function*(){c()})),maskAddress:e=>function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)}(new URL(e).hostname)?r(e):s(e)}}});const m=(0,o(57775).Z)(u,[["render",function(e,t,o,p,u,m){const h=(0,n.resolveComponent)("check"),v=(0,n.resolveComponent)("el-icon"),f=(0,n.resolveComponent)("circle-close");return(0,n.openBlock)(),(0,n.createElementBlock)("div",c,[e.list.length>0?((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,{key:0},(0,n.renderList)(e.list,(t=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"box-item",key:t._id,onClick:o=>e.onSelect(t)},[(0,n.createElementVNode)("div",r,[e.isSHowCheck?((0,n.openBlock)(),(0,n.createElementBlock)("span",l,[t.host===e.host.trim()?((0,n.openBlock)(),(0,n.createBlock)(v,{key:0},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(h)])),_:1})):(0,n.createCommentVNode)("",!0)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("span",a,(0,n.toDisplayString)(e.maskAddress(t.host)),1)]),(0,n.createElementVNode)("span",{class:"box-item-icon",onClick:(0,n.withModifiers)((o=>e.onRemove(t)),["stop"])},[(0,n.createVNode)(v,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(f)])),_:1})],8,i)],8,s)))),128)):((0,n.openBlock)(),(0,n.createElementBlock)("div",d,"暂无专线历史"))])}],["__scopeId","data-v-ec365ab4"]])}}]);