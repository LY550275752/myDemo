"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[4145,9424,2751,2308,6405],{55359:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(89810),l=n(6298),a=n(48402),c=n(55826),i=n(91258),r=n(87559),d=n(83624),u=n(46980),s=n(68475),f=n(81658),m=function(e,t,n,o){return new(n||(n=Promise))((function(l,a){function c(e){try{r(o.next(e))}catch(e){a(e)}}function i(e){try{r(o.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}r((o=o.apply(e,t||[])).next())}))};const v={class:"account"},p={key:0},k={key:1,class:"el-icon-loading"},g={key:1,class:"el-icon-loading"},h=(y=()=>(0,o.createElementVNode)("p",{class:"account-divide-title"},"安全登录设置",-1),(0,o.pushScopeId)("data-v-d960f87e"),y=y(),(0,o.popScopeId)(),y);var y;const V=(0,o.defineComponent)({__name:"account",setup(e){const t=a.nC.get(l.g),n=(0,o.inject)("$dialogHelper");var y=(0,o.shallowRef)(null),V=(0,o.ref)(null),C=(0,o.ref)(null),N=(0,o.ref)(!1);const x={ModifyPassword:i.default,DeviceManage:r.default,DeviceDetail:d.default,AccountValidate:u.default,SeniorSetting:f.default};function b(e="",t){V.value=t,y.value=x[e],null===y.value||void 0===y.value?(n.config({title:"账户与安全",onBack:!1}),N.value=!1):N.value=!0}function w(e,n){null!==C.value&&(e&&(C.value.mobilephone=e.toString(),C.value.loginAccount=e.toString(),t.updateAuthProfile({mobilephone:e.toString(),loginAccount:e.toString()})),n&&(C.value.email=n,t.updateAuthProfile({email:n})))}return(0,o.onMounted)((()=>m(this,void 0,void 0,(function*(){yield function(){return m(this,void 0,void 0,(function*(){try{C.value=yield t.getAuthProfile()}catch(e){}}))}(),n.config({title:"账户与安全"})})))),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createVNode)(s.Z,null,{default:(0,o.withCtx)((()=>[(0,o.unref)(N)?((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)((0,o.unref)(y)),{key:0,onEnter:b,onToOriginIndex:w,params:(0,o.unref)(V)},null,40,["params"])):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(s.Z,null,{default:(0,o.withCtx)((()=>[(0,o.unref)(N)?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.unref)(C)&&(0,o.unref)(C).mobilephone?((0,o.openBlock)(),(0,o.createBlock)(c.Z,{key:0,label:"手机号","click-event":()=>b("AccountValidate",{back:"index",afterValidateBySelf:!0,updateType:"phone",preTitle:"修改手机号"})},{default:(0,o.withCtx)((()=>[(0,o.unref)(C)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(C).mobilephone),1)],64)):((0,o.openBlock)(),(0,o.createElementBlock)("i",k))])),_:1},8,["click-event"])):(0,o.createCommentVNode)("",!0),(0,o.unref)(C)&&(0,o.unref)(C).email?((0,o.openBlock)(),(0,o.createBlock)(c.Z,{key:1,label:"邮箱","click-event":()=>b("AccountValidate",{back:"index",afterValidateBySelf:!0,updateType:"email",preTitle:"修改邮箱"})},{default:(0,o.withCtx)((()=>[(0,o.unref)(C)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)((0,o.toDisplayString)((0,o.unref)(C).email),1)],64)):((0,o.openBlock)(),(0,o.createElementBlock)("i",g))])),_:1},8,["click-event"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(c.Z,{label:"修改密码","click-event":()=>b("ModifyPassword"),isLastItem:""},null,8,["click-event"]),h,(0,o.createVNode)(c.Z,{label:"设备管理","click-event":()=>b("DeviceManage")},null,8,["click-event"]),(0,o.createVNode)(c.Z,{label:"更多设置","click-event":()=>b("SeniorSetting"),isLastItem:""},null,8,["click-event"])]))])),_:1})]))}});const C=(0,n(57775).Z)(V,[["__scopeId","data-v-d960f87e"]])},83624:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var o=n(89810),l=n(72900),a=n(35247),c=n(86756),i=n(73827),r=n(48402),d=n(29997),u=n(6298),s=n(17999),f=n(5341),m=function(e,t,n,o){return new(n||(n=Promise))((function(l,a){function c(e){try{r(o.next(e))}catch(e){a(e)}}function i(e){try{r(o.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,i)}r((o=o.apply(e,t||[])).next())}))};const v={class:"device"},p={class:"device-content panel"},k={class:"device-content-form"},g={class:"device-content-form-edit"},h={class:"device-content-btn"},y=(0,o.defineComponent)({__name:"deviceDetail",props:{params:{type:Object,default:null}},emits:["enter"],setup(e,{emit:t}){const n=e,y=(0,o.inject)("$dialog"),V=r.nC.get(a.bL),C=r.nC.get(u.g),N=(0,s.tv)();var x=(0,o.ref)(null),b=(0,o.reactive)((0,l.d9)(n.params)),w=(0,o.ref)(!1),B=(0,o.ref)(!1),_=(0,o.ref)(!1);const S=(0,o.ref)((0,f.mL)()?110:125);function E(){return m(this,void 0,void 0,(function*(){const e=n.params.isCurr?"确定移除当前浏览器？":"确定移除该设备？",o=n.params.isCurr?"将当前浏览器访问踢下线并退出登录":"将设备踢下线并抹除设备上已记住的密码";c.T.confirm(o,e,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>m(this,void 0,void 0,(function*(){_.value=!0;try{yield V.deviceUnbind({deviceCode:n.params.deviceCode}),n.params.isCurr?(C.logout({removeAccount:!0}),d.k.info("移除当前设备成功"),y.closeAll(),N.push({name:"login"})):t("enter","DeviceManage"),i.z8.success("移除设备成功")}catch(e){i.z8.error(e.message)}finally{_.value=!1}})))).catch((()=>{}))}))}function T(){w.value=!0,(0,o.nextTick)((()=>{x.value&&x.value.focus()}))}function D(){w.value=!1,b.deviceName=n.params.deviceName}function M(){return m(this,void 0,void 0,(function*(){if(""===b.deviceName)i.z8.warning("设备名称不能为空！");else if(b.deviceName.length>16)i.z8.warning("设备名称不能超过16个字！");else{const e={deviceCode:b.deviceCode,deviceName:b.deviceName};B.value=!0;try{yield V.deviceEdit(e),i.z8.success("修改设备名称成功"),t("enter","DeviceManage")}catch(e){i.z8.error(e.message)}finally{w.value=!1,B.value=!1}}}))}return(0,o.onMounted)((()=>{var e=y.getCurrentDialogId();(0,o.nextTick)((()=>{y.config(e,{title:"设备详情",onBack:()=>{t("enter","DeviceManage")}})}))})),(e,t)=>{const n=(0,o.resolveComponent)("el-input"),c=(0,o.resolveComponent)("el-button"),i=(0,o.resolveComponent)("el-form-item"),r=(0,o.resolveComponent)("el-divider"),d=(0,o.resolveComponent)("el-form");return(0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",k,[(0,o.createVNode)(d,{size:"large",onSubmit:t[1]||(t[1]=(0,o.withModifiers)((()=>{}),["prevent"])),model:(0,o.unref)(b),"label-width":S.value},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{class:"device-content-form-item device-content-form-name",label:"设备名称："},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{ref_key:"deviceNameInput",ref:x,maxlength:"16",modelValue:(0,o.unref)(b).deviceName,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(b).deviceName=e),modelModifiers:{trim:!0},disabled:!(0,o.unref)(w),autofocus:"",class:(0,o.normalizeClass)({"is-focus":(0,o.unref)(w)})},null,8,["modelValue","disabled","class"]),(0,o.createElementVNode)("div",g,[(0,o.unref)(w)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createVNode)(c,{loading:(0,o.unref)(B),onClick:M,type:"text",size:"small"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("确定")])),_:1},8,["loading"]),(0,o.createVNode)(c,{onClick:D,type:"text",size:"small"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("取消")])),_:1})],64)):((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,onClick:T,type:"text"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("编辑")])),_:1}))])])),_:1}),(0,o.createVNode)(i,{class:"device-content-form-item",label:"设备类型："},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)((0,o.unref)(a.Yi)[(0,o.unref)(b).deviceType]),1)])),_:1}),(0,o.createVNode)(i,{class:"device-content-form-item item-border-bottom-none",label:"设备系统："},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)((0,o.unref)(b).sysVersion),1)])),_:1}),(0,o.createVNode)(r,{class:"device-content-form-divider"}),(0,o.createVNode)(i,{class:"device-content-form-item form-item-divider",label:"应用版本："},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)((0,o.unref)(b).appVersion),1)])),_:1}),(0,o.createVNode)(i,{class:"device-content-form-item",label:"最近登录："},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)((0,o.unref)(l.p6)((0,o.unref)(b).lastUseTime,"MM月dd日 hh:mm:ss")),1)])),_:1}),(0,o.createVNode)(i,{class:"device-content-form-item item-border-bottom-none",label:"最近登录产品："},{default:(0,o.withCtx)((()=>{return[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)((e=(0,o.unref)(b).lastAppModel,a.Du[e]||"--")),1)];var e})),_:1})])),_:1},8,["model","label-width"])]),(0,o.createElementVNode)("div",h,[(0,o.createVNode)(c,{size:"large",type:"danger",plain:"",loading:(0,o.unref)(_),onClick:E},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("移除设备 ")])),_:1},8,["loading"])])])])}}});const V=(0,n(57775).Z)(y,[["__scopeId","data-v-59f89d09"]])},68475:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(89810);const l={},a=(0,n(57775).Z)(l,[["render",function(e,t){return(0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:"fade"},{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-44304889"]])}}]);