"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[5625,9624],{5625:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var o=n(89810),a=n(1725),l=n(48402),i=n(19816),c=n(59624),s=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function i(e){try{s(o.next(e))}catch(e){l(e)}}function c(e){try{s(o.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))};const r={class:"setting"},d={key:0,class:"setting-source"},u=(m=()=>(0,o.createElementVNode)("div",{class:"setting-source-title"},"消息来源",-1),(0,o.pushScopeId)("data-v-4bbfab1a"),m=m(),(0,o.popScopeId)(),m);var m;const p=["onClick"],g=["src"],f={class:"setting-source-item-left-title"},v={class:"setting-source-item-left-title-top"},k={class:"setting-source-item-left-title-bottom"},h={class:"setting-source-item-right"},V=(0,o.defineComponent)({__name:"messageSetting",setup(e){const t=l.nC.get(a.pX),n=(0,o.inject)("$dialogHelper"),{appId:m}=(0,o.inject)("$options");var V=(0,o.ref)(!0),B=(0,o.ref)(!1),C=(0,o.ref)(null),N=(0,o.ref)([]),w=!0;function E(e){return s(this,void 0,void 0,(function*(){if(N.value=yield t.getAllApp(),i.k.info("[message-center]应用设置列表",N.value),m&&e){var n=N.value.find((e=>e.appId===m));n&&y(n)}}))}function y(e){n.config({title:"消息设置",width:640,height:440,onBack:S}),C.value=e,B.value=!0}function S(){B.value=!1,C.value=null,n.config({title:"消息设置",width:640,height:440,onBack:void 0})}return(0,o.onMounted)((()=>{(0,o.nextTick)((()=>s(this,void 0,void 0,(function*(){n.config({title:"消息设置",width:640,height:440,onBack:void 0}),w=!1})))),E(!0),function(){s(this,void 0,void 0,(function*(){const e=yield t.getNotificationMode();null!==e&&(V.value=e.isQuiteMode)}))}(),t.onMessageCenterSettingUpdate.on((()=>{E(!1)}))})),(e,n)=>{const a=(0,o.resolveComponent)("el-switch");return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.unref)(B)?((0,o.openBlock)(),(0,o.createBlock)(c.default,{key:1,app:(0,o.toRaw)((0,o.unref)(C))},null,8,["app"])):((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[u,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(N),((e,n)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"setting-source-item",key:n},[(0,o.createElementVNode)("div",{class:"setting-source-item-left",onClick:t=>y(e)},[(0,o.createElementVNode)("img",{class:"setting-source-item-left-icon",src:e.iconUrl},null,8,g),(0,o.createElementVNode)("span",f,[(0,o.createElementVNode)("span",v,(0,o.toDisplayString)(e.appName),1),(0,o.createElementVNode)("span",k,[e.setting.isShowInMessageCenter?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)("开")],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)("关")],64)),e.setting.isShowInMessageCenter&&(e.setting.isSilence||e.setting.isBeep)?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[(0,o.createTextVNode)("、")],64)):(0,o.createCommentVNode)("",!0),e.setting.isShowInMessageCenter&&e.setting.isSilence?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:3},[(0,o.createTextVNode)(" 静默通知 "),e.setting.isShowInMessageCenter&&e.setting.isBeep?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)("、")],64)):(0,o.createCommentVNode)("",!0)],64)):(0,o.createCommentVNode)("",!0),e.setting.isShowInMessageCenter&&e.setting.isBeep?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:4},[(0,o.createTextVNode)("消息提示音")],64)):(0,o.createCommentVNode)("",!0)])])],8,p),(0,o.createElementVNode)("div",h,[(0,o.createVNode)(a,{onChange:n=>{return a=e,void(w||(i.k.info("[message-center]:某个应用的消息设置",a),t.updateApp((0,o.toRaw)(a))));var a},modelValue:e.setting.isShowInMessageCenter,"onUpdate:modelValue":t=>e.setting.isShowInMessageCenter=t,"active-color":"#3C78F0"},null,8,["onChange","modelValue","onUpdate:modelValue"])])])))),128))]))])}}});const B=(0,n(57775).Z)(V,[["__scopeId","data-v-4bbfab1a"]])},59624:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o=n(89810),a=n(1725),l=n(48402),i=n(19816),c=function(e,t,n,o){return new(n||(n=Promise))((function(a,l){function i(e){try{s(o.next(e))}catch(e){l(e)}}function c(e){try{s(o.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((o=o.apply(e,t||[])).next())}))};const s=e=>((0,o.pushScopeId)("data-v-44b9a9d4"),e=e(),(0,o.popScopeId)(),e),r={key:0,class:"detail"},d={class:"detail-header"},u=["src"],m={class:"detail-header-name"},p={class:"detail-item"},g=s((()=>(0,o.createElementVNode)("span",{class:"detail-item-label"},"在“消息中心”显示",-1))),f={class:"detail-item"},v=s((()=>(0,o.createElementVNode)("span",{class:"detail-item-label"},"静默通知",-1))),k=s((()=>(0,o.createElementVNode)("div",{class:"detail-description"},"开启静默通知，则不展示新消息卡片",-1))),h={key:0,class:"detail-item"},V=s((()=>(0,o.createElementVNode)("span",{class:"detail-item-label"},"消息提示音",-1))),B=(0,o.defineComponent)({__name:"settingItem",props:{app:{type:Object,default:()=>{},require:!0}},setup(e){const t=e,n=l.nC.get(a.pX);var s=(0,o.ref)(null),B=!0;function C(){s.value&&(s.value.setting.isSilence?s.value.setting.isBeep=!1:s.value.setting.isBeep=!0,N())}function N(){B||(i.k.info("[message-center]:应用消息设置",s.value),s.value&&n.updateApp((0,o.toRaw)(s.value)))}return(0,o.onMounted)((()=>{s.value=t.app;var e=n.onMessageCenterSettingUpdate.on((()=>{!function(){c(this,void 0,void 0,(function*(){if(s.value){const e=yield n.getAppById(s.value.appId);e&&(s.value.setting=e.setting)}}))}()}));(0,o.onUnmounted)((()=>{e.dispose()})),setTimeout((()=>{B=!1}),400)})),(e,t)=>{const n=(0,o.resolveComponent)("el-switch");return(0,o.unref)(s)?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("img",{class:"detail-header-icon",src:(0,o.unref)(s).iconUrl},null,8,u),(0,o.createElementVNode)("span",m,(0,o.toDisplayString)((0,o.unref)(s).appName),1)]),(0,o.createElementVNode)("div",p,[g,(0,o.createVNode)(n,{onChange:N,class:"detail-item-switch",modelValue:(0,o.unref)(s).setting.isShowInMessageCenter,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(s).setting.isShowInMessageCenter=e),"active-color":"#3C78F0"},null,8,["modelValue"])]),(0,o.unref)(s).setting.isShowInMessageCenter?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)("div",f,[v,(0,o.createVNode)(n,{onChange:C,class:"detail-item-switch",modelValue:(0,o.unref)(s).setting.isSilence,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.unref)(s).setting.isSilence=e),"active-color":"#3C78F0"},null,8,["modelValue"])]),k,!1===(0,o.unref)(s).setting.isSilence?((0,o.openBlock)(),(0,o.createElementBlock)("div",h,[V,(0,o.createVNode)(n,{onChange:N,class:"detail-item-switch",modelValue:(0,o.unref)(s).setting.isBeep,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.unref)(s).setting.isBeep=e),"active-color":"#3C78F0"},null,8,["modelValue"])])):(0,o.createCommentVNode)("",!0)],64)):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)}}});const C=(0,n(57775).Z)(B,[["__scopeId","data-v-44b9a9d4"]])}}]);