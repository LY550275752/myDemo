"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[6310,2831],{46310:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(89810),o=n(1725),s=n(48402),l=n(93272),i=n(2831);const c=e=>((0,a.pushScopeId)("data-v-9cd57d96"),e=e(),(0,a.popScopeId)(),e),r={class:"app-header"},p={class:"app-header-left"},d=["src"],m={class:"app-header-left-name"},g={class:"app-header-right"},u={key:0,class:"app-header-right-time"},h={key:1,class:"app-header-right-box"},k=c((()=>(0,a.createElementVNode)("span",{class:"app-header-right-box-icon"},[(0,a.createElementVNode)("i",{class:"iconfont icon-sort-selection1"})],-1))),f=["onClick"],v=[c((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-guanbi5"},null,-1)))],B={key:0,class:"app-content"},E={key:1,class:"app-empty"},y=["onClick"],C={key:0,class:"el-icon-caret-bottom"},N={key:1,class:"el-icon-caret-top"},x=(0,a.defineComponent)({__name:"appMessage",props:{param:{type:Object,default:()=>{},require:!0},isExpand:{type:Boolean,require:!0,default:()=>!1}},emits:["onExpandChange"],setup(e,{emit:t}){const n=e,c=s.nC.get(o.pX),x=(0,a.inject)("$dialog");var b=(0,a.ref)(!1),w=(0,a.ref)(!1),V=(0,a.computed)((()=>!n.isExpand&&(!b.value&&!w.value))),I=(0,a.computed)((()=>{var e=[];return n.param.app.customButtonList.forEach((t=>{if(2===t.location){var n={name:"app-action",label:t.buttonName?t.buttonName:"更多",param:t};e.push(n)}})),e.push({name:"no-alert",label:"不再提醒"},{name:"message-setting",label:"消息设置"}),e}));function M(){t("onExpandChange",n.param.app.appId)}function S(){c.handleAppMessageDelete(n.param.app.appId)}function T(e){switch(e.command){case"no-disturb":break;case"no-alert":var t=(0,a.toRaw)(n.param.app);t.setting.isSilence=!0,t.setting.isBeep=!1,c.updateApp(t);break;case"message-setting":x.open("messageSetting",{options:{appId:n.param.app.appId}});break;case"app-action":c.handleAppAction((0,a.toRaw)(e.param),(0,a.toRaw)(n.param.app))}}function _(){b.value=!0}function A(){b.value=!1}function L(e){w.value=e}return(t,n)=>{const o=(0,a.resolveComponent)("el-dropdown-item"),s=(0,a.resolveComponent)("el-dropdown-menu"),x=(0,a.resolveComponent)("el-dropdown");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"app",onMouseenter:_,onMouseleave:A},[(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("img",{src:e.param.app.iconUrl,class:"app-header-left-icon",alt:""},null,8,d),(0,a.createElementVNode)("span",m,(0,a.toDisplayString)(e.param.app.appName),1)]),(0,a.createElementVNode)("div",g,[(0,a.unref)(V)?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,(0,a.toDisplayString)((b=e.param.validTime,c.formatTime(b))),1)):((0,a.openBlock)(),(0,a.createElementBlock)("div",h,[(0,a.createVNode)(x,{onCommand:T,onVisibleChange:L},{dropdown:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(I),((e,t)=>{return(0,a.openBlock)(),(0,a.createBlock)(o,{command:(n=e.name,s=e.param,{command:n,param:s}),key:t},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["app-header-right-box-dropdown",{"dropdown-item-divider":(0,a.unref)(I).length>2&&t===(0,a.unref)(I).length-2}])},(0,a.toDisplayString)(e.label),3)])),_:2},1032,["command"]);var n,s})),128))])),_:1})])),default:(0,a.withCtx)((()=>[k])),_:1}),(0,a.createElementVNode)("span",{class:"app-header-right-box-icon app-header-right-box-enlarge",onClick:(0,a.withModifiers)(S,["stop"])},v,8,f)]))])]),e.param.messageList.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",B,[(0,a.createVNode)(i.default,null,{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.param.messageList,((t,n)=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(l.default,{key:t.msgId||t.agentMsgId,index:n,message:t,"is-expand":e.isExpand},null,8,["index","message","is-expand"])),[[a.vShow,e.isExpand||0===n]]))),128))])),_:1})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",E,"该应用暂无消息")),e.param.messageList.length>1?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:2,class:"app-footer",onClick:(0,a.withModifiers)(M,["stop"])},[(0,a.createTextVNode)((0,a.toDisplayString)(e.isExpand?"收起":`还有${e.param.messageList.length-1}条消息`)+" ",1),e.isExpand?((0,a.openBlock)(),(0,a.createElementBlock)("i",N)):((0,a.openBlock)(),(0,a.createElementBlock)("i",C))],8,y)):(0,a.createCommentVNode)("",!0)],32);var b}}});const b=(0,n(57775).Z)(x,[["__scopeId","data-v-9cd57d96"]])},93272:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(89810),o=n(1725),s=n(48402);const l={key:0,class:"item-content-box"},i={class:"item-content-box-time"};var c;const r=[(c=()=>(0,a.createElementVNode)("i",{class:"iconfont icon-guanbi5"},null,-1),(0,a.pushScopeId)("data-v-45a21327"),c=c(),(0,a.popScopeId)(),c)],p={key:1,class:"item-content-title"},d={class:"item-content-title-content single-line"},m={key:0,class:"item-content-title-count"},g={key:2,class:"item-content-sub single-line"},u={key:0,class:"item-btns"},h=(0,a.defineComponent)({__name:"messageItem",props:{message:{type:Object,default:()=>{},require:!0},isExpand:{type:Boolean,require:!0,default:()=>!1},index:{type:Number,require:!0,default:()=>0}},setup(e){const t=s.nC.get(o.pX);var n=(0,a.reactive)([]),c=(0,a.reactive)([]);function h(e){if(e.actionList&&e.actionList.length>0){return e.actionList.filter((e=>e.activeType===o.g0.BUTTON))}return[]}function k(e){if(e.agentMsgId)t.handleAgentMessageAction(e);else{const a=function(e){const t={location:0,activeType:o.g0.CARD,command:o.tM["OPEN-DESKTOP-DIALOG"]};if(e.actionList&&e.actionList.length>0){const n=e.actionList.filter((e=>e.activeType===o.g0.CARD));return n.length>0?n[0]:t}return t}(e);if(a.command===o.tM["SEND-ACTION-TO-AGENT"]){if(n.includes(e.msgId))return;n.push(e.msgId),t.handleMessageAction(a,e,(()=>{n=n.filter((t=>t!==e.msgId))}))}else t.handleMessageAction(a,e)}}return(s,f)=>{const v=(0,a.resolveComponent)("Loading"),B=(0,a.resolveComponent)("el-icon"),E=(0,a.resolveComponent)("el-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(["item",{"item-noborder":0===e.index}])},[(0,a.createElementVNode)("div",{class:"item-content",onClick:f[1]||(f[1]=t=>k(e.message))},[e.isExpand?((0,a.openBlock)(),(0,a.createElementBlock)("div",l,[(0,a.createElementVNode)("span",i,(0,a.toDisplayString)((y=e.message.validTime,t.formatTime(y))),1),(0,a.createElementVNode)("span",{class:"item-content-box-delete",onClick:f[0]||(f[0]=(0,a.withModifiers)((n=>{return a=e.message,void t.handleMessageDelete(a);var a}),["stop"]))},r)])):(0,a.createCommentVNode)("",!0),e.message.title?((0,a.openBlock)(),(0,a.createElementBlock)("p",p,[(0,a.createElementVNode)("span",d,(0,a.toDisplayString)(e.message.title),1),e.message.agentMsgId&&e.message.agentCount>1?((0,a.openBlock)(),(0,a.createElementBlock)("span",m," ("+(0,a.toDisplayString)(e.message.agentCount>9?"9+":e.message.agentCount)+") ",1)):(0,a.createCommentVNode)("",!0),(0,a.unref)(n).includes(e.message.msgId)?((0,a.openBlock)(),(0,a.createBlock)(B,{key:1,class:"is-loading item-content-title-icon"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v)])),_:1})):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0),e.message.content?((0,a.openBlock)(),(0,a.createElementBlock)("div",g,(0,a.toDisplayString)(e.message.content),1)):(0,a.createCommentVNode)("",!0)]),h(e.message).length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h(e.message),((n,s)=>((0,a.openBlock)(),(0,a.createBlock)(E,{size:"small",type:"text",key:s,onClick:(0,a.withModifiers)((a=>function(e,n,a){if(n.command===o.tM["SEND-ACTION-TO-AGENT"]){if(c.includes(`${e.msgId}-${a}`))return;c.push(`${e.msgId}-${a}`),t.handleMessageAction(n,e,(()=>{c=c.filter((t=>t!==`${e.msgId}-${a}`))}))}else t.handleMessageAction(n,e)}(e.message,n,s)),["stop"])},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.buttonName)+" ",1),(0,a.unref)(c).includes(`${e.message.msgId}-${s}`)?((0,a.openBlock)(),(0,a.createBlock)(B,{key:0,class:"is-loading"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v)])),_:1})):(0,a.createCommentVNode)("",!0)])),_:2},1032,["onClick"])))),128))])):(0,a.createCommentVNode)("",!0)],2);var y}}});const k=(0,n(57775).Z)(h,[["__scopeId","data-v-45a21327"]])},2831:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(89810);const o=(0,a.defineComponent)({__name:"messageTransition",setup(e){const t=".3s height ease-in-out";function n(e){e.style.transition=t,e.dataset||(e.dataset={}),e.style.height=0}function o(e){0!==e.scrollHeight?e.style.height=`${e.scrollHeight+19}px`:e.style.height="",e.style.overflow="hidden"}function s(e){e.style.transition="",e.style.height=""}function l(e){e.dataset||(e.dataset={}),e.style.display="block",e.style.height=e.scrollHeight-19+"px",e.style.overflow="hidden"}function i(e){0!==e.scrollHeight&&(e.style.transition=t,e.style.height=0)}function c(e){e.style.transition="",e.style.height=""}return(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(a.TransitionGroup,{onBeforeEnter:n,onEnter:o,onAfterEnter:s,onBeforeLeave:l,onLeave:i,onAfterLeave:c},{default:(0,a.withCtx)((()=>[(0,a.renderSlot)(e.$slots,"default")])),_:3}))}})}}]);