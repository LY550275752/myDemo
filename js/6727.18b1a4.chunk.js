(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[6727],{52704:(e,t,o)=>{"use strict";o.d(t,{L:()=>y});var n=o(28125),a=o(41638),l=o(52429),i=o(89810),r=o(50729),s=o(24577),c=o(24638),u=o(75566),d=o(64338),f=o(33745);var p=(0,r.do)("sticky"),v=(0,l.Z)(p,2),h=v[0],m=v[1],g={zIndex:s.Or,position:(0,s.SQ)("top"),container:Object,offsetTop:(0,s.SI)(0),offsetBottom:(0,s.SI)(0)},w=(0,i.defineComponent)({name:h,props:g,emits:["scroll","change"],setup:function(e,t){var o=t.emit,n=t.slots,l=(0,i.ref)(),r=(0,f.eo)(l),s=(0,i.reactive)({fixed:!1,width:0,height:0,transform:0}),p=(0,i.computed)((function(){return(0,c.LU)("top"===e.position?e.offsetTop:e.offsetBottom)})),v=(0,i.computed)((function(){var e=s.fixed,t=s.height,o=s.width;if(e)return{width:"".concat(o,"px"),height:"".concat(t,"px")}})),h=(0,i.computed)((function(){if(s.fixed){var t=(0,u.l7)((0,c.As)(e.zIndex),(0,a.Z)({width:"".concat(s.width,"px"),height:"".concat(s.height,"px")},e.position,"".concat(p.value,"px")));return s.transform&&(t.transform="translate3d(0, ".concat(s.transform,"px, 0)")),t}})),g=function(){if(l.value&&!(0,d.xj)(l)){var t=e.container,n=e.position,a=(0,f.EL)(l),i=(0,d.cx)(window);if(s.width=a.width,s.height=a.height,"top"===n)if(t){var r=(0,f.EL)(t),c=r.bottom-p.value-s.height;s.fixed=p.value>a.top&&r.bottom>0,s.transform=c<0?c:0}else s.fixed=p.value>a.top;else{var u=document.documentElement.clientHeight;if(t){var v=(0,f.EL)(t),h=u-v.top-p.value-s.height;s.fixed=u-p.value<a.bottom&&u>v.top,s.transform=h<0?-h:0}else s.fixed=u-p.value<a.bottom}!function(e){o("scroll",{scrollTop:e,isFixed:s.fixed})}(i)}};return(0,i.watch)((function(){return s.fixed}),(function(e){return o("change",e)})),(0,f.OR)("scroll",g,{target:r,passive:!0}),function(e,t){if(u._f&&window.IntersectionObserver){var o=new IntersectionObserver((function(e){t(e[0].intersectionRatio>0)}),{root:document.body}),n=function(){e.value&&o.unobserve(e.value)};(0,i.onDeactivated)(n),(0,i.onBeforeUnmount)(n),(0,f.Ib)((function(){e.value&&o.observe(e.value)}))}}(l,g),function(){var e;return(0,i.createVNode)("div",{ref:l,style:v.value},[(0,i.createVNode)("div",{class:m({fixed:s.fixed}),style:h.value},[null==(e=n.default)?void 0:e.call(n)])])}}}),y=(0,n.n)(w)},64566:(e,t,o)=>{"use strict";o.d(t,{F:()=>E});var n=o(89810),a=o(75566),l=o(43500),i=o(28125),r=o(40712),s=o(41638),c=o(52429),u=o(50729),d=o(24577),f=0;var p=o(48331),v=o(47383),h=o(16934),m=(0,u.do)("toast"),g=(0,c.Z)(m,2),w=g[0],y=g[1],x=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],b={icon:String,show:Boolean,type:(0,d.SQ)("text"),overlay:Boolean,message:d.Or,iconSize:d.Or,duration:(0,d.qM)(2e3),position:(0,d.SQ)("middle"),teleport:[String,Object],className:d.Vg,iconPrefix:String,transition:(0,d.SQ)("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:d.Vg,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},C=(0,n.defineComponent)({name:w,props:b,emits:["update:show"],setup:function(e,t){var o,i=t.emit,r=!1,c=function(){var t=e.show&&e.forbidClick;r!==t&&((r=t)?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(--f||document.body.classList.remove("van-toast--unclickable")))},u=function(e){return i("update:show",e)},d=function(){e.closeOnClick&&u(!1)},m=function(){return clearTimeout(o)},g=function(){var t=e.type,o=e.message;if((0,l.Xq)(o)&&""!==o)return"html"===t?(0,n.createVNode)("div",{key:0,class:y("text"),innerHTML:String(o)},null):(0,n.createVNode)("div",{class:y("text")},[o])};return(0,n.watch)((function(){return[e.show,e.forbidClick]}),c),(0,n.watch)((function(){return[e.show,e.type,e.message,e.duration]}),(function(){m(),e.show&&e.duration>0&&(o=setTimeout((function(){u(!1)}),e.duration))})),(0,n.onMounted)(c),(0,n.onUnmounted)(c),function(){return(0,n.createVNode)(v.G,(0,n.mergeProps)({class:[y([e.position,(0,s.Z)({},e.type,!e.icon)]),e.className],lockScroll:!1,onClick:d,onClosed:m,"onUpdate:show":u},(0,a.ei)(e,x)),{default:function(){return[(t=e.icon,o=e.type,a=e.iconSize,l=e.iconPrefix,i=e.loadingType,t||"success"===o||"fail"===o?(0,n.createVNode)(p.J,{name:t||o,size:a,class:y("icon"),classPrefix:l},null):"loading"===o?(0,n.createVNode)(h.g,{class:y("loading"),size:a,type:i},null):void 0),g()];var t,o,a,l,i}})}}}),V={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},k=[],N=!1,S=(0,a.l7)({},V),O=new Map;function _(e){return(0,l.Kn)(e)?e:{message:e}}function B(){if(!k.length||N){var e=function(){var e=(0,r.H)({setup:function(){var e=(0,n.ref)(""),a=(0,r.o)(),l=a.open,i=a.state,s=a.close,c=a.toggle,u=function(){N&&(k=k.filter((function(e){return e!==t})),o())};return(0,n.watch)(e,(function(e){i.message=e})),(0,n.getCurrentInstance)().render=function(){var e={onClosed:u,"onUpdate:show":c};return(0,n.createVNode)(C,(0,n.mergeProps)(i,e),null)},{open:l,clear:s,message:e}}}),t=e.instance,o=e.unmount;return t}();k.push(e)}return k[k.length-1]}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a._f)return{};var t=B(),o=_(e);return t.open((0,a.l7)({},S,O.get(o.type||S.type),o)),t}var P=function(e){return function(t){return E((0,a.l7)({type:e},_(t)))}};E.loading=P("loading"),E.success=P("success"),E.fail=P("fail"),E.clear=function(e){var t;k.length&&(e?(k.forEach((function(e){e.clear()})),k=[]):N?null==(t=k.shift())||t.clear():k[0].clear())},E.setDefaultOptions=function(e,t){"string"==typeof e?O.set(e,t):(0,a.l7)(S,e)},E.resetDefaultOptions=function(e){"string"==typeof e?O.delete(e):(S=(0,a.l7)({},V),O.clear())},E.allowMultiple=function(){N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},E.install=function(e){e.use((0,i.n)(C)),e.config.globalProperties.$toast=E}},75883:(e,t,o)=>{"use strict";o.r(t)},98205:(e,t,o)=>{"use strict";o.r(t)},3147:(e,t,o)=>{o(89170),o(75883)},15807:(e,t,o)=>{o(89170),o(73864),o(85223),o(59772),o(98506),o(67426),o(98205)},90771:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>w});var n=o(89810),a=o(60685),l=o(17999),i=o(48402),r=o(6298),s=o(64566),c=o(61273),u=(o(15807),o(94684),o(54478)),d=o(9021),f=o(65431),p=o(72900),v=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function i(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}s((n=n.apply(e,t||[])).next())}))};const h={class:"editPasswordContainer fill-height d-flex flex-column"},m=(0,n.createElementVNode)("div",{class:"tips grey--text text--light-1 fs-2 pa-"},"8～26位，需同时包含英文字母、数字和特殊字符",-1),g={class:"pa-4 border-box mt-auto fill-width"},w=(0,n.defineComponent)({__name:"EditPassword",setup(e){const t=i.nC.get(r.g),o=(0,d.C)(),{authData:w}=(0,f.Jk)(o),y=(0,l.tv)(),x=(0,n.ref)(!1),b=(0,n.ref)(""),C=(0,n.ref)(""),V=(0,n.ref)("");function k(){y.push({name:"phone_account"})}function N(){return v(this,void 0,void 0,(function*(){const e=(0,p.Dy)(V.value);if(!w.value||!w.value.userAccount)return s.F.fail("无效账号"),void y.push({name:"phone_hone",query:{module:"me"}});e.flag?C.value===V.value?c.V.confirm({message:"您正在修改的账号密码包括：天翼云手机、天翼云电脑、天翼云桌面（通用版），是否确认修改"}).then((()=>v(this,void 0,void 0,(function*(){x.value=!0,s.F.loading("正在修改");const e={userAccount:w.value?w.value.userAccount:"",password:b.value,newPassword:V.value,newEncPwd1:(0,u.FB)(V.value),newEncPwd2:(0,u.JQ)(V.value)};try{yield t.resetPassword(e),s.F.clear(),x.value=!1,c.V.alert({message:"修改密码成功，请重新登录",confirmButtonText:"重新登录"}).then((()=>{o.resetAuth(),y.replace({name:"phone_login",query:{module:"me"}})}))}catch(e){x.value=!1,s.F.fail(e.message)}})))).catch((()=>{})):(0,s.F)("两次输入的密码不一致"):(0,s.F)(e.message)}))}return(0,n.onMounted)((()=>{b.value="",C.value="",V.value=""})),(e,t)=>{const o=(0,n.resolveComponent)("el-input"),l=(0,n.resolveComponent)("el-form-item"),i=(0,n.resolveComponent)("el-form"),r=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",h,[(0,n.createVNode)(a.Z,{title:"修改密码",onBack:k}),(0,n.createVNode)(i,{size:"large","label-width":"70px",class:"white pa-4 mt-4"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l,{label:"原密码"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),type:"password",placeholder:"请输入原登录密码","show-password":"",disabled:x.value},null,8,["modelValue","disabled"])])),_:1}),(0,n.createVNode)(l,{label:"新密码"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"password",placeholder:"请输入新的登录密码","show-password":"",disabled:x.value},null,8,["modelValue","disabled"])])),_:1}),(0,n.createVNode)(l,{label:"确认密码"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=e=>V.value=e),type:"password",placeholder:"请再次确认新密码","show-password":"",disabled:x.value},null,8,["modelValue","disabled"]),m])),_:1})])),_:1}),(0,n.createElementVNode)("div",g,[(0,n.createVNode)(r,{block:"",size:"large",class:"submit",type:"primary",loading:x.value,disabled:!b.value||!C.value||!V.value,onClick:N,style:{height:"48px"}},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("确认")])),_:1},8,["loading","disabled"])])])}}})},60685:(e,t,o)=>{"use strict";o.d(t,{Z:()=>f});var n=o(89810),a=o(5415),l=o(17999),i=o(52704);o(3147);const r={class:"d-flex justify-space-between align-center white pa-4"},s={class:"fs-18 grey--text text--darken-4"},c=(u=()=>(0,n.createElementVNode)("div",null,null,-1),(0,n.pushScopeId)("data-v-86040814"),u=u(),(0,n.popScopeId)(),u);var u;const d=(0,n.defineComponent)({__name:"header",props:{title:{default:"",type:String}},setup(e){const t=(0,l.tv)(),o=(0,n.useAttrs)();function u(){o.onBack?o.onBack():window.history.state?window.history.go(-1):t.replace({name:"phone_home",query:{module:"phone"}})}return(t,o)=>{const l=(0,n.resolveComponent)("el-icon");return(0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(i.L),{class:"fill-width"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("header",r,[(0,n.createVNode)(l,{class:"pointer iconBack",onClick:u},{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(a.Z))])),_:1}),(0,n.createElementVNode)("div",s,(0,n.toDisplayString)(e.title),1),c])])),_:1})}}});const f=(0,o(57775).Z)(d,[["__scopeId","data-v-86040814"]])}}]);