"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[6840],{68539:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Xe});var n=o(89810),c=o(6298),a=o(48402),i=o(86756),r=o(6522),l=o(19816),s=function(e,t,o,n){return new(o||(o=Promise))((function(c,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}l((n=n.apply(e,t||[])).next())}))};const d=e=>((0,n.pushScopeId)("data-v-645f97ea"),e=e(),(0,n.popScopeId)(),e),u=[d((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-reporting-obstacles"})],-1))),d((()=>(0,n.createElementVNode)("span",null,"报障",-1)))],p=[d((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-helpmanual"})],-1))),d((()=>(0,n.createElementVNode)("span",null,"帮助手册",-1)))],m=d((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-set-up-out"})],-1))),f=[d((()=>(0,n.createElementVNode)("span",{class:"icon"},[(0,n.createElementVNode)("i",{class:"iconfont icon-sign-out"})],-1))),d((()=>(0,n.createElementVNode)("span",null,"退出登录",-1)))],k=(0,n.defineComponent)({__name:"FunctionBar",props:{footerBottom:{type:String,default:"0%"}},setup(e){const t=a.nC.get(c.g),o=a.nC.get(r.Xb),d=(0,n.inject)("$dialog");(0,n.inject)("$notification");(0,n.ref)(!1);(0,n.ref)(!1);function k(){let e=`https://desk.ctyun.cn/doc/help.html?${`appmodel=1&deviceType=${o.getDeviceType()}&clientVersion=${o.getAppVersionCode()}&orign=true&actionbar=original&region=public`}`;l.k.info("help book:",e),window.open(e)}const v=()=>{d.open("report",{options:{initTab:"history"}})},h=()=>{d.open("account")},E=()=>s(this,void 0,void 0,(function*(){i.T.confirm("确认退出登录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>s(this,void 0,void 0,(function*(){yield t.logout()})))).catch((()=>{}))}));return(t,o)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"box",style:(0,n.normalizeStyle)({bottom:e.footerBottom})},[(0,n.createElementVNode)("ul",{class:"function-list"},[(0,n.createElementVNode)("li",{class:"function-item",onClick:v},u),(0,n.createElementVNode)("li",{class:"function-item",onClick:k},p),(0,n.createElementVNode)("li",{onClick:h,class:"function-item"},[m,(0,n.createTextVNode)(" 账户与安全 ")]),(0,n.createElementVNode)("li",{class:"function-item",onClick:E},f)])],4))}});var v=o(57775);const h=(0,v.Z)(k,[["__scopeId","data-v-645f97ea"]]);var E=o(58894);const N=o.p+"imgs/desktop-list-computer-landscape.d1042a.png";var g=o(55304),V=o(73827),y=o(88538),C=o(17999),b=function(e,t,o,n){return new(o||(o=Promise))((function(c,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}l((n=n.apply(e,t||[])).next())}))};const w=e=>((0,n.pushScopeId)("data-v-a34d1b6a"),e=e(),(0,n.popScopeId)(),e),B={class:"desktop-cover-label"},x={class:"desktop-index"},D=w((()=>(0,n.createElementVNode)("div",{class:"desktop-image"},[(0,n.createElementVNode)("img",{src:N})],-1))),T={class:"desktop-main"},S={class:"desktop-main-name"},I={key:0,class:"desktop-main-name-code"},_=[w((()=>(0,n.createElementVNode)("i",{class:"svg-icon iconfont icon-get-into"},null,-1))),w((()=>(0,n.createElementVNode)("span",{class:"desktop-main-entry-text"},"进入",-1)))],L={key:1,class:"desktop-main-loading"},M={class:"desktop-btn"},O=[w((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-set-up-out"},null,-1))),w((()=>(0,n.createElementVNode)("span",null,"管理",-1)))],X=w((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-restart"},null,-1))),P=w((()=>(0,n.createElementVNode)("span",null,"重启",-1))),$=(0,n.defineComponent)({__name:"DesktopCom",props:{desktop:null,desktopList:null,index:null,direction:null,serverTime:null,currentId:null},setup(e){const t=e,o=a.nC.get(g.hD),r=a.nC.get(c.g),s=(0,n.inject)("$dialog");var d=(0,n.ref)(!1),u=(0,n.ref)(!1);(0,C.yj)(),(0,C.tv)();var p=(0,n.computed)((()=>!(t.desktop.isPool||t.desktop.isConcurrent||t.desktop.isPreemption))),m=(0,n.computed)((()=>t.desktop.desktopState===g.rX.EXPIRE||t.desktop.desktopState===g.rX.OVERTIME)),f=(0,n.computed)((()=>1===t.direction||0===t.direction&&t.desktop.objId===t.currentId)),k=(0,n.computed)((()=>{var e="";switch(t.desktop.desktopState){case g.rX.ALMOST:e="即将到期";break;case g.rX.EXPIRE:e="已过期";break;case g.rX.CAN_USE:e="限时(可用)";break;case g.rX.OVERTIME:e="限时(超时)"}return e})),v=(0,n.computed)((()=>{var e="";switch(t.desktop.desktopState){case g.rX.ALMOST:e="desktop-cover-almost";break;case g.rX.EXPIRE:e="desktop-cover-expire";break;case g.rX.CAN_USE:e="desktop-cover-canuse";break;case g.rX.OVERTIME:e="desktop-cover-overtime"}return e}));function h(){t.desktop.isForbidden?V.z8.warning("该云电脑在当前终端上被禁用，请联系管理员。"):t.desktop.isPreemption?V.z8.warning("暂未支持该类型桌面连接"):function(){const{desktopState:e,bandState:n}=t.desktop;n!==g._D.NORMAL?function(){b(this,void 0,void 0,(function*(){const{bandState:e,objName:n,bandExpireDate:c,objId:a}=t.desktop;if(e!==g._D.NORMAL){var r="",s="",d=!0;switch(e){case g._D.ALMOST:r=`您的【${n}】绑定的宽带将于${R(c)}过期，如需继续订购请联系管理员`,s="云电脑宽带即将到期提醒";var u=yield o.getDesktopNoticeData(g.lC.BAND_EXPIRE),p=u.find((e=>e.desktopId===a));p?(l.k.info(`桌面-${n}上次提醒桌面宽带到期-${R(p.noticeDate)}`),t.serverTime-p.noticeDate>864e5?(d=!0,u.forEach((e=>{e.desktopId===a&&(e.noticeDate=t.serverTime)}))):d=!1):(l.k.info(`桌面-${n}第一次提醒桌面宽带到期-${R(c)}`),d=!0,u.push({desktopId:a,noticeDate:t.serverTime}),o.updateDesktopNoticeData(g.lC.BAND_EXPIRE,u)),d&&o.updateDesktopNoticeData(g.lC.BAND_EXPIRE,u);break;case g._D.EXPIRE:r=`您的【${n}】绑定的宽带已于${R(c)}过期，如需继续订购请联系管理员`,s="云电脑宽带到期提醒",d=!0}d?i.T.confirm(r,s,{type:"warning",closeOnClickModal:!1,showCancelButton:!1,confirmButtonText:"我知道了"}).then((()=>{E()})):E()}}))}():E()}()}function E(){return b(this,void 0,void 0,(function*(){const{desktopState:e,objName:n,expireDate:c,objId:a}=t.desktop;switch(e){case g.rX.NORMAL:case g.rX.CAN_USE:N();break;case g.rX.ALMOST:var r=`您的【${n}】将于${R(c)}过期，请及时续订。`,s=!0,d=yield o.getDesktopNoticeData(g.lC.DESKKTOP_EXPIRE),u=d.find((e=>e.desktopId===a));u?(l.k.info(`桌面-${n}上次提醒桌面到期-${R(u.noticeDate)}`),t.serverTime-u.noticeDate>864e5?(s=!0,d.forEach((e=>{e.desktopId===a&&(e.noticeDate=t.serverTime)}))):(s=!1,N())):(l.k.info(`桌面-${n}第一次提醒桌面到期-${R(c)}`),d.push({desktopId:a,noticeDate:t.serverTime}),o.updateDesktopNoticeData(g.lC.DESKKTOP_EXPIRE,d),s=!0),s&&i.T.confirm(r,"云电脑即将到期提醒",{type:"warning",closeOnClickModal:!1,showCancelButton:!1,confirmButtonText:"我知道了"}).then((()=>{N()}));break;case g.rX.EXPIRE:V.z8.error("云电脑已过期，需续费后使用");break;case g.rX.OVERTIME:i.T.confirm("本月云电脑使用时长已用完，如有疑问，请前往云电脑管理页查看详情。","确认信息",{type:"warning",closeOnClickModal:!1,showCancelButton:!1,confirmButtonText:"好的"})}}))}function N(){return b(this,void 0,void 0,(function*(){u.value=!0;let e=null,c=(0,n.toRaw)(t.desktop);try{e=yield o.createDesktopConnection(c)}catch(e){return void V.z8.error(e.message)}try{yield o.connectDesktop(e.id,1),function(e){b(this,void 0,void 0,(function*(){(yield r.getAuthProfile())&&o.activateDesktopConnection(e.id)}))}(e)}catch(t){o.deleteDesktopConnection(e.id),t.code===y.or.DESKTOP_LIMIT||t.code===y.or.DESKTOP_EMPTY||t.code===y.or.DESKTOP_Preemption?i.T.alert(t.message,"提示",{type:"warning"}):(V.z8.error(t.message),t.name!==y.Hx.errorName&&i.T.alert("请检查本地网络是否正常或重新连接云电脑","云电脑连接失败",{type:"warning"}))}finally{u.value=!1}}))}function w(){return b(this,void 0,void 0,(function*(){if(t.desktop.isForbidden||d.value)return;if(t.desktop.desktopState===g.rX.EXPIRE)return;if(t.desktop.desktopState===g.rX.OVERTIME)return void i.T.confirm("本月云电脑使用时长已用完，如有疑问，请前往云电脑管理页查看详情。","确认信息",{type:"warning",closeOnClickModal:!1,showCancelButton:!1,confirmButtonText:"好的"});let e="确认现在对云电脑重启？重启前请先保存尚未保存的工作，避免丢失。";const n=t.desktop.strategy&&t.desktop.strategy.rebootMsg;l.k.info("重启策略reboot：",n),n&&(e=n),i.T.confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>b(this,void 0,void 0,(function*(){try{const e=yield new Promise(((e,n)=>{d.value=!0,o.reboot(t.desktop.objId,!1,1).then((t=>{t&&(d.value=!1,e("重启进行中，请稍候"))})).catch((e=>{n(e)}))}));V.z8.success(e)}catch(e){V.z8.error(e.message),d.value=!1}}))))}))}function $(){s.open("desktopManage",{options:{desktop:(0,n.toRaw)(t.desktop),desktopList:(0,n.toRaw)(t.desktopList)}})}function R(e){const t=new Date(e);return`${t.getFullYear()}年${t.getMonth()+1}月${t.getDate()}日${t.getHours()}点`}return(0,n.onMounted)((()=>{})),(t,o)=>{const c=(0,n.resolveComponent)("loading"),a=(0,n.resolveComponent)("el-icon");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["desktop",{"desktop-landscape":0===e.direction,"desktop-portrait":1===e.direction}])},[0!==e.desktop.desktopState?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["desktop-cover",(0,n.unref)(v)])},[(0,n.createElementVNode)("p",B,(0,n.toDisplayString)((0,n.unref)(k)),1)],2)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",x,(0,n.toDisplayString)(e.index+1),1),D,(0,n.createElementVNode)("div",T,[(0,n.createElementVNode)("div",S,[(0,n.createTextVNode)((0,n.toDisplayString)(e.desktop.objName)+" ",1),0===e.direction?((0,n.openBlock)(),(0,n.createElementBlock)("div",I,"id: "+(0,n.toDisplayString)(e.desktop.desktopCode),1)):(0,n.createCommentVNode)("",!0)]),(0,n.unref)(u)?(0,n.createCommentVNode)("",!0):(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["desktop-main-entry",{"desktop-main-entry-disable":(0,n.unref)(m)}]),onClick:h},_,2)),[[n.vShow,(0,n.unref)(f)]]),(0,n.unref)(u)?((0,n.openBlock)(),(0,n.createElementBlock)("div",L,[(0,n.createVNode)(a,{class:"is-loading"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c)])),_:1})])):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",M,[(0,n.createElementVNode)("div",{class:"desktop-btn-item",onClick:$},O),(0,n.unref)(p)?(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["desktop-btn-item",{"desktop-btn-item-restarting":(0,n.unref)(d),"desktop-btn-item-disable":(0,n.unref)(m)}]),onClick:w},[X,(0,n.createTextVNode)(),P],2)),[[n.vShow,(0,n.unref)(f)]]):(0,n.createCommentVNode)("",!0)])],2)}}}),R=(0,v.Z)($,[["__scopeId","data-v-a34d1b6a"]]),A=o.p+"imgs/no-desktop.d1042a.png",z=e=>((0,n.pushScopeId)("data-v-4a3e15cb"),e=e(),(0,n.popScopeId)(),e),j={class:"tip"},H={key:0,class:"tip-loading"},F={class:"tip-loading-icon"},K=z((()=>(0,n.createElementVNode)("p",null,"云电脑获取中...",-1))),Z={key:1,class:"tip-failed"},U=z((()=>(0,n.createElementVNode)("p",null,"云电脑数据获取失败",-1))),q={key:2,class:"tip-empty"},J=z((()=>(0,n.createElementVNode)("img",{src:A},null,-1))),Q={key:0,class:"tip-empty-search"},Y={key:1},G=(0,n.defineComponent)({__name:"DesktopListTip",props:{desktopSearchName:{type:String,default:""},desktopCount:{type:Number,default:0},isQueryLoading:{type:Boolean,default:!1},isLoadFailed:{type:Boolean,default:!1}},emits:["on-reload"],setup(e,{emit:t}){function o(){t("on-reload")}return(t,c)=>{const a=(0,n.resolveComponent)("Loading"),i=(0,n.resolveComponent)("el-icon"),r=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",j,[e.isQueryLoading?((0,n.openBlock)(),(0,n.createElementBlock)("div",H,[(0,n.createElementVNode)("div",F,[(0,n.createVNode)(i,{class:"is-loading"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(a)])),_:1})]),K])):e.isLoadFailed?((0,n.openBlock)(),(0,n.createElementBlock)("div",Z,[U,(0,n.createVNode)(r,{type:"primary",onClick:o},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("重试")])),_:1})])):((0,n.openBlock)(),(0,n.createElementBlock)("div",q,[J,e.desktopSearchName.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("p",Q,"没有搜索到相关的天翼云电脑…")):((0,n.openBlock)(),(0,n.createElementBlock)("p",Y,"您暂无云电脑哦"))]))])}}}),W=(0,v.Z)(G,[["__scopeId","data-v-4a3e15cb"]]);var ee=function(e,t,o,n){return new(o||(o=Promise))((function(c,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}l((n=n.apply(e,t||[])).next())}))};const te=e=>((0,n.pushScopeId)("data-v-1316b02a"),e=e(),(0,n.popScopeId)(),e),oe={class:"box"},ne={class:"box-left"},ce={class:"box-left-num"},ae={key:0,class:"box-left-input"},ie={class:"box-btn"},re=[te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-tabular-card"},null,-1)))],le=[te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-tabular-form"},null,-1)))],se={key:0,class:"list-header-mobile"},de=te((()=>(0,n.createElementVNode)("div",{class:"list-header-mobile-user"},[(0,n.createElementVNode)("i",{class:"iconfont icon-list-header-user"})],-1))),ue={class:"list-header-mobile-user-content"},pe={class:"list-header-mobile-user-account"},me=te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-list-header-user"},null,-1))),fe={class:"user-content-box"},ke=[te((()=>(0,n.createElementVNode)("span",null,[(0,n.createElementVNode)("i",{class:"iconfont icon-account-number-and-security"}),(0,n.createTextVNode)("账户与安全")],-1))),te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-right"},null,-1)))],ve=[te((()=>(0,n.createElementVNode)("span",null,[(0,n.createElementVNode)("i",{class:"iconfont icon-a-reportahandicap"}),(0,n.createTextVNode)("报障")],-1))),te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-right"},null,-1)))],he=[te((()=>(0,n.createElementVNode)("span",null,[(0,n.createElementVNode)("i",{class:"iconfont icon-help-manual"}),(0,n.createTextVNode)("帮助手册")],-1))),te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-right"},null,-1)))],Ee=[te((()=>(0,n.createElementVNode)("span",null,[(0,n.createElementVNode)("i",{class:"iconfont icon-about"}),(0,n.createTextVNode)("关于")],-1))),te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-right"},null,-1)))],Ne=te((()=>(0,n.createElementVNode)("div",{class:"list-header-mobile-title"},"云电脑",-1))),ge=te((()=>(0,n.createElementVNode)("div",{class:"list-header-mobile-direction"},[(0,n.createElementVNode)("i",{class:"iconfont icon-list-header-menu"})],-1))),Ve={class:"list-header-mobile-menu-content"},ye=te((()=>(0,n.createElementVNode)("div",{class:"list-header-mobile-menu-title"},"视图",-1))),Ce=te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-a-cardtype"},null,-1))),be=te((()=>(0,n.createElementVNode)("i",{class:"iconfont icon-sort-desktop"},null,-1))),we=(0,n.defineComponent)({__name:"DesktopListHeader",props:{num:{type:Number,default:1},showMobileHeader:{type:Boolean,default:!1}},emits:["on-direction-change","on-search-desktop"],setup(e,{emit:t}){const o=a.nC.get(c.g),l=a.nC.get(r.Xb),s=(0,n.ref)(null);var d=(0,n.ref)(g.g0.HORIZONTAL),u=(0,n.ref)(""),p=(0,n.ref)(!1);const m=(0,n.inject)("$dialog");var f=(0,n.ref)(null);const k=(0,n.ref)();function v(e){e!==d.value&&t("on-direction-change",e),d.value=e}function h(){""===u.value&&(p.value=!1)}function E(){p.value=!0,(0,n.nextTick)((()=>{s.value&&s.value.focus()}))}function N(){t("on-search-desktop",u.value)}(0,n.onMounted)((()=>ee(this,void 0,void 0,(function*(){localStorage.getItem("currentDirection")&&(d.value=Number(localStorage.getItem("currentDirection"))),f.value=yield o.getAuthProfile()}))));const V=e=>{var t;null===(t=(0,n.unref)(k))||void 0===t||t.hide(),m.open(e)};function y(){let e=`https://desk.ctyun.cn/doc/help.html?${`appmodel=1&deviceType=${l.getDeviceType()}&clientVersion=${l.getAppVersionCode()}&orign=true&actionbar=original&region=public`}`;window.open(e)}const C=()=>ee(this,void 0,void 0,(function*(){i.T.confirm("确认退出登录？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>ee(this,void 0,void 0,(function*(){yield o.logout()})))).catch((()=>{}))}));return(t,o)=>{const c=(0,n.resolveComponent)("Search"),a=(0,n.resolveComponent)("el-icon"),i=(0,n.resolveComponent)("el-input"),r=(0,n.resolveComponent)("el-button"),l=(0,n.resolveComponent)("el-popover");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[(0,n.createElementVNode)("div",oe,[(0,n.createElementVNode)("div",ne,[(0,n.createElementVNode)("div",ce,(0,n.toDisplayString)(`您有${e.num}台`)+"天翼云电脑",1),e.num>5?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:0},[(0,n.unref)(p)?((0,n.openBlock)(),(0,n.createElementBlock)("div",ae,[(0,n.createVNode)(i,{ref_key:"searchInput",ref:s,placeholder:"搜索天翼云电脑名称",modelValue:(0,n.unref)(u),"onUpdate:modelValue":o[0]||(o[0]=e=>(0,n.isRef)(u)?u.value=e:u=e),clearable:"",onBlur:h,onInput:N},{suffix:(0,n.withCtx)((()=>[(0,n.createVNode)(a,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c)])),_:1})])),_:1},8,["modelValue"])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"box-left-search",onClick:E},[(0,n.createVNode)(a,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c)])),_:1})]))],64)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",ie,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["box-btn-item",0===(0,n.unref)(d)?"active":""]),onClick:o[1]||(o[1]=e=>v(0))},re,2),(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["box-btn-item",1===(0,n.unref)(d)?"active":""]),onClick:o[2]||(o[2]=e=>v(1))},le,2)])]),e.showMobileHeader?((0,n.openBlock)(),(0,n.createElementBlock)("div",se,[(0,n.createVNode)(l,{"popper-class":"list-header-popover",width:"210px",ref_key:"userPopoverRef",ref:k},{reference:(0,n.withCtx)((()=>[de])),default:(0,n.withCtx)((()=>{var e;return[(0,n.createElementVNode)("div",ue,[(0,n.createElementVNode)("div",pe,[me,(0,n.createTextVNode)((0,n.toDisplayString)((null===(e=(0,n.unref)(f))||void 0===e?void 0:e.loginAccount)||"--"),1)]),(0,n.createElementVNode)("ul",fe,[(0,n.createElementVNode)("li",{onClick:o[3]||(o[3]=e=>V("account"))},ke),(0,n.createElementVNode)("li",{onClick:o[4]||(o[4]=e=>V("reportMenu"))},ve),(0,n.createElementVNode)("li",{onClick:y},he),(0,n.createElementVNode)("li",{onClick:o[5]||(o[5]=e=>V("about"))},Ee)]),(0,n.createVNode)(r,{type:"primary",onClick:C},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("退出登录")])),_:1})])]})),_:1},512),Ne,(0,n.createVNode)(l,{"popper-class":"list-header-popover"},{reference:(0,n.withCtx)((()=>[ge])),default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",Ve,[ye,(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["list-header-mobile-menu-item",0===(0,n.unref)(d)?"active":""]),onClick:o[6]||(o[6]=e=>v(0))},[Ce,(0,n.createTextVNode)("卡片式")],2),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["list-header-mobile-menu-item",1===(0,n.unref)(d)?"active":""]),onClick:o[7]||(o[7]=e=>v(1))},[be,(0,n.createTextVNode)("列表式")],2)])])),_:1})])):(0,n.createCommentVNode)("",!0)])}}}),Be=(0,v.Z)(we,[["__scopeId","data-v-1316b02a"]]);var xe=o(88533),De=o(92720);const Te={mounted(e,t,o,n){let c,a;const i=e=>{c=e.targetTouches[0].pageX},r=e=>{a=e.changedTouches[0].pageX;let o=a-c;Math.abs(o)>20&&t.value&&"function"==typeof t.value&&t.value(e,o>0?"right":"left")};e._touchstartHandle=i,e._touchEndHandle=r,e.addEventListener("touchstart",i),e.addEventListener("touchend",r),e.addEventListener("touchcancel",r)},beforeUnmount(e,t,o,n){e.removeEventListener("touchstart",e._touchstartHandle),e.removeEventListener("touchend",e._touchEndHandle)}};var Se=o(5341),Ie=function(e,t,o,n){return new(o||(o=Promise))((function(c,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,r)}l((n=n.apply(e,t||[])).next())}))};const _e={class:"container-desktop"},Le={class:"container-desktop-horizontal"},Me={class:"container-desktop-vertical"},Oe=(0,n.defineComponent)({__name:"index",setup(e){const t=a.nC.get(g.hD),o=(a.nC.get(c.g),a.nC.get(y.cf)),r=(0,n.ref)(null),l=(0,n.ref)("5%");var s=(0,n.ref)([]),d=(0,n.ref)([]),u=(0,n.ref)(!1),p=(0,n.ref)(!1),m=(0,n.ref)(""),f=(0,n.ref)(0),k=(0,n.ref)(g.g0.HORIZONTAL),v=(0,n.ref)("");const N=(0,n.ref)((0,Se.mL)()),C=(0,n.ref)((0,Se.mL)()?"":"card"),b=(0,n.ref)((0,Se.mL)()?"always":"hover"),w=(0,n.ref)(),B=(0,n.ref)(Se.tq&&(0,Se.Hc)());function x(){return Ie(this,void 0,void 0,(function*(){try{u.value=!0,p.value=!1;const e=yield t.getDesktopList();s.value=e,d.value=e,f.value=yield o.getServerTime(),sessionStorage.setItem("desktops",JSON.stringify(e)),t._onDesktopListInited.fire(s.value)}catch(e){V.z8.error(e.message),p.value=!0}finally{u.value=!1,v.value=s.value.length>0?s.value[0].objId:""}}))}function D(e){v.value=s.value[e].objId}function T(e){k.value=e,localStorage.setItem("currentDirection",e.toString())}function S(e){m.value=e,0===e.length?s.value=(0,De.cloneDeep)(d.value):s.value=d.value.filter((t=>t.objName.toLowerCase().match(e.toLowerCase())))}function I(){B.value=(0,Se.Hc)()}function _(e,t){"right"===t?(0,n.unref)(w).prev():(0,n.unref)(w).next()}return(0,n.onMounted)((()=>Ie(this,void 0,void 0,(function*(){localStorage.getItem("currentDirection")&&(k.value=Number(localStorage.getItem("currentDirection"))),function(){let e=t.dropConnectionMsg;if(null!==e){const{message:o,title:n,type:c}=e;i.T.alert(o,n,{type:c||"warning"}),t.clearDropConnectionMsg()}}(),yield x(),Se.tq&&window.addEventListener("orientationchange",I),t.onActiveDesktopConnection.on((e=>{const t=sessionStorage.getItem("connections");let o=new Map;t&&(o=new Map(JSON.parse(t))),o.set(e.id,e),sessionStorage.setItem("connections",JSON.stringify([...o]))}))})))),(0,xe.pv)({[xe.eM.UPDATE_DESKTOP_NAME]:e=>{!function(e){s.value.forEach((t=>{t.desktopId===e.desktopId&&(t.objName=e.objName)}))}(e)}}),(e,t)=>{const o=(0,n.resolveComponent)("el-carousel-item"),c=(0,n.resolveComponent)("el-carousel");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["container",{"is-vertical":B.value}]),ref_key:"desktopListEle",ref:r},[(0,n.createVNode)(E.Z),(0,n.createElementVNode)("div",_e,[(0,n.unref)(d).length>0||(0,n.unref)(Se.tq)?((0,n.openBlock)(),(0,n.createBlock)(Be,{key:0,num:(0,n.unref)(d).length,onOnDirectionChange:T,onOnSearchDesktop:S,"show-mobile-header":N.value},null,8,["num","show-mobile-header"])):(0,n.createCommentVNode)("",!0),(0,n.unref)(s).length>0?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.withDirectives)(((0,n.openBlock)(),(0,n.createElementBlock)("div",Le,[(0,n.createVNode)(c,{onChange:D,type:C.value,autoplay:!1,arrow:b.value,"indicator-position":"outside",ref_key:"elCarouselRef",ref:w},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(s),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(o,{key:e.id},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(R,{desktop:e,index:t,direction:(0,n.unref)(k),"current-id":(0,n.unref)(v),"desktop-list":(0,n.unref)(s),"server-time":(0,n.unref)(f)},null,8,["desktop","index","direction","current-id","desktop-list","server-time"])])),_:2},1024)))),128))])),_:1},8,["type","arrow"])])),[[n.vShow,0===(0,n.unref)(k)],[(0,n.unref)(Te),_]]),(0,n.withDirectives)((0,n.createElementVNode)("div",Me,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(s),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(R,{key:e.id,desktop:e,index:t,direction:(0,n.unref)(k),"current-id":(0,n.unref)(v),"desktop-list":(0,n.unref)(s),"server-time":(0,n.unref)(f)},null,8,["desktop","index","direction","current-id","desktop-list","server-time"])))),128))],512),[[n.vShow,1===(0,n.unref)(k)]])],64)):((0,n.openBlock)(),(0,n.createBlock)(W,{key:2,"is-query-loading":(0,n.unref)(u),"is-load-failed":(0,n.unref)(p),"desktop-count":(0,n.unref)(s).length,"desktop-search-name":(0,n.unref)(m),onOnReload:x},null,8,["is-query-loading","is-load-failed","desktop-count","desktop-search-name"]))]),(0,n.createVNode)(h,{"footer-bottom":l.value},null,8,["footer-bottom"])],2)}}}),Xe=(0,v.Z)(Oe,[["__scopeId","data-v-4e7536e2"]])}}]);