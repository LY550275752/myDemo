"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[7559],{72900:(e,t,n)=>{function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e){let t;if("object"!=typeof e)t=e;else if("null"===i(e)||"undefined"===i(e))t=e;else if("array"===i(e)){let n;t=[];const i=e.length;for(n=0;n<i;n++)t.push(e[n])}else if("object"===i(e)){t={};for(let n in e)if(e.hasOwnProperty(n)){const o=e[n];if(o===e)continue;"array"===i(o)||"object"===i(o)?t[n]=r(o):t[n]=o}}else t=e;return t}n.d(t,{Dy:()=>o,Jh:()=>a,Oh:()=>s,d9:()=>r,ds:()=>l,p:()=>c,p6:()=>d});function o(e){let t=0,n="当前密码只包含",i={flag:!1,message:""};return/\s/.test(e)?(i.message="密码不支持空格",i):/[\u4e00-\u9fa5]+/.test(e)?(i.message="密码不支持中文",i):e.length<8||e.length>20?(i.message="密码长度需要在 8-20 位之间",i):(/([a-z])+/.test(e)&&(n+="小写字母 ",t++),/([A-Z])+/.test(e)&&(n+="大写字母 ",t++),/(\d)+/.test(e)&&(n+="数字 ",t++),/[!"#\$%&'\(\)\*\+,-\.\/:;<=>\?@\[\\\]\^_`\{\|\}~]/.test(e)&&(n+="特殊字符 ",t++),t<3?i.message=n:(i.flag=!0,i.message=""),i)}function a(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim())}function c(e){return/1\d{10}/g.test(e.trim())}function l(e){return/^((25[0-5]|2[0-4]\d|[1]{1}\d{1}\d{1}|[1-9]{1}\d{1}|\d{1})($|(?!\.$)\.)){4}$/.test(e)}function s(e){let t=e.split(":"),n=0,i="";if(t.length>2)n=Number(t.pop()),i=t.join(":");else{if(2!==t.length)throw new Error("无法解析服务器地址");i=t[0],n=Number(t[1])}return{host:i,port:n}}function d(e,t="yyyy-MM-dd",n="--"){if(!e)return n;let i=new Date(e);if(e=e+60*i.getTimezoneOffset()*1e3- -288e5,i.setTime(e),"Invalid Date"===i.toString())return n;let r={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in r)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[e]:("00"+r[e]).substr((""+r[e]).length)));return t}},35247:(e,t,n)=>{n.d(t,{Yi:()=>d,bC:()=>m,wz:()=>s,we:()=>l,Du:()=>c,bL:()=>v});var i=n(48402),r=n(6298),o=n(6522),a=n(88538);const c={1:"云电脑",2:"云电脑",3:"云手机"};var l;!function(e){e[e.UNDO=0]="UNDO",e[e.IGNORE=1]="IGNORE"}(l||(l={}));const s={1:"非工作时间异常",2:"登录地点异常","1#2":"非工作时间异常和登录地点异常"},d={10:"瘦终端",11:"瘦终端",15:"IPTV",20:"Android Phone",25:"PC",26:"WinXP-PC",30:"iPhone",35:"Android Pad",40:"iPad",45:"Mac",60:"Web客户端",90:"Web"},m={10:{color:"#32CC93",name:"equipment-1"},11:{color:"#32CC93",name:"equipment-1"},15:{color:"#4CA7FB",name:"equipment-3"},20:{color:"#4CA7FB",name:"equipment-3"},25:{color:"#FD893A",name:"equipment-4"},26:{color:"#FD893A",name:"equipment-4"},30:{color:"#4CA7FB",name:"equipment-2"},35:{color:"#4CA7FB",name:"equipment-3"},40:{color:"#4CA7FB",name:"equipment-2"},45:{color:"#FD893A",name:"equipment-5"},def:{color:"#FD893A",name:"equipment-6"}};var p,u,h,g=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},f=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function c(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((i=i.apply(e,t||[])).next())}))};let v=class{constructor(e,t,n){this.auth=e,this.request=t,this.env=n}getLogs(e){return x(this,void 0,void 0,(function*(){e.oneDay||1!==e.pageNum||(e.lastRecordLoginTime=0,e.lastRecordUserLogId=0);return(yield this.getApi("api/cdserv/client/getLogs",e)).data}))}getExcepLogCounts(e){return x(this,void 0,void 0,(function*(){const t=yield this.auth.getAuthProfile();if(!e||!t)return;const n={desktopId:e,userId:t.userId};return(yield this.getApi("api/cdserv/client/getExcepLogCounts",n)).data}))}ignoreAllExcepLogs(){return x(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/ignoreAllExcepLogs")}))}handleExcepLog(e){return x(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/handleExcepLog",e)}))}getDeviceList(){return x(this,void 0,void 0,(function*(){return(yield this.getApi("api/cdserv/client/device/list")).data}))}deviceUnbind(e){return x(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/device/unbinding",e)}))}deviceEdit(e){return x(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/device/edit",e)}))}getApi(e,t){return this.request.api({url:e,method:"GET",params:t})}postApi(e,t){return x(this,void 0,void 0,(function*(){return this.request.api({url:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}))}};v=g([(0,i.Xn)(),f("design:paramtypes",["function"==typeof(p=void 0!==r.g&&r.g)?p:Object,"function"==typeof(u=void 0!==a.cf&&a.cf)?u:Object,"function"==typeof(h=void 0!==o.Xb&&o.Xb)?h:Object])],v)},87559:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var i=n(89810),r=n(35247),o=n(6522),a=n(48402),c=n(73827),l=n(72900),s=n(90505),d=n(5341),m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function c(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((i=i.apply(e,t||[])).next())}))};const p=e=>((0,i.pushScopeId)("data-v-84479568"),e=e(),(0,i.popScopeId)(),e),u={class:"container"},h={key:0,class:"container-intro"},g={key:1,class:"container-main"},f=p((()=>(0,i.createElementVNode)("div",{class:"container-main-title"},"当前设备",-1))),x={class:"container-main-list-item-name"},v={class:"container-main-list-item-detail"},y={key:0,class:"container-main-list-item-sys"},N={key:1,class:"container-main-list-item-time"},V={key:2,class:"iconfont icon-right"},w=p((()=>(0,i.createElementVNode)("div",{class:"container-main-title"},"已验证设备",-1))),C={class:"container-main-list"},k=["onClick"],E={class:"container-main-list-item-name"},b={class:"container-main-list-item-name-detail"},B={key:0,class:"container-main-list-item-sys"},_={key:1,class:"container-main-list-item-time"},D={key:2,class:"iconfont icon-right"},A={key:2,class:"container-empty"},S=(0,i.defineComponent)({__name:"deviceManage",emits:["enter"],setup(e,{emit:t}){const n=(0,d.mL)(),p=a.nC.get(o.Xb),S=a.nC.get(r.bL),L=(0,i.inject)("$dialogHelper");var T=(0,i.ref)([]),z=(0,i.ref)(!1),q=(0,i.ref)(null);function M(e){t("enter","DeviceDetail",e)}function O(){return m(this,void 0,void 0,(function*(){try{z.value=!0,T.value=yield S.getDeviceList(),T.value.forEach((e=>{var t,n;e.icon=(t=e.deviceType.toString(),(n=(0,l.d9)(r.bC[t]||r.bC.def)).name=`icon-${n.name}`,n)})),function(e){const t=p.getDeviceCode().toUpperCase();e.some((e=>{if(e.deviceCode.toUpperCase()===t)return q.value=e,q.value.isCurr=!0,!0}))}(T.value)}catch(e){c.z8.error("获取设备列表失败"),t("enter","AccountEntry")}finally{z.value=!1}}))}return(0,i.onMounted)((()=>m(this,void 0,void 0,(function*(){yield O(),(0,i.nextTick)((()=>{L.config({title:"设备管理",onBack:()=>{t("enter")}})}))})))),(e,t)=>{const o=(0,i.resolveComponent)("el-tooltip"),a=(0,i.resolveDirective)("loading");return(0,i.openBlock)(),(0,i.createElementBlock)("div",u,[(0,i.unref)(z)?((0,i.openBlock)(),(0,i.createBlock)(s.default,{key:0})):((0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,{key:1},[(0,i.unref)(T).length?((0,i.openBlock)(),(0,i.createElementBlock)("p",h," 您可以从列表中删除设备，删除后将该设备踢下线并抹除已记住的密码。 此外，在该设备再次登录需要进行身份认证 ")):(0,i.createCommentVNode)("",!0),(0,i.unref)(T).length?(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("div",g,[f,(0,i.unref)(q)?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,onClick:t[0]||(t[0]=e=>M((0,i.unref)(q))),class:"container-main-list-item"},[(0,i.createElementVNode)("div",x,[(0,i.createElementVNode)("i",{style:(0,i.normalizeStyle)({background:(0,i.unref)(q).icon.color}),class:(0,i.normalizeClass)(["iconfont container-main-list-item-name-icon",(0,i.unref)(q).icon.name])},null,6),(0,i.createElementVNode)("div",v,[(0,i.createVNode)(o,{effect:"light",content:(0,i.unref)(q).deviceName,placement:"top-start","show-arrow":!1},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)((0,i.unref)(q).deviceName),1)])),_:1},8,["content"]),(0,i.createElementVNode)("div",null,(0,i.toDisplayString)((0,i.unref)(r.Yi)[(0,i.unref)(q).deviceType]),1)])]),(0,i.unref)(n)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",y,[(0,i.createTextVNode)(" 设备系统： "),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)((0,i.unref)(q).sysVersion||"--"),1)])),(0,i.unref)(n)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",N,[(0,i.createTextVNode)(" 最近登录： "),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)((0,i.unref)(l.p6)((0,i.unref)(q).lastUseTime,"MM月dd日 hh:mm:ss")),1)])),(0,i.unref)(n)?((0,i.openBlock)(),(0,i.createElementBlock)("i",V)):(0,i.createCommentVNode)("",!0)])):(0,i.createCommentVNode)("",!0),w,(0,i.createElementVNode)("ul",C,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(T),(e=>((0,i.openBlock)(),(0,i.createElementBlock)("li",{key:e.bindingId,onClick:t=>M(e),class:"container-main-list-item"},[(0,i.createElementVNode)("div",E,[(0,i.createElementVNode)("i",{style:(0,i.normalizeStyle)({background:e.icon.color}),class:(0,i.normalizeClass)(["iconfont container-main-list-item-name-icon",e.icon.name])},null,6),(0,i.createElementVNode)("div",b,[(0,i.createVNode)(o,{effect:"light",content:e.deviceName,placement:"top-start","show-arrow":!1,offset:0},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",null,(0,i.toDisplayString)(e.deviceName),1)])),_:2},1032,["content"]),(0,i.createElementVNode)("div",null,(0,i.toDisplayString)((0,i.unref)(r.Yi)[e.deviceType]),1)])]),(0,i.unref)(n)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",B,[(0,i.createTextVNode)(" 设备系统： "),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)(e.sysVersion),1)])),(0,i.unref)(n)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("span",_,[(0,i.createTextVNode)(" 最近登录： "),(0,i.createElementVNode)("span",null,(0,i.toDisplayString)((0,i.unref)(l.p6)(e.lastUseTime,"MM月dd日 hh:mm:ss")),1)])),(0,i.unref)(n)?((0,i.openBlock)(),(0,i.createElementBlock)("i",D)):(0,i.createCommentVNode)("",!0)],8,k)))),128))])])),[[a,(0,i.unref)(z)]]):(0,i.createCommentVNode)("",!0),0!=(0,i.unref)(T).length||(0,i.unref)(z)?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",A,"暂无设备"))],64))])}}});const L=(0,n(57775).Z)(S,[["__scopeId","data-v-84479568"]])},90505:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var i=n(89810);const r={class:"item"},o={class:"item"},a={class:"item"},c={class:"item"},l={class:"item"},s={class:"item"};const d={},m=(0,n(57775).Z)(d,[["render",function(e,t){const n=(0,i.resolveComponent)("el-skeleton-item"),d=(0,i.resolveComponent)("el-skeleton");return(0,i.openBlock)(),(0,i.createBlock)(d,{animated:""},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{style:{height:"24px","margin-bottom":"16px"}}),(0,i.createVNode)(n,{style:{height:"13.8px",width:"100px","margin-bottom":"8px"}}),(0,i.createElementVNode)("div",r,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})]),(0,i.createVNode)(n,{style:{height:"24px",width:"100px","margin-bottom":"16px"}}),(0,i.createElementVNode)("div",o,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})]),(0,i.createVNode)(n,{style:{height:"13.8px",width:"100px","margin-bottom":"8px"}}),(0,i.createElementVNode)("div",a,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})]),(0,i.createElementVNode)("div",c,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})]),(0,i.createElementVNode)("div",l,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})]),(0,i.createElementVNode)("div",s,[(0,i.createVNode)(d,{style:{"--el-skeleton-circle-size":"36px",width:"36px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"circle"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"120px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1}),(0,i.createVNode)(d,{style:{width:"180px","margin-right":"16px"}},{template:(0,i.withCtx)((()=>[(0,i.createVNode)(n,{variant:"text"})])),_:1})])])),_:1})}],["__scopeId","data-v-6b66d0bd"]])}}]);