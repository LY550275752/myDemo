"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[7712],{49264:(e,t,n)=>{function o(e,t="yyyy-MM-dd",n="--"){if(!e)return n;let o=new Date(e);if(e=e+60*o.getTimezoneOffset()*1e3- -288e5,o.setTime(e),"Invalid Date"===o.toString())return n;let c={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in c)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?c[e]:("00"+c[e]).substr((""+c[e]).length)));return t}n.d(t,{m:()=>o})},47712:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var o,c,l,i=n(89810),a=n(48402),r=n(6298),s=n(6522),u=n(88538),f=function(e,t,n,o){var c,l=arguments.length,i=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(l<3?c(i):l>3?c(t,n,i):c(t,n))||i);return l>3&&i&&Object.defineProperty(t,n,i),i},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e,t,n,o){return new(n||(n=Promise))((function(c,l){function i(e){try{r(o.next(e))}catch(e){l(e)}}function a(e){try{r(o.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}r((o=o.apply(e,t||[])).next())}))};let g=class{constructor(e,t,n){this.request=e,this.auth=t,this.env=n}getVersionLog(e){return d(this,void 0,void 0,(function*(){const t=this.auth.getAuthProfile();if(!t)throw new Error("帐号未登陆");return(yield this.request.api({method:"post",url:"api/cdserv/client/software/pageVersion",data:{osType:this.env.getOSType(),page:e.page,pageSize:e.size,tenantId:t.tenantId,softwareCode:this.env.getSoftwareCode()},headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}))}};g=f([(0,a.Xn)(),p("design:paramtypes",["function"==typeof(o=void 0!==u.cf&&u.cf)?o:Object,"function"==typeof(c=void 0!==r.g&&r.g)?c:Object,"function"==typeof(l=void 0!==s.Xb&&s.Xb)?l:Object])],g);var v=n(49264),h=function(e,t,n,o){return new(n||(n=Promise))((function(c,l){function i(e){try{r(o.next(e))}catch(e){l(e)}}function a(e){try{r(o.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}r((o=o.apply(e,t||[])).next())}))};const m={class:"log"},y={key:0,class:"log-loading"},k=(w=()=>(0,i.createElementVNode)("p",null,"加载中",-1),(0,i.pushScopeId)("data-v-226f0586"),w=w(),(0,i.popScopeId)(),w);var w;const b={key:1,class:"log-content"},E={key:0,class:"log-content-empty"},B={key:1,class:"log-content-list"},x={class:"log-content-list-item-top"},C={class:"date"},R={class:"log-content-list-item-detail"},V={key:0,class:"log-content-list-loading"},S=(0,i.defineComponent)({__name:"versionLog",emits:["back"],setup(e,{emit:t}){const n=a.nC.get(g),o=(0,i.inject)("$dialogHelper");var c=!0,l=!1,r=1,s=(0,i.ref)(!0),u=(0,i.ref)(!1),f=(0,i.ref)([]);function p(){return h(this,void 0,void 0,(function*(){if(c&&!l)try{l=!0,u.value=!0;let e=yield n.getVersionLog({page:r,size:10});e.list&&(f.value=f.value.concat(e.list)),c=e.hasNextPage||!1,r++}catch(e){}finally{s.value=!1,u.value=!1,l=!1}}))}return(0,i.onMounted)((()=>{o.config({title:"日志",onBack:()=>{t("back")}}),p()})),(e,t)=>{const n=(0,i.resolveComponent)("Loading"),o=(0,i.resolveComponent)("el-icon"),c=(0,i.resolveComponent)("el-empty"),l=(0,i.resolveDirective)("infinite-scroll");return(0,i.openBlock)(),(0,i.createElementBlock)("div",m,[(0,i.unref)(s)?((0,i.openBlock)(),(0,i.createElementBlock)("div",y,[(0,i.createVNode)(o,{class:"is-loading"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(n)])),_:1}),k])):((0,i.openBlock)(),(0,i.createElementBlock)("div",b,[0===(0,i.unref)(f).length?((0,i.openBlock)(),(0,i.createElementBlock)("div",E,[(0,i.createVNode)(c,{description:"暂无日志"})])):(0,i.withDirectives)(((0,i.openBlock)(),(0,i.createElementBlock)("ul",B,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)((0,i.unref)(f),((e,t)=>((0,i.openBlock)(),(0,i.createElementBlock)("li",{class:"log-content-list-item",key:t},[(0,i.createElementVNode)("p",x,[(0,i.createElementVNode)("span",C,(0,i.toDisplayString)((0,i.unref)(v.m)(e.publishDate)),1)]),(0,i.createElementVNode)("p",R,(0,i.toDisplayString)(e.content),1)])))),128)),(0,i.unref)(u)?((0,i.openBlock)(),(0,i.createElementBlock)("div",V,"加载中...")):(0,i.createCommentVNode)("",!0)])),[[l,p]])]))])}}});const D=(0,n(57775).Z)(S,[["__scopeId","data-v-226f0586"]])}}]);