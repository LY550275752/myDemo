"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[8230],{22197:(e,t,l)=>{l.r(t),l.d(t,{default:()=>C});var a=l(89810);const o=l.p+"imgs/file-transfer.18b1a4.png";var n=l(48402),r=l(14334),s=l(63102);const c={class:"file-copy"},i=(p=()=>(0,a.createElementVNode)("img",{src:o,alt:"文件拷贝"},null,-1),(0,a.pushScopeId)("data-v-32b6e303"),p=p(),(0,a.popScopeId)(),p);var p;const u={class:"file-copy-message"},d=["title"],m={class:"progress-tips"},k={class:"progress-tips"},f={key:0,class:"progress-tips"},v={key:1,class:"progress-tips"},g=(0,a.defineComponent)({__name:"fileTransfer",setup(e){const t=n.nC.get(r.WY),l=(0,a.inject)("$dialogHelper"),{task:o}=(0,a.inject)("$options"),p=((0,a.ref)({}),(0,a.ref)(3));let g=null;const C=(0,a.ref)("--"),N=(0,a.ref)("--"),V=(0,a.ref)("--"),y=(0,a.ref)({percent:0,fileName:"",rate:0,errorMsg:"",errorFlag:0,taskID:0,startTime:0,fileSize:0,currentSize:0,isDirectory:!1,type:0,totalCount:0,finishCount:0});function D(){t.cancelFileTransfer(y.value.taskID),setTimeout((()=>{h()}),1e3)}function h(){g&&(clearTimeout(g),g=null),l.close()}function S(){0!=--p.value?g=setTimeout((()=>{S()}),1e3):h()}function _(e){e.taskID===y.value.taskID&&(y.value=e,N.value=(0,s._Y)(e.fileSize),V.value=(0,s._Y)(e.currentSize),C.value=(0,s._Y)(e.rate)+"/s",100===e.percent&&S())}return(0,a.onMounted)((()=>{o&&(y.value.taskID=o.taskID,_(o)),function(){let e=t.onFileTaskState.on((e=>{_(e)}));(0,a.onUnmounted)((()=>{e.dispose()}))}(),(0,a.nextTick)((()=>{l.config({title:"文件传输",showClose:!1})}))})),(e,t)=>{const l=(0,a.resolveComponent)("el-progress"),o=(0,a.resolveComponent)("CircleCloseFilled"),n=(0,a.resolveComponent)("el-icon"),r=(0,a.resolveComponent)("el-button"),s=(0,a.resolveComponent)("CircleCheckFilled");return(0,a.openBlock)(),(0,a.createElementBlock)("section",c,[i,(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("p",{class:"file-name",title:y.value.fileName},(0,a.toDisplayString)(y.value.fileName),9,d),(0,a.createVNode)(l,{"stroke-width":6,percentage:y.value.percent,"show-text":!1},null,8,["percentage"]),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["progress-message",{"danger-color":1===y.value.errorFlag,"success-color":100===y.value.percent}])},[1===y.value.errorFlag?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createElementVNode)("span",m,[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(o)])),_:1}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(y.value.errorMsg||"文件传输错误"),1)]),(0,a.createVNode)(r,{onClick:h,size:"small",plain:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("关闭")])),_:1})],64)):100===y.value.percent?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createElementVNode)("span",k,[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s)])),_:1}),(0,a.createTextVNode)(" 传输完成，"+(0,a.toDisplayString)(p.value)+"秒后自动关闭 ",1)]),(0,a.createVNode)(r,{onClick:h,size:"small",plain:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("关闭")])),_:1})],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:2},[y.value.isDirectory?((0,a.openBlock)(),(0,a.createElementBlock)("span",f,(0,a.toDisplayString)(y.value.finishCount)+"/"+(0,a.toDisplayString)(y.value.totalCount)+" - "+(0,a.toDisplayString)(C.value),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",v,(0,a.toDisplayString)(`${V.value} / ${N.value}`)+" - "+(0,a.toDisplayString)(C.value),1)),(0,a.createVNode)(r,{onClick:D,size:"small",plain:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("取消")])),_:1})],64))],2)])])}}});const C=(0,l(57775).Z)(g,[["__scopeId","data-v-32b6e303"]])}}]);