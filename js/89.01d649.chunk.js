(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[89],{14957:(e,t,n)=>{"use strict";n.d(t,{V:()=>y});var a=n(28125),i=n(65553),r=n(52429),o=n(89810),l=n(50729),c=n(75566),s=n(24577),u=n(66156),d=n(48331),f=n(47383),p=n(16934),v=n(69077),m=(0,l.do)("action-sheet"),g=(0,r.Z)(m,2),b=g[0],w=g[1],V=(0,c.l7)({},v.W,{title:String,round:s.J5,actions:(0,s.Ce)(),closeIcon:(0,s.SQ)("cross"),closeable:s.J5,cancelText:String,description:String,closeOnPopstate:s.J5,closeOnClickAction:Boolean,safeAreaInsetBottom:s.J5}),N=[].concat((0,i.Z)(v.m),["round","closeOnPopstate","safeAreaInsetBottom"]),h=(0,o.defineComponent)({name:b,props:V,emits:["select","cancel","update:show"],setup:function(e,t){var n=t.slots,a=t.emit,i=function(e){return a("update:show",e)},r=function(){i(!1),a("cancel")},l=function(){if(e.title)return(0,o.createVNode)("div",{class:w("header")},[e.title,e.closeable&&(0,o.createVNode)(d.J,{name:e.closeIcon,class:[w("close"),u.e9],onClick:r},null)])},s=function(){if(n.cancel||e.cancelText)return[(0,o.createVNode)("div",{class:w("gap")},null),(0,o.createVNode)("button",{type:"button",class:w("cancel"),onClick:r},[n.cancel?n.cancel():e.cancelText])]},v=function(e,t){return e.loading?(0,o.createVNode)(p.g,{class:w("loading-icon")},null):n.action?n.action({action:e,index:t}):[(0,o.createVNode)("span",{class:w("name")},[e.name]),e.subname&&(0,o.createVNode)("div",{class:w("subname")},[e.subname])]},m=function(t,n){var r=t.color,l=t.loading,c=t.callback,s=t.disabled,u=t.className;return(0,o.createVNode)("button",{type:"button",style:{color:r},class:[w("item",{loading:l,disabled:s}),u],onClick:function(){s||l||(c&&c(t),e.closeOnClickAction&&i(!1),(0,o.nextTick)((function(){return a("select",t,n)})))}},[v(t,n)])},g=function(){if(e.description||n.description){var t=n.description?n.description():e.description;return(0,o.createVNode)("div",{class:w("description")},[t])}};return function(){return(0,o.createVNode)(f.G,(0,o.mergeProps)({class:w(),position:"bottom","onUpdate:show":i},(0,c.ei)(e,N)),{default:function(){var t;return[l(),g(),(0,o.createVNode)("div",{class:w("content")},[e.actions.map(m),null==(t=n.default)?void 0:t.call(n)]),s()]}})}}}),y=(0,a.n)(h)},84117:(e,t,n)=>{"use strict";n.d(t,{Q:()=>F});var a=n(28125),i=n(65553),r=n(89810),o=n(24577),l=n(75566),c=n(43500),s=n(24638),u=n(52429),d=(0,n(50729).do)("uploader"),f=(0,u.Z)(d,3),p=f[0],v=f[1],m=f[2];function g(e,t){return new Promise((function(n){if("file"!==t){var a=new FileReader;a.onload=function(e){n(e.target.result)},"dataUrl"===t?a.readAsDataURL(e):"text"===t&&a.readAsText(e)}else n()}))}function b(e,t){return(0,l.qo)(e).some((function(e){return!!e.file&&((0,c.mf)(t)?t(e.file):e.file.size>t)}))}var w=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function V(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(t=e.url,w.test(t)):"string"==typeof e.content&&0===e.content.indexOf("data:image"));var t}var N=n(33745),h=n(66898),y=n(48331),x=n(86015),k=n(36537),S=n(47347),C=n(16934),z=(0,r.defineComponent)({props:{name:o.Or,item:(0,o.ir)(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview"],setup:function(e,t){var n=t.emit,a=t.slots,i=function(){var t=e.item,n=t.status,a=t.message;if("uploading"===n||"failed"===n){var i="failed"===n?(0,r.createVNode)(y.J,{name:"close",class:v("mask-icon")},null):(0,r.createVNode)(C.g,{class:v("loading")},null),o=(0,c.Xq)(a)&&""!==a;return(0,r.createVNode)("div",{class:v("mask")},[i,o&&(0,r.createVNode)("div",{class:v("mask-message")},[a])])}},o=function(t){var a=e.name,i=e.item,r=e.index,o=e.beforeDelete;t.stopPropagation(),(0,k.I)(o,{args:[i,{name:a,index:r}],done:function(){return n("delete")}})},u=function(){return n("preview")},d=function(){if(e.deletable&&"uploading"!==e.item.status){var t=a["preview-delete"];return(0,r.createVNode)("div",{role:"button",class:v("preview-delete",{shadow:!t}),tabindex:0,"aria-label":m("delete"),onClick:o},[t?t():(0,r.createVNode)(y.J,{name:"cross",class:v("preview-delete-icon")},null)])}},f=function(){if(a["preview-cover"]){var t=e.index,n=e.item;return(0,r.createVNode)("div",{class:v("preview-cover")},[a["preview-cover"]((0,l.l7)({index:t},n))])}};return function(){return(0,r.createVNode)("div",{class:v("preview")},[(t=e.item,n=e.lazyLoad,a=e.imageFit,o=e.previewSize,V(t)?(0,r.createVNode)(S.E,{fit:a,src:t.content||t.url,class:v("preview-image"),width:Array.isArray(o)?o[0]:o,height:Array.isArray(o)?o[1]:o,lazyLoad:n,onClick:u},{default:f}):(0,r.createVNode)("div",{class:v("file"),style:(0,s.Xn)(e.previewSize)},[(0,r.createVNode)(y.J,{class:v("file-icon"),name:"description"},null),(0,r.createVNode)("div",{class:[v("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),f()])),i(),d()]);var t,n,a,o}}}),A={name:(0,o.SI)(""),accept:(0,o.SQ)("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:(0,o.SI)(1/0),imageFit:(0,o.SQ)("cover"),resultType:(0,o.SQ)("dataUrl"),uploadIcon:(0,o.SQ)("photograph"),uploadText:String,deletable:o.J5,afterRead:Function,showUpload:o.J5,modelValue:(0,o.Ce)(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:o.J5,previewOptions:Object,previewFullImage:o.J5,maxSize:{type:[Number,String,Function],default:1/0}},I=(0,r.defineComponent)({name:p,props:A,emits:["delete","oversize","click-upload","close-preview","click-preview","update:modelValue"],setup:function(e,t){var n,a=t.emit,o=t.slots,u=(0,r.ref)(),d=[],f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.modelValue.length;return{name:e.name,index:t}},p=function(){u.value&&(u.value.value="")},m=function(t){if(p(),b(t,e.maxSize)){if(!Array.isArray(t))return void a("oversize",t,f());var n=function(e,t){var n=[],a=[];return e.forEach((function(e){b(e,t)?a.push(e):n.push(e)})),{valid:n,invalid:a}}(t,e.maxSize);if(t=n.valid,a("oversize",n.invalid,f()),!t.length)return}t=(0,r.reactive)(t),a("update:modelValue",[].concat((0,i.Z)(e.modelValue),(0,i.Z)((0,l.qo)(t)))),e.afterRead&&e.afterRead(t,f())},w=function(t){var n=e.maxCount,a=e.modelValue,i=e.resultType;if(Array.isArray(t)){var r=+n-a.length;t.length>r&&(t=t.slice(0,r)),Promise.all(t.map((function(e){return g(e,i)}))).then((function(e){var n=t.map((function(t,n){var a={file:t,status:"",message:""};return e[n]&&(a.content=e[n]),a}));m(n)}))}else g(t,i).then((function(e){var n={file:t,status:"",message:""};e&&(n.content=e),m(n)}))},k=function(t){var n=t.target.files;if(!e.disabled&&n&&n.length){var a=1===n.length?n[0]:[].slice.call(n);if(e.beforeRead){var i=e.beforeRead(a,f());if(!i)return void p();if((0,c.tI)(i))return void i.then((function(e){w(e||a)})).catch(p)}w(a)}},S=function(){return a("close-preview")},C=function(t,i){var c=["imageFit","deletable","previewSize","beforeDelete"],s=(0,l.l7)((0,l.ei)(e,c),(0,l.ei)(t,c,!0));return(0,r.createVNode)(z,(0,r.mergeProps)({item:t,index:i,onClick:function(){return a("click-preview",t,f(i))},onDelete:function(){return function(t,n){var i=e.modelValue.slice(0);i.splice(n,1),a("update:modelValue",i),a("delete",t,f(n))}(t,i)},onPreview:function(){return function(t){if(e.previewFullImage){var a=e.modelValue.filter(V),i=a.map((function(e){return e.file&&!e.url&&"failed"!==e.status&&(e.url=URL.createObjectURL(e.file),d.push(e.url)),e.url})).filter(Boolean);n=(0,x.e)((0,l.l7)({images:i,startPosition:a.indexOf(t),onClose:S},e.previewOptions))}}(t)}},(0,l.ei)(e,["name","lazyLoad"]),s),(0,l.ei)(o,["preview-cover","preview-delete"]))},A=function(){if(e.previewImage)return e.modelValue.map(C)},I=function(e){return a("click-upload",e)},F=function(){if(!(e.modelValue.length>=e.maxCount)&&e.showUpload){var t=e.readonly?null:(0,r.createVNode)("input",{ref:u,type:"file",class:v("input"),accept:e.accept,capture:e.capture,multiple:e.multiple,disabled:e.disabled,onChange:k},null);return o.default?(0,r.createVNode)("div",{class:v("input-wrapper"),onClick:I},[o.default(),t]):(0,r.createVNode)("div",{class:v("upload",{readonly:e.readonly}),style:(0,s.Xn)(e.previewSize),onClick:I},[(0,r.createVNode)(y.J,{name:e.uploadIcon,class:v("upload-icon")},null),e.uploadText&&(0,r.createVNode)("span",{class:v("upload-text")},[e.uploadText]),t])}};return(0,r.onBeforeUnmount)((function(){d.forEach((function(e){return URL.revokeObjectURL(e)}))})),(0,h.F)({chooseFile:function(){u.value&&!e.disabled&&u.value.click()},closeImagePreview:function(){n&&n.close()}}),(0,N.aM)((function(){return e.modelValue})),function(){return(0,r.createVNode)("div",{class:v()},[(0,r.createVNode)("div",{class:v("wrapper",{disabled:e.disabled})},[A(),F()])])}}}),F=(0,a.n)(I)},77572:(e,t,n)=>{"use strict";n.r(t)},89326:(e,t,n)=>{"use strict";n.r(t)},52719:(e,t,n)=>{n(89170),n(73864),n(85223),n(59772),n(98506),n(67426),n(77572)},91459:(e,t,n)=>{n(89170),n(73864),n(85223),n(4969)},69942:(e,t,n)=>{n(89170),n(98506)},23582:(e,t,n)=>{n(89170),n(73864),n(85223),n(98506),n(67426)},39094:(e,t,n)=>{n(89170),n(4533),n(34162)},54199:(e,t,n)=>{n(89170),n(4533)},84298:(e,t,n)=>{n(89170),n(73864),n(85223),n(4969),n(59772),n(98506),n(67426),n(4533),n(34162),n(38833),n(89326)}}]);