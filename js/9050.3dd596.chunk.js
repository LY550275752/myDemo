"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[9050],{11210:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(48402),a=o(6522);function l(){return n.nC.get(a.Xb)}},12773:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(89810),a=o(51882),l=o(11210);const r={key:0},c={key:1,class:"d-flex align-center"},i=["href"],d=(0,n.defineComponent)({__name:"formItemFile",props:{item:{default:()=>({}),type:Object,required:!0}},setup(e){const t=e,o=((0,a.Z)(),(0,l.Z)()),d=(0,n.computed)((()=>t.item));function u(e){return`${o.getAPIHost()}/api/v2/client/downloadWsheetFile?attachName=${encodeURIComponent(e.attachName)}&attachAddress=${encodeURIComponent(e.attachAddress)}`}return(e,t)=>{const o=(0,n.resolveComponent)("Link"),a=(0,n.resolveComponent)("el-icon"),l=(0,n.resolveComponent)("el-form-item");return(0,n.openBlock)(),(0,n.createBlock)(l,{label:"附件:"},{default:(0,n.withCtx)((()=>[(0,n.unref)(d).wsheetAttachList?((0,n.openBlock)(),(0,n.createElementBlock)("div",c,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(d).wsheetAttachList,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"pic",key:t},[(0,n.createVNode)(a,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(o)])),_:1}),(0,n.createElementVNode)("a",{href:u(e),download:"file",target:"_blank"},(0,n.toDisplayString)(e.attachName),9,i)])))),128))])):((0,n.openBlock)(),(0,n.createElementBlock)("div",r,"无"))])),_:1})}}});const u=(0,o(57775).Z)(d,[["__scopeId","data-v-302710b0"]])},40184:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(89810),a=o(81527),l=o(66464),r=o(55087),c=o(88533);const i={class:"history"},d=(0,n.defineComponent)({__name:"history",setup(e){const t=(0,n.ref)("list"),o=(0,n.ref)(null);(0,n.provide)("detail",o);const d=(0,n.inject)("tab"),u=(0,n.ref)("list"),s=(0,n.inject)("$dialogHelper"),f=(0,n.computed)((()=>"list"===t.value)),p=(0,n.computed)((()=>"detail"===t.value)),m=(0,n.computed)((()=>"feedback"===t.value));return(0,n.watch)(d,(e=>{t.value="list"})),(0,c.pv)({"change-report-page":function({to:e,data:n,redirect:a}){t.value=e,n&&(o.value=n),a&&(u.value=a),s.config({onBack:!1})}}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.withDirectives)((0,n.createVNode)(a.default,null,null,512),[[n.vShow,(0,n.unref)(f)]]),(0,n.unref)(p)?((0,n.openBlock)(),(0,n.createBlock)(l.default,{key:0})):(0,n.createCommentVNode)("",!0),(0,n.unref)(m)?((0,n.openBlock)(),(0,n.createBlock)(r.default,{key:1,source:o.value,comefrom:u.value},null,8,["source","comefrom"])):(0,n.createCommentVNode)("",!0)]))}});const u=(0,o(57775).Z)(d,[["__scopeId","data-v-671dfa78"]])},29050:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var n=o(89810),a=o(42814),l=o(40184),r=o(52134),c=o(11210),i=o(86631),d=o(48402),u=o(55304);var s=o(88533),f=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function r(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,c)}i((n=n.apply(e,t||[])).next())}))};const p={class:"report"},m=(0,n.defineComponent)({__name:"report",props:{options:{type:Object,default:{}}},setup(e){const t=e,o=((0,c.Z)(),(0,i.Z)()),m=(d.nC.get(u.hD),(0,n.inject)("$dialogHelper")),v=(0,n.ref)({label:"我要报障",icon:"icon-tianjia2",name:"report",component:a.default}),h=(0,n.ref)({label:"报障历史",icon:"icon-jilu",name:"history",component:l.default}),k=((0,n.computed)((()=>g.value?[v.value,h.value]:[v.value])),(0,n.ref)({appId:r.kJ,operStaff:r.eW,orgId:r.TY,sign:"",tenantId:-2,timeStamp:0})),y=(0,n.ref)(t.options.initTab||"report"),g=(0,n.ref)(null);function N(){m.close()}return(0,n.provide)("appInfo",k),(0,n.provide)("profile",g),(0,n.provide)("tab",y),(0,n.onMounted)((()=>{(0,n.nextTick)((()=>f(this,void 0,void 0,(function*(){m.config({title:"报障",width:480}),g.value=yield o.getAuthProfile(),yield function(){return f(this,void 0,void 0,(function*(){const e=Date.now();k.value.timeStamp=e,g.value&&(k.value.tenantId=g.value.tenantId),k.value.sign=(0,r.gw)(e,r.eW,k.value.tenantId)}))}()}))))})),(0,s.pv)({[s.eM.GO_REPORT]:function(){y.value="report"}}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",p,["report"===y.value?((0,n.openBlock)(),(0,n.createBlock)(a.default,{key:0,onClose:N})):(0,n.createCommentVNode)("",!0),"history"===y.value?((0,n.openBlock)(),(0,n.createBlock)(l.default,{key:1,onClose:N})):(0,n.createCommentVNode)("",!0)]))}});const v=(0,o(57775).Z)(m,[["__scopeId","data-v-dd081f2e"]])},66464:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var n=o(89810),a=o(52134),l=o(48402),r=o(88538);var c=o(11210),i=o(51882),d=o(86631),u=o(12773),s=o(88533),f=o(5341),p=function(e,t,o,n){return new(o||(o=Promise))((function(a,l){function r(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,c)}i((n=n.apply(e,t||[])).next())}))};const m={class:"reportDetail"},v={class:"detailContent"},h={key:1,class:"divide-height-10"},k={class:"d-flex align-center"},y={key:0,style:{display:"flex","align-items":"center","margin-left":"32px"}},g={class:"badge",style:{}},N={style:{color:"#3c3c3c","font-size":"12px"}},w=(0,n.defineComponent)({__name:"reportDetail",setup(e){const t=(0,f.mL)(),o=((0,d.Z)(),l.nC.get(r.cf),(0,i.Z)(),(0,c.Z)()),w=(0,n.inject)("detail"),b=(0,n.inject)("$filter"),C=((0,n.inject)("$message"),(0,n.inject)("$dialogHelper")),V=(0,n.computed)((()=>w.value?w.value.workSheetVO:null)),x=(0,n.computed)((()=>V.value&&V.value.wsheetSubtypeId?a.Mx[a.Y5[V.value.wsheetSubtypeId]]:"")),_=((0,n.ref)(0),(0,n.ref)(0),(0,n.ref)(["","非常不满意","不满意","一般","满意","非常满意"]),(0,n.ref)([]),(0,n.ref)(""));(0,n.ref)("");function B(){s.$x.emit("change-report-page",{to:"list"})}function S(){s.$x.emit("change-report-page",{to:"feedback",data:w.value,redirect:"detail"})}return(0,n.onMounted)((()=>p(this,void 0,void 0,(function*(){_.value=yield o.getAPIHost(),C.config({onBack:B})})))),(e,o)=>{const a=(0,n.resolveComponent)("el-form-item"),l=(0,n.resolveComponent)("el-divider"),r=(0,n.resolveComponent)("el-button"),c=(0,n.resolveComponent)("el-form");return(0,n.openBlock)(),(0,n.createElementBlock)("div",m,[(0,n.createElementVNode)("div",v,[(0,n.createVNode)(c,{"label-width":"90px","label-position":"left"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(a,{label:"状态:"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",{style:(0,n.normalizeStyle)({color:(0,n.unref)(b).formatStatus((0,n.unref)(V).status,"color")})},(0,n.toDisplayString)((0,n.unref)(b).formatStatus((0,n.unref)(V).status,"report")),5)])),_:1}),(0,n.unref)(V).wsheetObjName?((0,n.openBlock)(),(0,n.createBlock)(a,{key:0,label:"故障云电脑:"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V).wsheetObjName),1)])),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(a,{label:"故障类型:"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(x)),1)])),_:1}),(0,n.createVNode)(a,{label:"故障描述:",class:"form-item-description"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V).wsheetDesc),1)])),_:1}),(0,n.createVNode)(u.default,{item:(0,n.unref)(w),class:"item-border-bottom-none"},null,8,["item"]),(0,n.unref)(t)?((0,n.openBlock)(),(0,n.createElementBlock)("div",h)):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(a,{label:"联系人:"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V).contactName),1)])),_:1}),(0,n.createVNode)(a,{label:"联系电话:"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V).mobilePhone),1)])),_:1}),(0,n.createVNode)(a,{label:"邮箱:"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V).emails),1)])),_:1}),(0,n.createVNode)(a,{label:"创建时间:",class:"item-border-bottom-none"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(b).formatTime((0,n.unref)(V).createdTime)),1)])),_:1}),(0,n.createVNode)(l),(0,n.createVNode)(a,{label:"报障反馈:",class:"item-border-bottom-none"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",k,[(0,n.createVNode)(r,{type:"primary",onClick:S},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("查看")])),_:1}),(0,n.unref)(V).newMsgNum>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",y,[(0,n.createElementVNode)("div",g,(0,n.toDisplayString)((0,n.unref)(V).newMsgNum),1),(0,n.createElementVNode)("span",N,"您有"+(0,n.toDisplayString)((0,n.unref)(V).newMsgNum)+"新消息",1)])):(0,n.createCommentVNode)("",!0)])])),_:1})])),_:1})])])}}});const b=(0,o(57775).Z)(w,[["__scopeId","data-v-90e800ba"]])}}]);