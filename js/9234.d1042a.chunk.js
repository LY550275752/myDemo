"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[9234],{797:(e,t,r)=>{r.d(t,{w:()=>n});class n{static desensitizedName(e){if(!e)return"";let t=e.substr(0,1);for(let r=0;r<e.length-1;r++)t+="*";return t}static desensitizedCommon(e,t,r){if(!e&&t+r>=e.length)return"";let n=e.substring(0,t),a=e.substring(e.length-r,e.length),l="";for(let n=0;n<e.length-r-t;n++)l+="*";return n+l+a}static desensitizedPhone(e){return e?e.replace(this.phoneReg,"$1****$2"):""}static desensitizedIdNo(e){if(!e)return"";if(this.idNoReg.test(e)){let e=RegExp.$1,t=RegExp.$3;return e+RegExp.$2.replace(/./g,"*")+t}return e}static desensitizedAddr(e){if(!e)return"";if(this.addrReg.test(e)){return RegExp.$1+RegExp.$2.replace(/./g,"*")}return e}static desensitizedEmail(e){let t=e;if(String(e).indexOf("@")>0){let r=e.split("@"),n="";if(r[0].length>3){for(let e=3;e<r[0].length;e++)n+="*";t=r[0].substr(0,3)+n+"@"+r[1]}else{for(let e=1;e<r[0].length;e++)n+="*";t=r[0].substr(0,1)+n+"@"+r[1]}}return t}}n.phoneReg=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{4}(\d{4})$/,n.idNoReg=/(\d{6})(\d*)(\w{3})/,n.addrReg=/(.{9})(.*)/},82534:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(89810),a=r(65431),l=r(34813),o=r(86015),s=r(14957),i=(r(52719),r(71755),r(63135)),d=r(52134),c=r(48402),u=r(6522),f=r(797);const m={class:"historyDetailContent pa-4"},p={class:"d-flex align-center fill-width"},h={key:0,style:{display:"flex","align-items":"center","margin-left":"32px"}},g={class:"badge",style:{}},x={style:{color:"#3c3c3c","font-size":"12px"}},y=(0,n.defineComponent)({__name:"historyDetail",setup(e){o.e.Component;const t=c.nC.get(u.Xb),r=(0,i.R)(),{historyDetail:y,showHistoryDetail:v}=(0,a.Jk)(r),w=(0,n.inject)("$filter"),N=(0,n.computed)((()=>{var e;return(null===(e=y.value)||void 0===e?void 0:e.workSheetVO)||{}})),k=(0,n.computed)((()=>{var e;return(null===(e=y.value)||void 0===e?void 0:e.wsheetAttachList)||[]})),C=(0,n.computed)((()=>k.value.map((e=>D(e)))||[])),V=(0,n.computed)((()=>N.value&&N.value.wsheetSubtypeId?d.Mx[d.Y5[N.value.wsheetSubtypeId]]:"")),b=(0,n.computed)((()=>{var e;return f.w.desensitizedName(null===(e=N.value)||void 0===e?void 0:e.contactName)})),S=(0,n.computed)((()=>{var e;return f.w.desensitizedPhone(null===(e=N.value)||void 0===e?void 0:e.mobilePhone)})),_=(0,n.computed)((()=>{var e;return f.w.desensitizedEmail(null===(e=N.value)||void 0===e?void 0:e.emails)}));function D(e){return`${t.getAPIHost()}/api/v2/client/downloadWsheetFile?attachName=${encodeURIComponent(e.attachName)}&attachAddress=${encodeURIComponent(e.attachAddress)}`}function E(){}return(0,n.onMounted)((()=>{})),(e,t)=>{const r=(0,n.resolveComponent)("el-form-item"),a=(0,n.resolveComponent)("el-image"),i=(0,n.resolveComponent)("el-icon"),d=(0,n.resolveComponent)("el-form");return(0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(s.V),{class:"historyDetailContainer",show:(0,n.unref)(v),"onUpdate:show":t[0]||(t[0]=e=>(0,n.isRef)(v)?v.value=e:null),title:"报障详情"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",m,[(0,n.createVNode)(d,{"label-width":"90px"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(r,{label:"状态",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",{class:"status fs-14",style:(0,n.normalizeStyle)({color:(0,n.unref)(w).formatStatus((0,n.unref)(N).status,"color")})},(0,n.toDisplayString)((0,n.unref)(w).formatStatus((0,n.unref)(N).status,"report")),5)])),_:1}),(0,n.unref)(N).wsheetObjName?((0,n.openBlock)(),(0,n.createBlock)(r,{key:0,label:"故障桌面",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(N).wsheetObjName),1)])),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(r,{label:"故障类型",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(V)),1)])),_:1}),(0,n.createVNode)(r,{label:"故障描述",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(N).wsheetDesc),1)])),_:1}),(0,n.unref)(k).length>0?((0,n.openBlock)(),(0,n.createBlock)(r,{key:1,label:"附件"},{default:(0,n.withCtx)((()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(k),((e,t)=>((0,n.openBlock)(),(0,n.createBlock)(a,{src:D(e),key:t,class:"mr-2 grey lighten-5",fit:"contain",style:{width:"80px",height:"80px"},onClick:()=>function(e){(0,o.e)({images:C.value,startPosition:e||0})}(t)},null,8,["src","onClick"])))),128))])),_:1})):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(r,{label:"联系人",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(b)),1)])),_:1}),(0,n.createVNode)(r,{label:"联系电话",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(S)),1)])),_:1}),(0,n.createVNode)(r,{label:"邮箱",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(_)),1)])),_:1}),(0,n.createVNode)(r,{label:"创建时间",class:"grey--text text--darken-1"},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)((0,n.unref)(w).formatTime((0,n.unref)(N).createdTime)),1)])),_:1}),(0,n.createVNode)(r,{label:"报障反馈",onClick:E},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",p,[(0,n.unref)(N).newMsgNum>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",h,[(0,n.createElementVNode)("div",g,(0,n.toDisplayString)((0,n.unref)(N).newMsgNum),1),(0,n.createElementVNode)("span",x,"您有"+(0,n.toDisplayString)((0,n.unref)(N).newMsgNum)+"新消息",1)])):(0,n.createCommentVNode)("",!0),(0,n.createVNode)(i,{class:"ml-auto"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)((0,n.unref)(l.Z))])),_:1})])])),_:1})])),_:1})])])),_:1},8,["show"])}}}),v=y},3873:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(89810),a=r(63135),l=r(17999),o=r(56706);const s={class:"d-flex align-center justify-space-between"},i={class:"title fs-14"},d={class:"desc mt-4 mb-2 fs-12 grey--text text--darken-1"},c=(u=()=>(0,n.createElementVNode)("div",{class:"divider my-3"},null,-1),(0,n.pushScopeId)("data-v-218f9796"),u=u(),(0,n.popScopeId)(),u);var u;const f={class:"d-flex align-center justify-space-between"},m={class:"modify fs-12 grey--text text--darken-1"},p=(0,n.defineComponent)({__name:"historyItem",props:{item:null},setup(e){const t=e,r=(0,n.inject)("$filter"),u=(0,l.tv)(),p=(0,l.yj)(),h=(0,a.R)(),g=(0,o.Z)(),x=(0,n.computed)((()=>t.item.workSheetVO));function y(){"phone_screen"===p.name?g.$patch({showReportFeedback:!0,showReportHistory:!1,feedbackId:x.value.wsheetIdString,reportTitle:"报障反馈"}):u.push({name:"phone_report_feedback",query:{id:x.value.wsheetIdString}})}function v(){h.updateCurrentHistoryDetail(t.item,!0)}return(e,t)=>{const a=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"historyItem white pa-4 mb-2",onClick:v},[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("div",i,(0,n.toDisplayString)((0,n.unref)(x).wsheetTitle),1),(0,n.createElementVNode)("div",{class:"status fs-12",style:(0,n.normalizeStyle)({color:(0,n.unref)(r).formatStatus((0,n.unref)(x).status,"color")})},(0,n.toDisplayString)((0,n.unref)(r).formatStatus((0,n.unref)(x).status,"report")),5)]),(0,n.createElementVNode)("div",d,(0,n.toDisplayString)((0,n.unref)(x).wsheetDesc),1),c,(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",m,(0,n.toDisplayString)((0,n.unref)(r).formatTime((0,n.unref)(x).createdTime,"YYYY-MM-DD HH:mm")),1),(0,n.createVNode)(a,{plain:"",type:"primary",round:"",size:"small",onClick:(0,n.withModifiers)(y,["stop"])},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)("报障反馈")])),_:1},8,["onClick"])])])}}});const h=(0,r(57775).Z)(p,[["__scopeId","data-v-218f9796"]])}}]);