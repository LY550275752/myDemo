"use strict";(self.webpackChunkclink_web=self.webpackChunkclink_web||[]).push([[9805],{35247:(e,t,o)=>{o.d(t,{Yi:()=>s,bC:()=>u,wz:()=>d,we:()=>r,Du:()=>c,bL:()=>y});var n=o(48402),i=o(6298),a=o(6522),l=o(88538);const c={1:"云电脑",2:"云电脑",3:"云手机"};var r;!function(e){e[e.UNDO=0]="UNDO",e[e.IGNORE=1]="IGNORE"}(r||(r={}));const d={1:"非工作时间异常",2:"登录地点异常","1#2":"非工作时间异常和登录地点异常"},s={10:"瘦终端",11:"瘦终端",15:"IPTV",20:"Android Phone",25:"PC",26:"WinXP-PC",30:"iPhone",35:"Android Pad",40:"iPad",45:"Mac",60:"Web客户端",90:"Web"},u={10:{color:"#32CC93",name:"equipment-1"},11:{color:"#32CC93",name:"equipment-1"},15:{color:"#4CA7FB",name:"equipment-3"},20:{color:"#4CA7FB",name:"equipment-3"},25:{color:"#FD893A",name:"equipment-4"},26:{color:"#FD893A",name:"equipment-4"},30:{color:"#4CA7FB",name:"equipment-2"},35:{color:"#4CA7FB",name:"equipment-3"},40:{color:"#4CA7FB",name:"equipment-2"},45:{color:"#FD893A",name:"equipment-5"},def:{color:"#FD893A",name:"equipment-6"}};var p,m,f,v=function(e,t,o,n){var i,a=arguments.length,l=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(l=(a<3?i(l):a>3?i(t,o,l):i(t,o))||l);return a>3&&l&&Object.defineProperty(t,o,l),l},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function l(e){try{r(n.next(e))}catch(e){a(e)}}function c(e){try{r(n.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,c)}r((n=n.apply(e,t||[])).next())}))};let y=class{constructor(e,t,o){this.auth=e,this.request=t,this.env=o}getLogs(e){return g(this,void 0,void 0,(function*(){e.oneDay||1!==e.pageNum||(e.lastRecordLoginTime=0,e.lastRecordUserLogId=0);return(yield this.getApi("api/cdserv/client/getLogs",e)).data}))}getExcepLogCounts(e){return g(this,void 0,void 0,(function*(){const t=yield this.auth.getAuthProfile();if(!e||!t)return;const o={desktopId:e,userId:t.userId};return(yield this.getApi("api/cdserv/client/getExcepLogCounts",o)).data}))}ignoreAllExcepLogs(){return g(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/ignoreAllExcepLogs")}))}handleExcepLog(e){return g(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/handleExcepLog",e)}))}getDeviceList(){return g(this,void 0,void 0,(function*(){return(yield this.getApi("api/cdserv/client/device/list")).data}))}deviceUnbind(e){return g(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/device/unbinding",e)}))}deviceEdit(e){return g(this,void 0,void 0,(function*(){return yield this.postApi("api/cdserv/client/device/edit",e)}))}getApi(e,t){return this.request.api({url:e,method:"GET",params:t})}postApi(e,t){return g(this,void 0,void 0,(function*(){return this.request.api({url:e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}))}};y=v([(0,n.Xn)(),h("design:paramtypes",["function"==typeof(p=void 0!==i.g&&i.g)?p:Object,"function"==typeof(m=void 0!==l.cf&&l.cf)?m:Object,"function"==typeof(f=void 0!==a.Xb&&a.Xb)?f:Object])],y)},89805:(e,t,o)=>{o.r(t),o.d(t,{default:()=>x});var n=o(89810),i=o(35247),a=o(88533),l=o(48402),c=o(73827),r=o(5341),d=function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function l(e){try{r(n.next(e))}catch(e){a(e)}}function c(e){try{r(n.throw(e))}catch(e){a(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,c)}r((n=n.apply(e,t||[])).next())}))};const s={class:"detail"},u={class:"detail-form panel"},p={class:"detail-form-item-val"},m={class:"detail-form-item-val"},f={class:"detail-form-item-val"},v={class:"detail-form-item-val"},h={key:0,class:"detail-form-item-excep"},g={key:0,class:"detail-form-item-excep-mobile"},y={class:"detail-form-item-val"},C={class:"detail-btn"},b=(0,n.defineComponent)({__name:"LogDetail",props:{data:{default:()=>({}),type:Object},fromType:{default:"",type:String}},setup(e){const t=e,o=l.nC.get(i.bL),b=((0,n.inject)("$message"),(0,n.inject)("$dialogHelper")),x=(0,n.ref)(!1),N=(0,n.ref)(i.wz),w=(0,r.mL)(),k=(0,n.ref)(w?84:104);function V(){a.$x.emit("toggle",{type:t.data.from||"SecureCenter"})}function E(){return d(this,void 0,void 0,(function*(){const e={userLogId:t.data.userLogId,handleType:i.we.IGNORE};x.value=!0;try{yield o.handleExcepLog(e),c.z8.success("异常已忽略"),V()}catch(e){c.z8.error(e.message)}finally{x.value=!1}}))}return(0,n.onMounted)((()=>{b.config({title:"登录详情",onBack:()=>{V()},extendSlot:[]})})),(t,o)=>{const i=(0,n.resolveComponent)("el-form-item"),a=(0,n.resolveComponent)("el-divider"),l=(0,n.resolveComponent)("WarningFilled"),c=(0,n.resolveComponent)("el-icon"),r=(0,n.resolveComponent)("el-tooltip"),d=(0,n.resolveComponent)("el-form"),b=(0,n.resolveComponent)("Remove"),V=(0,n.resolveComponent)("el-button");return(0,n.openBlock)(),(0,n.createElementBlock)("div",s,[(0,n.createElementVNode)("div",u,[(0,n.createVNode)(d,{model:e.data,"label-width":k.value},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(i,{class:"detail-form-item",label:"帐号名称："},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",p,(0,n.toDisplayString)(e.data.userName),1)])),_:1}),(0,n.createVNode)(i,{class:"detail-form-item",label:"登录设备："},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",m,(0,n.toDisplayString)(e.data.deviceName),1)])),_:1}),(0,n.createVNode)(i,{class:"detail-form-item not-border",label:"IP地址："},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",f,(0,n.toDisplayString)(e.data.userIp),1)])),_:1}),(0,n.createVNode)(a,{class:"detail-form--divider"}),(0,n.createVNode)(i,{class:"detail-form-item",label:"登录时间："},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",v,(0,n.toDisplayString)(e.data.loginTime),1),e.data.isException?((0,n.openBlock)(),(0,n.createElementBlock)("span",h,[(0,n.unref)(w)?((0,n.openBlock)(),(0,n.createElementBlock)("div",g,[(0,n.createVNode)(c,{class:"detail-form-item-excep-icon"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1}),(0,n.createTextVNode)((0,n.toDisplayString)(N.value[e.data.exceptionType]),1)])):((0,n.openBlock)(),(0,n.createBlock)(r,{key:1,class:"item",effect:"dark",content:N.value[e.data.exceptionType],placement:"top"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(c,{class:"detail-form-item-excep-icon"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(l)])),_:1})])),_:1},8,["content"]))])):(0,n.createCommentVNode)("",!0)])),_:1}),(0,n.createVNode)(i,{class:"detail-form-item not-border",label:"下线时间："},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",y,(0,n.toDisplayString)(e.data.logoutTime),1)])),_:1})])),_:1},8,["model","label-width"]),(0,n.createElementVNode)("div",C,[e.data.isException?((0,n.openBlock)(),(0,n.createBlock)(V,{key:0,disabled:!!e.data.handleStatus,loading:x.value,onClick:E},{default:(0,n.withCtx)((()=>[(0,n.unref)(w)?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createBlock)(c,{key:0,class:"detail-btn-icon"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b)])),_:1})),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.data.handleStatus?"已忽略":"忽略"),1)])),_:1},8,["disabled","loading"])):(0,n.createCommentVNode)("",!0)])])])}}});const x=(0,o(57775).Z)(b,[["__scopeId","data-v-731b28a0"]])}}]);